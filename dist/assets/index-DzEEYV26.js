(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function yT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Um={exports:{}},Xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function TR(){if(sE)return Xl;sE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var d in o)d!=="key"&&(u[d]=o[d])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Xl.Fragment=e,Xl.jsx=t,Xl.jsxs=t,Xl}var aE;function bR(){return aE||(aE=1,Um.exports=TR()),Um.exports}var T=bR(),Lm={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function wR(){if(oE)return De;oE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function R(U){return U===null||typeof U!="object"?null:(U=S&&U[S]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,G={};function V(U,ie,ge){this.props=U,this.context=ie,this.refs=G,this.updater=ge||x}V.prototype.isReactComponent={},V.prototype.setState=function(U,ie){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ie,"setState")},V.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function z(){}z.prototype=V.prototype;function q(U,ie,ge){this.props=U,this.context=ie,this.refs=G,this.updater=ge||x}var K=q.prototype=new z;K.constructor=q,M(K,V.prototype),K.isPureReactComponent=!0;var re=Array.isArray,se={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function P(U,ie,ge,ae,ue,we){return ge=we.ref,{$$typeof:r,type:U,key:ie,ref:ge!==void 0?ge:null,props:we}}function C(U,ie){return P(U.type,ie,void 0,void 0,void 0,U.props)}function b(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function I(U){var ie={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ge){return ie[ge]})}var D=/\/+/g;function O(U,ie){return typeof U=="object"&&U!==null&&U.key!=null?I(""+U.key):ie.toString(36)}function N(){}function _e(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(N,N):(U.status="pending",U.then(function(ie){U.status==="pending"&&(U.status="fulfilled",U.value=ie)},function(ie){U.status==="pending"&&(U.status="rejected",U.reason=ie)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Te(U,ie,ge,ae,ue){var we=typeof U;(we==="undefined"||we==="boolean")&&(U=null);var be=!1;if(U===null)be=!0;else switch(we){case"bigint":case"string":case"number":be=!0;break;case"object":switch(U.$$typeof){case r:case e:be=!0;break;case E:return be=U._init,Te(be(U._payload),ie,ge,ae,ue)}}if(be)return ue=ue(U),be=ae===""?"."+O(U,0):ae,re(ue)?(ge="",be!=null&&(ge=be.replace(D,"$&/")+"/"),Te(ue,ie,ge,"",function(ot){return ot})):ue!=null&&(b(ue)&&(ue=C(ue,ge+(ue.key==null||U&&U.key===ue.key?"":(""+ue.key).replace(D,"$&/")+"/")+be)),ie.push(ue)),1;be=0;var at=ae===""?".":ae+":";if(re(U))for(var xe=0;xe<U.length;xe++)ae=U[xe],we=at+O(ae,xe),be+=Te(ae,ie,ge,we,ue);else if(xe=R(U),typeof xe=="function")for(U=xe.call(U),xe=0;!(ae=U.next()).done;)ae=ae.value,we=at+O(ae,xe++),be+=Te(ae,ie,ge,we,ue);else if(we==="object"){if(typeof U.then=="function")return Te(_e(U),ie,ge,ae,ue);throw ie=String(U),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return be}function oe(U,ie,ge){if(U==null)return U;var ae=[],ue=0;return Te(U,ae,"","",function(we){return ie.call(ge,we,ue++)}),ae}function de(U){if(U._status===-1){var ie=U._result;ie=ie(),ie.then(function(ge){(U._status===0||U._status===-1)&&(U._status=1,U._result=ge)},function(ge){(U._status===0||U._status===-1)&&(U._status=2,U._result=ge)}),U._status===-1&&(U._status=0,U._result=ie)}if(U._status===1)return U._result.default;throw U._result}var pe=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Ue(){}return De.Children={map:oe,forEach:function(U,ie,ge){oe(U,function(){ie.apply(this,arguments)},ge)},count:function(U){var ie=0;return oe(U,function(){ie++}),ie},toArray:function(U){return oe(U,function(ie){return ie})||[]},only:function(U){if(!b(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},De.Component=V,De.Fragment=t,De.Profiler=o,De.PureComponent=q,De.StrictMode=s,De.Suspense=p,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,De.act=function(){throw Error("act(...) is not supported in production builds of React.")},De.cache=function(U){return function(){return U.apply(null,arguments)}},De.cloneElement=function(U,ie,ge){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ae=M({},U.props),ue=U.key,we=void 0;if(ie!=null)for(be in ie.ref!==void 0&&(we=void 0),ie.key!==void 0&&(ue=""+ie.key),ie)!Z.call(ie,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ie.ref===void 0||(ae[be]=ie[be]);var be=arguments.length-2;if(be===1)ae.children=ge;else if(1<be){for(var at=Array(be),xe=0;xe<be;xe++)at[xe]=arguments[xe+2];ae.children=at}return P(U.type,ue,void 0,void 0,we,ae)},De.createContext=function(U){return U={$$typeof:h,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:u,_context:U},U},De.createElement=function(U,ie,ge){var ae,ue={},we=null;if(ie!=null)for(ae in ie.key!==void 0&&(we=""+ie.key),ie)Z.call(ie,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ue[ae]=ie[ae]);var be=arguments.length-2;if(be===1)ue.children=ge;else if(1<be){for(var at=Array(be),xe=0;xe<be;xe++)at[xe]=arguments[xe+2];ue.children=at}if(U&&U.defaultProps)for(ae in be=U.defaultProps,be)ue[ae]===void 0&&(ue[ae]=be[ae]);return P(U,we,void 0,void 0,null,ue)},De.createRef=function(){return{current:null}},De.forwardRef=function(U){return{$$typeof:d,render:U}},De.isValidElement=b,De.lazy=function(U){return{$$typeof:E,_payload:{_status:-1,_result:U},_init:de}},De.memo=function(U,ie){return{$$typeof:g,type:U,compare:ie===void 0?null:ie}},De.startTransition=function(U){var ie=se.T,ge={};se.T=ge;try{var ae=U(),ue=se.S;ue!==null&&ue(ge,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Ue,pe)}catch(we){pe(we)}finally{se.T=ie}},De.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},De.use=function(U){return se.H.use(U)},De.useActionState=function(U,ie,ge){return se.H.useActionState(U,ie,ge)},De.useCallback=function(U,ie){return se.H.useCallback(U,ie)},De.useContext=function(U){return se.H.useContext(U)},De.useDebugValue=function(){},De.useDeferredValue=function(U,ie){return se.H.useDeferredValue(U,ie)},De.useEffect=function(U,ie){return se.H.useEffect(U,ie)},De.useId=function(){return se.H.useId()},De.useImperativeHandle=function(U,ie,ge){return se.H.useImperativeHandle(U,ie,ge)},De.useInsertionEffect=function(U,ie){return se.H.useInsertionEffect(U,ie)},De.useLayoutEffect=function(U,ie){return se.H.useLayoutEffect(U,ie)},De.useMemo=function(U,ie){return se.H.useMemo(U,ie)},De.useOptimistic=function(U,ie){return se.H.useOptimistic(U,ie)},De.useReducer=function(U,ie,ge){return se.H.useReducer(U,ie,ge)},De.useRef=function(U){return se.H.useRef(U)},De.useState=function(U){return se.H.useState(U)},De.useSyncExternalStore=function(U,ie,ge){return se.H.useSyncExternalStore(U,ie,ge)},De.useTransition=function(){return se.H.useTransition()},De.version="19.0.0",De}var lE;function qp(){return lE||(lE=1,Lm.exports=wR()),Lm.exports}var j=qp();const ma=yT(j);var jm={exports:{}},Wl={},Bm={exports:{}},zm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function SR(){return uE||(uE=1,function(r){function e(oe,de){var pe=oe.length;oe.push(de);e:for(;0<pe;){var Ue=pe-1>>>1,U=oe[Ue];if(0<o(U,de))oe[Ue]=de,oe[pe]=U,pe=Ue;else break e}}function t(oe){return oe.length===0?null:oe[0]}function s(oe){if(oe.length===0)return null;var de=oe[0],pe=oe.pop();if(pe!==de){oe[0]=pe;e:for(var Ue=0,U=oe.length,ie=U>>>1;Ue<ie;){var ge=2*(Ue+1)-1,ae=oe[ge],ue=ge+1,we=oe[ue];if(0>o(ae,pe))ue<U&&0>o(we,ae)?(oe[Ue]=we,oe[ue]=pe,Ue=ue):(oe[Ue]=ae,oe[ge]=pe,Ue=ge);else if(ue<U&&0>o(we,pe))oe[Ue]=we,oe[ue]=pe,Ue=ue;else break e}}return de}function o(oe,de){var pe=oe.sortIndex-de.sortIndex;return pe!==0?pe:oe.id-de.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var p=[],g=[],E=1,S=null,R=3,x=!1,M=!1,G=!1,V=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function K(oe){for(var de=t(g);de!==null;){if(de.callback===null)s(g);else if(de.startTime<=oe)s(g),de.sortIndex=de.expirationTime,e(p,de);else break;de=t(g)}}function re(oe){if(G=!1,K(oe),!M)if(t(p)!==null)M=!0,_e();else{var de=t(g);de!==null&&Te(re,de.startTime-oe)}}var se=!1,Z=-1,P=5,C=-1;function b(){return!(r.unstable_now()-C<P)}function I(){if(se){var oe=r.unstable_now();C=oe;var de=!0;try{e:{M=!1,G&&(G=!1,z(Z),Z=-1),x=!0;var pe=R;try{t:{for(K(oe),S=t(p);S!==null&&!(S.expirationTime>oe&&b());){var Ue=S.callback;if(typeof Ue=="function"){S.callback=null,R=S.priorityLevel;var U=Ue(S.expirationTime<=oe);if(oe=r.unstable_now(),typeof U=="function"){S.callback=U,K(oe),de=!0;break t}S===t(p)&&s(p),K(oe)}else s(p);S=t(p)}if(S!==null)de=!0;else{var ie=t(g);ie!==null&&Te(re,ie.startTime-oe),de=!1}}break e}finally{S=null,R=pe,x=!1}de=void 0}}finally{de?D():se=!1}}}var D;if(typeof q=="function")D=function(){q(I)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,N=O.port2;O.port1.onmessage=I,D=function(){N.postMessage(null)}}else D=function(){V(I,0)};function _e(){se||(se=!0,D())}function Te(oe,de){Z=V(function(){oe(r.unstable_now())},de)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(oe){oe.callback=null},r.unstable_continueExecution=function(){M||x||(M=!0,_e())},r.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<oe?Math.floor(1e3/oe):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(oe){switch(R){case 1:case 2:case 3:var de=3;break;default:de=R}var pe=R;R=de;try{return oe()}finally{R=pe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(oe,de){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var pe=R;R=oe;try{return de()}finally{R=pe}},r.unstable_scheduleCallback=function(oe,de,pe){var Ue=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ue+pe:Ue):pe=Ue,oe){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=pe+U,oe={id:E++,callback:de,priorityLevel:oe,startTime:pe,expirationTime:U,sortIndex:-1},pe>Ue?(oe.sortIndex=pe,e(g,oe),t(p)===null&&oe===t(g)&&(G?(z(Z),Z=-1):G=!0,Te(re,pe-Ue))):(oe.sortIndex=U,e(p,oe),M||x||(M=!0,_e())),oe},r.unstable_shouldYield=b,r.unstable_wrapCallback=function(oe){var de=R;return function(){var pe=R;R=de;try{return oe.apply(this,arguments)}finally{R=pe}}}}(zm)),zm}var cE;function AR(){return cE||(cE=1,Bm.exports=SR()),Bm.exports}var qm={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE;function RR(){if(hE)return tn;hE=1;var r=qp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:g,implementation:E}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,tn.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},tn.flushSync=function(p){var g=h.T,E=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=E,s.d.f()}},tn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},tn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},tn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,S=d(E,g.crossOrigin),R=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:R,fetchPriority:x}):E==="script"&&s.d.X(p,{crossOrigin:S,integrity:R,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},tn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=d(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},tn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,S=d(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},tn.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=d(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},tn.requestFormReset=function(p){s.d.r(p)},tn.unstable_batchedUpdates=function(p,g){return p(g)},tn.useFormState=function(p,g,E){return h.H.useFormState(p,g,E)},tn.useFormStatus=function(){return h.H.useHostTransitionStatus()},tn.version="19.0.0",tn}var fE;function IR(){if(fE)return qm.exports;fE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),qm.exports=RR(),qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function CR(){if(dE)return Wl;dE=1;var r=AR(),e=qp(),t=IR();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var u=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),x=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),re=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=se&&n[se]||n["@@iterator"],typeof n=="function"?n:null)}var P=Symbol.for("react.client.reference");function C(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===P?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case p:return"Fragment";case d:return"Portal";case E:return"Profiler";case g:return"StrictMode";case G:return"Suspense";case V:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case x:return(n.displayName||"Context")+".Provider";case R:return(n._context.displayName||"Context")+".Consumer";case M:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case z:return i=n.displayName||null,i!==null?i:C(n.type)||"Memo";case q:i=n._payload,n=n._init;try{return C(n(i))}catch{}}return null}var b=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,D,O;function N(n){if(D===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);D=i&&i[1]||"",O=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+D+n+O}var _e=!1;function Te(n,i){if(!n||_e)return"";_e=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(X){var Q=X}Reflect.construct(n,[],ne)}else{try{ne.call()}catch(X){Q=X}n.call(ne.prototype)}}else{try{throw Error()}catch(X){Q=X}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(X){if(X&&Q&&typeof X.stack=="string")return[X.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var k=v.split(`
`),B=w.split(`
`);for(f=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===k.length||f===B.length)for(l=k.length-1,f=B.length-1;1<=l&&0<=f&&k[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(k[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||k[l]!==B[f]){var W=`
`+k[l].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=l&&0<=f);break}}}finally{_e=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?N(a):""}function oe(n){switch(n.tag){case 26:case 27:case 5:return N(n.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return n=Te(n.type,!1),n;case 11:return n=Te(n.type.render,!1),n;case 1:return n=Te(n.type,!0),n;default:return""}}function de(n){try{var i="";do i+=oe(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function pe(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Ue(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function U(n){if(pe(n)!==n)throw Error(s(188))}function ie(n){var i=n.alternate;if(!i){if(i=pe(n),i===null)throw Error(s(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return U(f),n;if(m===l)return U(f),i;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=m;else{for(var v=!1,w=f.child;w;){if(w===a){v=!0,a=f,l=m;break}if(w===l){v=!0,l=f,a=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===a){v=!0,a=m,l=f;break}if(w===l){v=!0,l=m,a=f;break}w=w.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:i}function ge(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=ge(n),i!==null)return i;n=n.sibling}return null}var ae=Array.isArray,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},be=[],at=-1;function xe(n){return{current:n}}function ot(n){0>at||(n.current=be[at],be[at]=null,at--)}function He(n,i){at++,be[at]=n.current,n.current=i}var Gt=xe(null),Lr=xe(null),kn=xe(null),Ci=xe(null);function Ni(n,i){switch(He(kn,i),He(Lr,n),He(Gt,null),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?Pv(i):0;break;default:if(n=n===8?i.parentNode:i,i=n.tagName,n=n.namespaceURI)n=Pv(n),i=Mv(n,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ot(Gt),He(Gt,i)}function jr(){ot(Gt),ot(Lr),ot(kn)}function Go(n){n.memoizedState!==null&&He(Ci,n);var i=Gt.current,a=Mv(i,n.type);i!==a&&(He(Lr,n),He(Gt,a))}function xa(n){Lr.current===n&&(ot(Gt),ot(Lr)),Ci.current===n&&(ot(Ci),Gl._currentValue=we)}var Da=Object.prototype.hasOwnProperty,Os=r.unstable_scheduleCallback,Oa=r.unstable_cancelCallback,jf=r.unstable_shouldYield,$o=r.unstable_requestPaint,gn=r.unstable_now,zu=r.unstable_getCurrentPriorityLevel,Ct=r.unstable_ImmediatePriority,Vt=r.unstable_UserBlockingPriority,Br=r.unstable_NormalPriority,qu=r.unstable_LowPriority,Ko=r.unstable_IdlePriority,Bf=r.log,ks=r.unstable_setDisableYieldValue,xi=null,Jt=null;function Qo(n){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(xi,n,void 0,(n.current.flags&128)===128)}catch{}}function cr(n){if(typeof Bf=="function"&&ks(n),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(xi,n)}catch{}}var ln=Math.clz32?Math.clz32:Hu,Yo=Math.log,Fu=Math.LN2;function Hu(n){return n>>>=0,n===0?32:31-(Yo(n)/Fu|0)|0}var hr=128,Di=4194304;function tr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Pn(n,i){var a=n.pendingLanes;if(a===0)return 0;var l=0,f=n.suspendedLanes,m=n.pingedLanes,v=n.warmLanes;n=n.finishedLanes!==0;var w=a&134217727;return w!==0?(a=w&~f,a!==0?l=tr(a):(m&=w,m!==0?l=tr(m):n||(v=w&~v,v!==0&&(l=tr(v))))):(w=a&~f,w!==0?l=tr(w):m!==0?l=tr(m):n||(v=a&~v,v!==0&&(l=tr(v)))),l===0?0:i!==0&&i!==l&&(i&f)===0&&(f=l&-l,v=i&-i,f>=v||f===32&&(v&4194176)!==0)?i:l}function Oi(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ka(n,i){switch(n){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xo(){var n=hr;return hr<<=1,(hr&4194176)===0&&(hr=128),n}function ki(){var n=Di;return Di<<=1,(Di&62914560)===0&&(Di=4194304),n}function Pa(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function vt(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Gu(n,i,a,l,f,m){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,k=n.expirationTimes,B=n.hiddenUpdates;for(a=v&~a;0<a;){var W=31-ln(a),ne=1<<W;w[W]=0,k[W]=-1;var Q=B[W];if(Q!==null)for(B[W]=null,W=0;W<Q.length;W++){var X=Q[W];X!==null&&(X.lane&=-536870913)}a&=~ne}l!==0&&Pi(n,l,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~i))}function Pi(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-ln(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194218}function Mi(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-ln(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function $u(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ku(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:Jv(n.type))}function Vi(n,i){var a=ue.p;try{return ue.p=n,i()}finally{ue.p=a}}var fr=Math.random().toString(36).slice(2),Ut="__reactFiber$"+fr,Nt="__reactProps$"+fr,zr="__reactContainer$"+fr,Ps="__reactEvents$"+fr,Ma="__reactListeners$"+fr,dr="__reactHandles$"+fr,Wo="__reactResources$"+fr,Ui="__reactMarker$"+fr;function Ms(n){delete n[Ut],delete n[Nt],delete n[Ps],delete n[Ma],delete n[dr]}function nr(n){var i=n[Ut];if(i)return i;for(var a=n.parentNode;a;){if(i=a[zr]||a[Ut]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Lv(n);n!==null;){if(a=n[Ut])return a;n=Lv(n)}return i}n=a,a=n.parentNode}return null}function qr(n){if(n=n[Ut]||n[zr]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Li(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function ji(n){var i=n[Wo];return i||(i=n[Wo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function lt(n){n[Ui]=!0}var Zo=new Set,Va={};function Sn(n,i){yn(n,i),yn(n+"Capture",i)}function yn(n,i){for(Va[n]=i,n=0;n<i.length;n++)Zo.add(i[n])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jo={},el={};function Qu(n){return Da.call(el,n)?!0:Da.call(Jo,n)?!1:zf.test(n)?el[n]=!0:(Jo[n]=!0,!1)}function Bi(n,i,a){if(Qu(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function zi(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Mn(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function un(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Yu(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qf(n){var i=Yu(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,m.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Vs(n){n._valueTracker||(n._valueTracker=qf(n))}function tl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Yu(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Ua(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Fr=/[\n"\\]/g;function dt(n){return n.replace(Fr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function qi(n,i,a,l,f,m,v,w){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+un(i)):n.value!==""+un(i)&&(n.value=""+un(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?La(n,v,un(i)):a!=null?La(n,v,un(a)):l!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+un(w):n.removeAttribute("name")}function Us(n,i,a,l,f,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;a=a!=null?""+un(a):"",i=i!=null?""+un(i):a,w||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v)}function La(n,i,a){i==="number"&&Ua(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Ge(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+un(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Ls(n,i,a){if(i!=null&&(i=""+un(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+un(a):""}function Fi(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ae(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=un(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Vn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ff=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Ff.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Xu(n,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&nl(n,f,l)}else for(var m in i)i.hasOwnProperty(m)&&nl(n,m,i[m])}function rl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mr(n){return Gf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Un=null;function ja(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Hr=null,Gr=null;function $r(n){var i=qr(n);if(i&&(n=i.stateNode)){var a=n[Nt]||null;e:switch(n=i.stateNode,i.type){case"input":if(qi(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Nt]||null;if(!f)throw Error(s(90));qi(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&tl(l)}break e;case"textarea":Ls(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ge(n,!!a.multiple,i,!1)}}}var il=!1;function Wu(n,i,a){if(il)return n(i,a);il=!0;try{var l=n(i);return l}finally{if(il=!1,(Hr!==null||Gr!==null)&&(qc(),Hr&&(i=Hr,n=Gr,Gr=Hr=null,$r(i),n)))for(i=0;i<n.length;i++)$r(n[i])}}function js(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Nt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ln=!1;if(An)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){Ln=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{Ln=!1}var pr=null,Hi=null,Kr=null;function sl(){if(Kr)return Kr;var n,i=Hi,a=i.length,l,f="value"in pr?pr.value:pr.textContent,m=f.length;for(n=0;n<a&&i[n]===f[n];n++);var v=a-n;for(l=1;l<=v&&i[a-l]===f[m-l];l++);return Kr=f.slice(n,1<l?1-l:void 0)}function gr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function yr(){return!0}function al(){return!1}function Lt(n){function i(a,l,f,m,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?yr:al,this.isPropagationStopped=al,this}return I(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=yr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=yr)},persist:function(){},isPersistent:yr}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ba=Lt(Qe),zs=I({},Qe,{view:0,detail:0}),Zu=Lt(zs),za,qa,_r,qs=I({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_r&&(_r&&n.type==="mousemove"?(za=n.screenX-_r.screenX,qa=n.screenY-_r.screenY):qa=za=0,_r=n),za)},movementY:function(n){return"movementY"in n?n.movementY:qa}}),jn=Lt(qs),Ju=I({},qs,{dataTransfer:0}),$f=Lt(Ju),Fs=I({},zs,{relatedTarget:0}),Fa=Lt(Fs),ol=I({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),Ha=Lt(ol),ec=I({},Qe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ga=Lt(ec),Kf=I({},Qe,{data:0}),ll=Lt(Kf),Hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ul(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=nc[n])?!!i[n]:!1}function Gs(){return ul}var rc=I({},zs,{key:function(n){if(n.key){var i=Hs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=gr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(n){return n.type==="keypress"?gr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?gr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$a=Lt(rc),ic=I({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=Lt(ic),Qr=I({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),sc=Lt(Qr),ac=I({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),oc=Lt(ac),lc=I({},qs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ka=Lt(lc),cn=I({},Qe,{newState:0,oldState:0}),uc=Lt(cn),cc=[9,13,27,32],vr=An&&"CompositionEvent"in window,c=null;An&&"documentMode"in document&&(c=document.documentMode);var y=An&&"TextEvent"in window&&!c,_=An&&(!vr||c&&8<c&&11>=c),A=" ",H=!1;function Y(n,i){switch(n){case"keyup":return cc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Be=!1;function xt(n,i){switch(n){case"compositionend":return le(i);case"keypress":return i.which!==32?null:(H=!0,A);case"textInput":return n=i.data,n===A&&H?null:n;default:return null}}function ze(n,i){if(Be)return n==="compositionend"||!vr&&Y(n,i)?(n=sl(),Kr=Hi=pr=null,Be=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!jt[n.type]:i==="textarea"}function Yr(n,i,a,l){Hr?Gr?Gr.push(l):Gr=[l]:Hr=l,i=Kc(i,"onChange"),0<i.length&&(a=new Ba("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var $t=null,Er=null;function hl(n){Nv(n,0)}function hc(n){var i=Li(n);if(tl(i))return n}function iy(n,i){if(n==="change")return i}var sy=!1;if(An){var Qf;if(An){var Yf="oninput"in document;if(!Yf){var ay=document.createElement("div");ay.setAttribute("oninput","return;"),Yf=typeof ay.oninput=="function"}Qf=Yf}else Qf=!1;sy=Qf&&(!document.documentMode||9<document.documentMode)}function oy(){$t&&($t.detachEvent("onpropertychange",ly),Er=$t=null)}function ly(n){if(n.propertyName==="value"&&hc(Er)){var i=[];Yr(i,Er,n,ja(n)),Wu(hl,i)}}function WS(n,i,a){n==="focusin"?(oy(),$t=i,Er=a,$t.attachEvent("onpropertychange",ly)):n==="focusout"&&oy()}function ZS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hc(Er)}function JS(n,i){if(n==="click")return hc(i)}function eA(n,i){if(n==="input"||n==="change")return hc(i)}function tA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Rn=typeof Object.is=="function"?Object.is:tA;function fl(n,i){if(Rn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Da.call(i,f)||!Rn(n[f],i[f]))return!1}return!0}function uy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cy(n,i){var a=uy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=uy(a)}}function hy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?hy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function fy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ua(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ua(n.document)}return i}function Xf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function nA(n,i){var a=fy(i);i=n.focusedElem;var l=n.selectionRange;if(a!==i&&i&&i.ownerDocument&&hy(i.ownerDocument.documentElement,i)){if(l!==null&&Xf(i)){if(n=l.start,a=l.end,a===void 0&&(a=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(a,i.value.length);else if(a=(n=i.ownerDocument||document)&&n.defaultView||window,a.getSelection){a=a.getSelection();var f=i.textContent.length,m=Math.min(l.start,f);l=l.end===void 0?m:Math.min(l.end,f),!a.extend&&m>l&&(f=l,l=m,m=f),f=cy(i,m);var v=cy(i,l);f&&v&&(a.rangeCount!==1||a.anchorNode!==f.node||a.anchorOffset!==f.offset||a.focusNode!==v.node||a.focusOffset!==v.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),a.removeAllRanges(),m>l?(a.addRange(n),a.extend(v.node,v.offset)):(n.setEnd(v.node,v.offset),a.addRange(n)))}}for(n=[],a=i;a=a.parentNode;)a.nodeType===1&&n.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)a=n[i],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var rA=An&&"documentMode"in document&&11>=document.documentMode,Qa=null,Wf=null,dl=null,Zf=!1;function dy(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Zf||Qa==null||Qa!==Ua(l)||(l=Qa,"selectionStart"in l&&Xf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),dl&&fl(dl,l)||(dl=l,l=Kc(Wf,"onSelect"),0<l.length&&(i=new Ba("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Qa)))}function $s(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ya={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionrun:$s("Transition","TransitionRun"),transitionstart:$s("Transition","TransitionStart"),transitioncancel:$s("Transition","TransitionCancel"),transitionend:$s("Transition","TransitionEnd")},Jf={},my={};An&&(my=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Ks(n){if(Jf[n])return Jf[n];if(!Ya[n])return n;var i=Ya[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in my)return Jf[n]=i[a];return n}var py=Ks("animationend"),gy=Ks("animationiteration"),yy=Ks("animationstart"),iA=Ks("transitionrun"),sA=Ks("transitionstart"),aA=Ks("transitioncancel"),_y=Ks("transitionend"),vy=new Map,Ey="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function rr(n,i){vy.set(n,i),Sn(i,[n])}var Bn=[],Xa=0,ed=0;function fc(){for(var n=Xa,i=ed=Xa=0;i<n;){var a=Bn[i];Bn[i++]=null;var l=Bn[i];Bn[i++]=null;var f=Bn[i];Bn[i++]=null;var m=Bn[i];if(Bn[i++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}m!==0&&Ty(a,f,m)}}function dc(n,i,a,l){Bn[Xa++]=n,Bn[Xa++]=i,Bn[Xa++]=a,Bn[Xa++]=l,ed|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function td(n,i,a,l){return dc(n,i,a,l),mc(n)}function Gi(n,i){return dc(n,null,null,i),mc(n)}function Ty(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=n.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;f&&i!==null&&n.tag===3&&(m=n.stateNode,f=31-ln(a),m=m.hiddenUpdates,n=m[f],n===null?m[f]=[i]:n.push(i),i.lane=a|536870912)}function mc(n){if(50<Ll)throw Ll=0,om=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Wa={},by=new WeakMap;function zn(n,i){if(typeof n=="object"&&n!==null){var a=by.get(n);return a!==void 0?a:(i={value:n,source:i,stack:de(i)},by.set(n,i),i)}return{value:n,source:i,stack:de(i)}}var Za=[],Ja=0,pc=null,gc=0,qn=[],Fn=0,Qs=null,Xr=1,Wr="";function Ys(n,i){Za[Ja++]=gc,Za[Ja++]=pc,pc=n,gc=i}function wy(n,i,a){qn[Fn++]=Xr,qn[Fn++]=Wr,qn[Fn++]=Qs,Qs=n;var l=Xr;n=Wr;var f=32-ln(l)-1;l&=~(1<<f),a+=1;var m=32-ln(i)+f;if(30<m){var v=f-f%5;m=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Xr=1<<32-ln(i)+f|a<<f|l,Wr=m+n}else Xr=1<<m|a<<f|l,Wr=n}function nd(n){n.return!==null&&(Ys(n,1),wy(n,1,0))}function rd(n){for(;n===pc;)pc=Za[--Ja],Za[Ja]=null,gc=Za[--Ja],Za[Ja]=null;for(;n===Qs;)Qs=qn[--Fn],qn[Fn]=null,Wr=qn[--Fn],qn[Fn]=null,Xr=qn[--Fn],qn[Fn]=null}var hn=null,Kt=null,$e=!1,ir=null,Tr=!1,id=Error(s(519));function Xs(n){var i=Error(s(418,""));throw gl(zn(i,n)),id}function Sy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Ut]=n,i[Nt]=l,a){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(a=0;a<Bl.length;a++)Le(Bl[a],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":Le("invalid",i),Us(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Vs(i);break;case"select":Le("invalid",i);break;case"textarea":Le("invalid",i),Fi(i,l.value,l.defaultValue,l.children),Vs(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||kv(i.textContent,a)?(l.popover!=null&&(Le("beforetoggle",i),Le("toggle",i)),l.onScroll!=null&&Le("scroll",i),l.onScrollEnd!=null&&Le("scrollend",i),l.onClick!=null&&(i.onclick=Qc),i=!0):i=!1,i||Xs(n)}function Ay(n){for(hn=n.return;hn;)switch(hn.tag){case 3:case 27:Tr=!0;return;case 5:case 13:Tr=!1;return;default:hn=hn.return}}function ml(n){if(n!==hn)return!1;if(!$e)return Ay(n),$e=!0,!1;var i=!1,a;if((a=n.tag!==3&&n.tag!==27)&&((a=n.tag===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Sm(n.type,n.memoizedProps)),a=!a),a&&(i=!0),i&&Kt&&Xs(n),Ay(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){Kt=ar(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}Kt=null}}else Kt=hn?ar(n.stateNode.nextSibling):null;return!0}function pl(){Kt=hn=null,$e=!1}function gl(n){ir===null?ir=[n]:ir.push(n)}var yl=Error(s(460)),Ry=Error(s(474)),sd={then:function(){}};function Iy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function yc(){}function Cy(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(yc,yc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n===yl?Error(s(483)):n;default:if(typeof i.status=="string")i.then(yc,yc);else{if(n=nt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n===yl?Error(s(483)):n}throw _l=i,yl}}var _l=null;function Ny(){if(_l===null)throw Error(s(459));var n=_l;return _l=null,n}var eo=null,vl=0;function _c(n){var i=vl;return vl+=1,eo===null&&(eo=[]),Cy(eo,n,i)}function El(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function vc(n,i){throw i.$$typeof===u?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function xy(n){var i=n._init;return i(n._payload)}function Dy(n){function i(F,L){if(n){var $=F.deletions;$===null?(F.deletions=[L],F.flags|=16):$.push(L)}}function a(F,L){if(!n)return null;for(;L!==null;)i(F,L),L=L.sibling;return null}function l(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function f(F,L){return F=rs(F,L),F.index=0,F.sibling=null,F}function m(F,L,$){return F.index=$,n?($=F.alternate,$!==null?($=$.index,$<L?(F.flags|=33554434,L):$):(F.flags|=33554434,L)):(F.flags|=1048576,L)}function v(F){return n&&F.alternate===null&&(F.flags|=33554434),F}function w(F,L,$,J){return L===null||L.tag!==6?(L=Jd($,F.mode,J),L.return=F,L):(L=f(L,$),L.return=F,L)}function k(F,L,$,J){var me=$.type;return me===p?W(F,L,$.props.children,J,$.key):L!==null&&(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===q&&xy(me)===L.type)?(L=f(L,$.props),El(L,$),L.return=F,L):(L=Uc($.type,$.key,$.props,null,F.mode,J),El(L,$),L.return=F,L)}function B(F,L,$,J){return L===null||L.tag!==4||L.stateNode.containerInfo!==$.containerInfo||L.stateNode.implementation!==$.implementation?(L=em($,F.mode,J),L.return=F,L):(L=f(L,$.children||[]),L.return=F,L)}function W(F,L,$,J,me){return L===null||L.tag!==7?(L=aa($,F.mode,J,me),L.return=F,L):(L=f(L,$),L.return=F,L)}function ne(F,L,$){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Jd(""+L,F.mode,$),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case h:return $=Uc(L.type,L.key,L.props,null,F.mode,$),El($,L),$.return=F,$;case d:return L=em(L,F.mode,$),L.return=F,L;case q:var J=L._init;return L=J(L._payload),ne(F,L,$)}if(ae(L)||Z(L))return L=aa(L,F.mode,$,null),L.return=F,L;if(typeof L.then=="function")return ne(F,_c(L),$);if(L.$$typeof===x)return ne(F,Pc(F,L),$);vc(F,L)}return null}function Q(F,L,$,J){var me=L!==null?L.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return me!==null?null:w(F,L,""+$,J);if(typeof $=="object"&&$!==null){switch($.$$typeof){case h:return $.key===me?k(F,L,$,J):null;case d:return $.key===me?B(F,L,$,J):null;case q:return me=$._init,$=me($._payload),Q(F,L,$,J)}if(ae($)||Z($))return me!==null?null:W(F,L,$,J,null);if(typeof $.then=="function")return Q(F,L,_c($),J);if($.$$typeof===x)return Q(F,L,Pc(F,$),J);vc(F,$)}return null}function X(F,L,$,J,me){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return F=F.get($)||null,w(L,F,""+J,me);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case h:return F=F.get(J.key===null?$:J.key)||null,k(L,F,J,me);case d:return F=F.get(J.key===null?$:J.key)||null,B(L,F,J,me);case q:var ke=J._init;return J=ke(J._payload),X(F,L,$,J,me)}if(ae(J)||Z(J))return F=F.get($)||null,W(L,F,J,me,null);if(typeof J.then=="function")return X(F,L,$,_c(J),me);if(J.$$typeof===x)return X(F,L,$,Pc(L,J),me);vc(L,J)}return null}function ye(F,L,$,J){for(var me=null,ke=null,ve=L,Se=L=0,qt=null;ve!==null&&Se<$.length;Se++){ve.index>Se?(qt=ve,ve=null):qt=ve.sibling;var Ke=Q(F,ve,$[Se],J);if(Ke===null){ve===null&&(ve=qt);break}n&&ve&&Ke.alternate===null&&i(F,ve),L=m(Ke,L,Se),ke===null?me=Ke:ke.sibling=Ke,ke=Ke,ve=qt}if(Se===$.length)return a(F,ve),$e&&Ys(F,Se),me;if(ve===null){for(;Se<$.length;Se++)ve=ne(F,$[Se],J),ve!==null&&(L=m(ve,L,Se),ke===null?me=ve:ke.sibling=ve,ke=ve);return $e&&Ys(F,Se),me}for(ve=l(ve);Se<$.length;Se++)qt=X(ve,F,Se,$[Se],J),qt!==null&&(n&&qt.alternate!==null&&ve.delete(qt.key===null?Se:qt.key),L=m(qt,L,Se),ke===null?me=qt:ke.sibling=qt,ke=qt);return n&&ve.forEach(function(cs){return i(F,cs)}),$e&&Ys(F,Se),me}function Ce(F,L,$,J){if($==null)throw Error(s(151));for(var me=null,ke=null,ve=L,Se=L=0,qt=null,Ke=$.next();ve!==null&&!Ke.done;Se++,Ke=$.next()){ve.index>Se?(qt=ve,ve=null):qt=ve.sibling;var cs=Q(F,ve,Ke.value,J);if(cs===null){ve===null&&(ve=qt);break}n&&ve&&cs.alternate===null&&i(F,ve),L=m(cs,L,Se),ke===null?me=cs:ke.sibling=cs,ke=cs,ve=qt}if(Ke.done)return a(F,ve),$e&&Ys(F,Se),me;if(ve===null){for(;!Ke.done;Se++,Ke=$.next())Ke=ne(F,Ke.value,J),Ke!==null&&(L=m(Ke,L,Se),ke===null?me=Ke:ke.sibling=Ke,ke=Ke);return $e&&Ys(F,Se),me}for(ve=l(ve);!Ke.done;Se++,Ke=$.next())Ke=X(ve,F,Se,Ke.value,J),Ke!==null&&(n&&Ke.alternate!==null&&ve.delete(Ke.key===null?Se:Ke.key),L=m(Ke,L,Se),ke===null?me=Ke:ke.sibling=Ke,ke=Ke);return n&&ve.forEach(function(ER){return i(F,ER)}),$e&&Ys(F,Se),me}function gt(F,L,$,J){if(typeof $=="object"&&$!==null&&$.type===p&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case h:e:{for(var me=$.key;L!==null;){if(L.key===me){if(me=$.type,me===p){if(L.tag===7){a(F,L.sibling),J=f(L,$.props.children),J.return=F,F=J;break e}}else if(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===q&&xy(me)===L.type){a(F,L.sibling),J=f(L,$.props),El(J,$),J.return=F,F=J;break e}a(F,L);break}else i(F,L);L=L.sibling}$.type===p?(J=aa($.props.children,F.mode,J,$.key),J.return=F,F=J):(J=Uc($.type,$.key,$.props,null,F.mode,J),El(J,$),J.return=F,F=J)}return v(F);case d:e:{for(me=$.key;L!==null;){if(L.key===me)if(L.tag===4&&L.stateNode.containerInfo===$.containerInfo&&L.stateNode.implementation===$.implementation){a(F,L.sibling),J=f(L,$.children||[]),J.return=F,F=J;break e}else{a(F,L);break}else i(F,L);L=L.sibling}J=em($,F.mode,J),J.return=F,F=J}return v(F);case q:return me=$._init,$=me($._payload),gt(F,L,$,J)}if(ae($))return ye(F,L,$,J);if(Z($)){if(me=Z($),typeof me!="function")throw Error(s(150));return $=me.call($),Ce(F,L,$,J)}if(typeof $.then=="function")return gt(F,L,_c($),J);if($.$$typeof===x)return gt(F,L,Pc(F,$),J);vc(F,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,L!==null&&L.tag===6?(a(F,L.sibling),J=f(L,$),J.return=F,F=J):(a(F,L),J=Jd($,F.mode,J),J.return=F,F=J),v(F)):a(F,L)}return function(F,L,$,J){try{vl=0;var me=gt(F,L,$,J);return eo=null,me}catch(ve){if(ve===yl)throw ve;var ke=Kn(29,ve,null,F.mode);return ke.lanes=J,ke.return=F,ke}finally{}}}var Ws=Dy(!0),Oy=Dy(!1),to=xe(null),Ec=xe(0);function ky(n,i){n=li,He(Ec,n),He(to,i),li=n|i.baseLanes}function ad(){He(Ec,li),He(to,to.current)}function od(){li=Ec.current,ot(to),ot(Ec)}var Hn=xe(null),br=null;function $i(n){var i=n.alternate;He(Ot,Ot.current&1),He(Hn,n),br===null&&(i===null||to.current!==null||i.memoizedState!==null)&&(br=n)}function Py(n){if(n.tag===22){if(He(Ot,Ot.current),He(Hn,n),br===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(br=n)}}else Ki()}function Ki(){He(Ot,Ot.current),He(Hn,Hn.current)}function Zr(n){ot(Hn),br===n&&(br=null),ot(Ot)}var Ot=xe(0);function Tc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var oA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},lA=r.unstable_scheduleCallback,uA=r.unstable_NormalPriority,kt={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ld(){return{controller:new oA,data:new Map,refCount:0}}function Tl(n){n.refCount--,n.refCount===0&&lA(uA,function(){n.controller.abort()})}var bl=null,ud=0,no=0,ro=null;function cA(n,i){if(bl===null){var a=bl=[];ud=0,no=pm(),ro={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ud++,i.then(My,My),i}function My(){if(--ud===0&&bl!==null){ro!==null&&(ro.status="fulfilled");var n=bl;bl=null,no=0,ro=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function hA(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Vy=b.S;b.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&cA(n,i),Vy!==null&&Vy(n,i)};var Zs=xe(null);function cd(){var n=Zs.current;return n!==null?n:nt.pooledCache}function bc(n,i){i===null?He(Zs,Zs.current):He(Zs,i.pool)}function Uy(){var n=cd();return n===null?null:{parent:kt._currentValue,pool:n}}var Qi=0,Oe=null,Je=null,wt=null,wc=!1,io=!1,Js=!1,Sc=0,wl=0,so=null,fA=0;function Et(){throw Error(s(321))}function hd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Rn(n[a],i[a]))return!1;return!0}function fd(n,i,a,l,f,m){return Qi=m,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,b.H=n===null||n.memoizedState===null?ea:Yi,Js=!1,m=a(l,f),Js=!1,io&&(m=jy(i,a,l,f)),Ly(n),m}function Ly(n){b.H=wr;var i=Je!==null&&Je.next!==null;if(Qi=0,wt=Je=Oe=null,wc=!1,wl=0,so=null,i)throw Error(s(300));n===null||Bt||(n=n.dependencies,n!==null&&kc(n)&&(Bt=!0))}function jy(n,i,a,l){Oe=n;var f=0;do{if(io&&(so=null),wl=0,io=!1,25<=f)throw Error(s(301));if(f+=1,wt=Je=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}b.H=ta,m=i(a,l)}while(io);return m}function dA(){var n=b.H,i=n.useState()[0];return i=typeof i.then=="function"?Sl(i):i,n=n.useState()[0],(Je!==null?Je.memoizedState:null)!==n&&(Oe.flags|=1024),i}function dd(){var n=Sc!==0;return Sc=0,n}function md(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function pd(n){if(wc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}wc=!1}Qi=0,wt=Je=Oe=null,io=!1,wl=Sc=0,so=null}function _n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Oe.memoizedState=wt=n:wt=wt.next=n,wt}function St(){if(Je===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=Je.next;var i=wt===null?Oe.memoizedState:wt.next;if(i!==null)wt=i,Je=n;else{if(n===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));Je=n,n={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},wt===null?Oe.memoizedState=wt=n:wt=wt.next=n}return wt}var Ac;Ac=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Sl(n){var i=wl;return wl+=1,so===null&&(so=[]),n=Cy(so,n,i),i=Oe,(wt===null?i.memoizedState:wt.next)===null&&(i=i.alternate,b.H=i===null||i.memoizedState===null?ea:Yi),n}function Rc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Sl(n);if(n.$$typeof===x)return en(n)}throw Error(s(438,String(n)))}function gd(n){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ac(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=re;return i.index++,a}function Jr(n,i){return typeof i=="function"?i(n):i}function Ic(n){var i=St();return yd(i,Je,n)}function yd(n,i,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,m=l.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}i.baseQueue=f=m,l.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{i=f.next;var w=v=null,k=null,B=i,W=!1;do{var ne=B.lane&-536870913;if(ne!==B.lane?(qe&ne)===ne:(Qi&ne)===ne){var Q=B.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ne===no&&(W=!0);else if((Qi&Q)===Q){B=B.next,Q===no&&(W=!0);continue}else ne={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},k===null?(w=k=ne,v=m):k=k.next=ne,Oe.lanes|=Q,is|=Q;ne=B.action,Js&&a(m,ne),m=B.hasEagerState?B.eagerState:a(m,ne)}else Q={lane:ne,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},k===null?(w=k=Q,v=m):k=k.next=Q,Oe.lanes|=ne,is|=ne;B=B.next}while(B!==null&&B!==i);if(k===null?v=m:k.next=w,!Rn(m,n.memoizedState)&&(Bt=!0,W&&(a=ro,a!==null)))throw a;n.memoizedState=m,n.baseState=v,n.baseQueue=k,l.lastRenderedState=m}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function _d(n){var i=St(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);Rn(m,i.memoizedState)||(Bt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,l]}function By(n,i,a){var l=Oe,f=St(),m=$e;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!Rn((Je||f).memoizedState,a);if(v&&(f.memoizedState=a,Bt=!0),f=f.queue,Td(Fy.bind(null,l,f,n),[n]),f.getSnapshot!==i||v||wt!==null&&wt.memoizedState.tag&1){if(l.flags|=2048,ao(9,qy.bind(null,l,f,a,i),{destroy:void 0},null),nt===null)throw Error(s(349));m||(Qi&60)!==0||zy(l,i,a)}return a}function zy(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=Ac(),Oe.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function qy(n,i,a,l){i.value=a,i.getSnapshot=l,Hy(i)&&Gy(n)}function Fy(n,i,a){return a(function(){Hy(i)&&Gy(n)})}function Hy(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Rn(n,a)}catch{return!0}}function Gy(n){var i=Gi(n,2);i!==null&&fn(i,n,2)}function vd(n){var i=_n();if(typeof n=="function"){var a=n;if(n=a(),Js){cr(!0);try{a()}finally{cr(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:n},i}function $y(n,i,a,l){return n.baseState=a,yd(n,Je,typeof l=="function"?l:Jr)}function mA(n,i,a,l,f){if(xc(n))throw Error(s(485));if(n=i.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};b.T!==null?a(!0):m.isTransition=!1,l(m),a=i.pending,a===null?(m.next=i.pending=m,Ky(i,m)):(m.next=a.next,i.pending=a.next=m)}}function Ky(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var m=b.T,v={};b.T=v;try{var w=a(f,l),k=b.S;k!==null&&k(v,w),Qy(n,i,w)}catch(B){Ed(n,i,B)}finally{b.T=m}}else try{m=a(f,l),Qy(n,i,m)}catch(B){Ed(n,i,B)}}function Qy(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Yy(n,i,l)},function(l){return Ed(n,i,l)}):Yy(n,i,a)}function Yy(n,i,a){i.status="fulfilled",i.value=a,Xy(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,Ky(n,a)))}function Ed(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Xy(i),i=i.next;while(i!==l)}n.action=null}function Xy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Wy(n,i){return i}function Zy(n,i){if($e){var a=nt.formState;if(a!==null){e:{var l=Oe;if($e){if(Kt){t:{for(var f=Kt,m=Tr;f.nodeType!==8;){if(!m){f=null;break t}if(f=ar(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Kt=ar(f.nextSibling),l=f.data==="F!";break e}}Xs(l)}l=!1}l&&(i=a[0])}}return a=_n(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wy,lastRenderedState:i},a.queue=l,a=g_.bind(null,Oe,l),l.dispatch=a,l=vd(!1),m=Rd.bind(null,Oe,!1,l.queue),l=_n(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=mA.bind(null,Oe,f,m,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function Jy(n){var i=St();return e_(i,Je,n)}function e_(n,i,a){i=yd(n,i,Wy)[0],n=Ic(Jr)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?Sl(i):i;var l=St(),f=l.queue,m=f.dispatch;return a!==l.memoizedState&&(Oe.flags|=2048,ao(9,pA.bind(null,f,a),{destroy:void 0},null)),[i,m,n]}function pA(n,i){n.action=i}function t_(n){var i=St(),a=Je;if(a!==null)return e_(i,a,n);St(),i=i.memoizedState,a=St();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function ao(n,i,a,l){return n={tag:n,create:i,inst:a,deps:l,next:null},i=Oe.updateQueue,i===null&&(i=Ac(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function n_(){return St().memoizedState}function Cc(n,i,a,l){var f=_n();Oe.flags|=n,f.memoizedState=ao(1|i,a,{destroy:void 0},l===void 0?null:l)}function Nc(n,i,a,l){var f=St();l=l===void 0?null:l;var m=f.memoizedState.inst;Je!==null&&l!==null&&hd(l,Je.memoizedState.deps)?f.memoizedState=ao(i,a,m,l):(Oe.flags|=n,f.memoizedState=ao(1|i,a,m,l))}function r_(n,i){Cc(8390656,8,n,i)}function Td(n,i){Nc(2048,8,n,i)}function i_(n,i){return Nc(4,2,n,i)}function s_(n,i){return Nc(4,4,n,i)}function a_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function o_(n,i,a){a=a!=null?a.concat([n]):null,Nc(4,4,a_.bind(null,i,n),a)}function bd(){}function l_(n,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&hd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function u_(n,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&hd(i,l[1]))return l[0];if(l=n(),Js){cr(!0);try{n()}finally{cr(!1)}}return a.memoizedState=[l,i],l}function wd(n,i,a){return a===void 0||(Qi&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=hv(),Oe.lanes|=n,is|=n,a)}function c_(n,i,a,l){return Rn(a,i)?a:to.current!==null?(n=wd(n,a,l),Rn(n,i)||(Bt=!0),n):(Qi&42)===0?(Bt=!0,n.memoizedState=a):(n=hv(),Oe.lanes|=n,is|=n,i)}function h_(n,i,a,l,f){var m=ue.p;ue.p=m!==0&&8>m?m:8;var v=b.T,w={};b.T=w,Rd(n,!1,i,a);try{var k=f(),B=b.S;if(B!==null&&B(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=hA(k,l);Al(n,i,W,xn(n))}else Al(n,i,l,xn(n))}catch(ne){Al(n,i,{then:function(){},status:"rejected",reason:ne},xn())}finally{ue.p=m,b.T=v}}function gA(){}function Sd(n,i,a,l){if(n.tag!==5)throw Error(s(476));var f=f_(n).queue;h_(n,f,i,we,a===null?gA:function(){return d_(n),a(l)})}function f_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:we},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function d_(n){var i=f_(n).next.queue;Al(n,i,{},xn())}function Ad(){return en(Gl)}function m_(){return St().memoizedState}function p_(){return St().memoizedState}function yA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();n=Zi(a);var l=Ji(i,n,a);l!==null&&(fn(l,i,a),Cl(l,i,a)),i={cache:ld()},n.payload=i;return}i=i.return}}function _A(n,i,a){var l=xn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xc(n)?y_(i,a):(a=td(n,i,a,l),a!==null&&(fn(a,n,l),__(a,i,l)))}function g_(n,i,a){var l=xn();Al(n,i,a,l)}function Al(n,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xc(n))y_(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,w=m(v,a);if(f.hasEagerState=!0,f.eagerState=w,Rn(w,v))return dc(n,i,f,0),nt===null&&fc(),!1}catch{}finally{}if(a=td(n,i,f,l),a!==null)return fn(a,n,l),__(a,i,l),!0}return!1}function Rd(n,i,a,l){if(l={lane:2,revertLane:pm(),action:l,hasEagerState:!1,eagerState:null,next:null},xc(n)){if(i)throw Error(s(479))}else i=td(n,a,l,2),i!==null&&fn(i,n,2)}function xc(n){var i=n.alternate;return n===Oe||i!==null&&i===Oe}function y_(n,i){io=wc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function __(n,i,a){if((a&4194176)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Mi(n,a)}}var wr={readContext:en,use:Rc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et};wr.useCacheRefresh=Et,wr.useMemoCache=Et,wr.useHostTransitionStatus=Et,wr.useFormState=Et,wr.useActionState=Et,wr.useOptimistic=Et;var ea={readContext:en,use:Rc,useCallback:function(n,i){return _n().memoizedState=[n,i===void 0?null:i],n},useContext:en,useEffect:r_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Cc(4194308,4,a_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Cc(4194308,4,n,i)},useInsertionEffect:function(n,i){Cc(4,2,n,i)},useMemo:function(n,i){var a=_n();i=i===void 0?null:i;var l=n();if(Js){cr(!0);try{n()}finally{cr(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=_n();if(a!==void 0){var f=a(i);if(Js){cr(!0);try{a(i)}finally{cr(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=_A.bind(null,Oe,n),[l.memoizedState,n]},useRef:function(n){var i=_n();return n={current:n},i.memoizedState=n},useState:function(n){n=vd(n);var i=n.queue,a=g_.bind(null,Oe,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:bd,useDeferredValue:function(n,i){var a=_n();return wd(a,n,i)},useTransition:function(){var n=vd(!1);return n=h_.bind(null,Oe,n.queue,!0,!1),_n().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Oe,f=_n();if($e){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),nt===null)throw Error(s(349));(qe&60)!==0||zy(l,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,r_(Fy.bind(null,l,m,n),[n]),l.flags|=2048,ao(9,qy.bind(null,l,m,a,i),{destroy:void 0},null),a},useId:function(){var n=_n(),i=nt.identifierPrefix;if($e){var a=Wr,l=Xr;a=(l&~(1<<32-ln(l)-1)).toString(32)+a,i=":"+i+"R"+a,a=Sc++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=fA++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},useCacheRefresh:function(){return _n().memoizedState=yA.bind(null,Oe)}};ea.useMemoCache=gd,ea.useHostTransitionStatus=Ad,ea.useFormState=Zy,ea.useActionState=Zy,ea.useOptimistic=function(n){var i=_n();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Rd.bind(null,Oe,!0,a),a.dispatch=i,[n,i]};var Yi={readContext:en,use:Rc,useCallback:l_,useContext:en,useEffect:Td,useImperativeHandle:o_,useInsertionEffect:i_,useLayoutEffect:s_,useMemo:u_,useReducer:Ic,useRef:n_,useState:function(){return Ic(Jr)},useDebugValue:bd,useDeferredValue:function(n,i){var a=St();return c_(a,Je.memoizedState,n,i)},useTransition:function(){var n=Ic(Jr)[0],i=St().memoizedState;return[typeof n=="boolean"?n:Sl(n),i]},useSyncExternalStore:By,useId:m_};Yi.useCacheRefresh=p_,Yi.useMemoCache=gd,Yi.useHostTransitionStatus=Ad,Yi.useFormState=Jy,Yi.useActionState=Jy,Yi.useOptimistic=function(n,i){var a=St();return $y(a,Je,n,i)};var ta={readContext:en,use:Rc,useCallback:l_,useContext:en,useEffect:Td,useImperativeHandle:o_,useInsertionEffect:i_,useLayoutEffect:s_,useMemo:u_,useReducer:_d,useRef:n_,useState:function(){return _d(Jr)},useDebugValue:bd,useDeferredValue:function(n,i){var a=St();return Je===null?wd(a,n,i):c_(a,Je.memoizedState,n,i)},useTransition:function(){var n=_d(Jr)[0],i=St().memoizedState;return[typeof n=="boolean"?n:Sl(n),i]},useSyncExternalStore:By,useId:m_};ta.useCacheRefresh=p_,ta.useMemoCache=gd,ta.useHostTransitionStatus=Ad,ta.useFormState=t_,ta.useActionState=t_,ta.useOptimistic=function(n,i){var a=St();return Je!==null?$y(a,Je,n,i):(a.baseState=n,[n,a.queue.dispatch])};function Id(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:I({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Cd={isMounted:function(n){return(n=n._reactInternals)?pe(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var l=xn(),f=Zi(l);f.payload=i,a!=null&&(f.callback=a),i=Ji(n,f,l),i!==null&&(fn(i,n,l),Cl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=xn(),f=Zi(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ji(n,f,l),i!==null&&(fn(i,n,l),Cl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=xn(),l=Zi(a);l.tag=2,i!=null&&(l.callback=i),i=Ji(n,l,a),i!==null&&(fn(i,n,a),Cl(i,n,a))}};function v_(n,i,a,l,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,m,v):i.prototype&&i.prototype.isPureReactComponent?!fl(a,l)||!fl(f,m):!0}function E_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&Cd.enqueueReplaceState(i,i.state,null)}function na(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=I({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var Dc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function T_(n){Dc(n)}function b_(n){console.error(n)}function w_(n){Dc(n)}function Oc(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function S_(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Nd(n,i,a){return a=Zi(a),a.tag=3,a.payload={element:null},a.callback=function(){Oc(n,i)},a}function A_(n){return n=Zi(n),n.tag=3,n}function R_(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;n.payload=function(){return f(m)},n.callback=function(){S_(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){S_(i,a,l),typeof f!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function vA(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Il(i,a,f,!0),a=Hn.current,a!==null){switch(a.tag){case 13:return br===null?cm():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===sd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),fm(n,l,f)),!1;case 22:return a.flags|=65536,l===sd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),fm(n,l,f)),!1}throw Error(s(435,a.tag))}return fm(n,l,f),cm(),!1}if($e)return i=Hn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==id&&(n=Error(s(422),{cause:l}),gl(zn(n,a)))):(l!==id&&(i=Error(s(423),{cause:l}),gl(zn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=zn(l,a),f=Nd(n.stateNode,l,f),Hd(n,f),pt!==4&&(pt=2)),!1;var m=Error(s(520),{cause:l});if(m=zn(m,a),Vl===null?Vl=[m]:Vl.push(m),pt!==4&&(pt=2),i===null)return!0;l=zn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Nd(a.stateNode,l,n),Hd(a,n),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ss===null||!ss.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=A_(f),R_(f,n,a,l),Hd(a,f),!1}a=a.return}while(a!==null);return!1}var I_=Error(s(461)),Bt=!1;function Qt(n,i,a,l){i.child=n===null?Oy(i,null,a,l):Ws(i,n.child,a,l)}function C_(n,i,a,l,f){a=a.render;var m=i.ref;if("ref"in l){var v={};for(var w in l)w!=="ref"&&(v[w]=l[w])}else v=l;return ia(i),l=fd(n,i,a,v,m,f),w=dd(),n!==null&&!Bt?(md(n,i,f),ei(n,i,f)):($e&&w&&nd(i),i.flags|=1,Qt(n,i,l,f),i.child)}function N_(n,i,a,l,f){if(n===null){var m=a.type;return typeof m=="function"&&!Zd(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,x_(n,i,m,l,f)):(n=Uc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Ld(n,f)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(v,l)&&n.ref===i.ref)return ei(n,i,f)}return i.flags|=1,n=rs(m,l),n.ref=i.ref,n.return=i,i.child=n}function x_(n,i,a,l,f){if(n!==null){var m=n.memoizedProps;if(fl(m,l)&&n.ref===i.ref)if(Bt=!1,i.pendingProps=l=m,Ld(n,f))(n.flags&131072)!==0&&(Bt=!0);else return i.lanes=n.lanes,ei(n,i,f)}return xd(n,i,a,l,f)}function D_(n,i,a){var l=i.pendingProps,f=l.children,m=(i.stateNode._pendingVisibility&2)!==0,v=n!==null?n.memoizedState:null;if(Rl(n,i),l.mode==="hidden"||m){if((i.flags&128)!==0){if(l=v!==null?v.baseLanes|a:a,n!==null){for(f=i.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~l}else i.childLanes=0,i.child=null;return O_(n,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&bc(i,v!==null?v.cachePool:null),v!==null?ky(i,v):ad(),Py(i);else return i.lanes=i.childLanes=536870912,O_(n,i,v!==null?v.baseLanes|a:a,a)}else v!==null?(bc(i,v.cachePool),ky(i,v),Ki(),i.memoizedState=null):(n!==null&&bc(i,null),ad(),Ki());return Qt(n,i,f,a),i.child}function O_(n,i,a,l){var f=cd();return f=f===null?null:{parent:kt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&bc(i,null),ad(),Py(i),n!==null&&Il(n,i,l,!0),null}function Rl(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(i.flags|=2097664)}}function xd(n,i,a,l,f){return ia(i),a=fd(n,i,a,l,void 0,f),l=dd(),n!==null&&!Bt?(md(n,i,f),ei(n,i,f)):($e&&l&&nd(i),i.flags|=1,Qt(n,i,a,f),i.child)}function k_(n,i,a,l,f,m){return ia(i),i.updateQueue=null,a=jy(i,l,a,f),Ly(n),l=dd(),n!==null&&!Bt?(md(n,i,m),ei(n,i,m)):($e&&l&&nd(i),i.flags|=1,Qt(n,i,a,m),i.child)}function P_(n,i,a,l,f){if(ia(i),i.stateNode===null){var m=Wa,v=a.contextType;typeof v=="object"&&v!==null&&(m=en(v)),m=new a(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Cd,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},qd(i),v=a.contextType,m.context=typeof v=="object"&&v!==null?en(v):Wa,m.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Id(i,a,v,l),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Cd.enqueueReplaceState(m,m.state,null),xl(i,l,m,f),Nl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){m=i.stateNode;var w=i.memoizedProps,k=na(a,w);m.props=k;var B=m.context,W=a.contextType;v=Wa,typeof W=="object"&&W!==null&&(v=en(W));var ne=a.getDerivedStateFromProps;W=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||B!==v)&&E_(i,m,l,v),Wi=!1;var Q=i.memoizedState;m.state=Q,xl(i,l,m,f),Nl(),B=i.memoizedState,w||Q!==B||Wi?(typeof ne=="function"&&(Id(i,a,ne,l),B=i.memoizedState),(k=Wi||v_(i,a,k,l,Q,B,v))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),m.props=l,m.state=B,m.context=v,l=k):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,Fd(n,i),v=i.memoizedProps,W=na(a,v),m.props=W,ne=i.pendingProps,Q=m.context,B=a.contextType,k=Wa,typeof B=="object"&&B!==null&&(k=en(B)),w=a.getDerivedStateFromProps,(B=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ne||Q!==k)&&E_(i,m,l,k),Wi=!1,Q=i.memoizedState,m.state=Q,xl(i,l,m,f),Nl();var X=i.memoizedState;v!==ne||Q!==X||Wi||n!==null&&n.dependencies!==null&&kc(n.dependencies)?(typeof w=="function"&&(Id(i,a,w,l),X=i.memoizedState),(W=Wi||v_(i,a,W,l,Q,X,k)||n!==null&&n.dependencies!==null&&kc(n.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,X,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,X,k)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=X),m.props=l,m.state=X,m.context=k,l=W):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),l=!1)}return m=l,Rl(n,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&l?(i.child=Ws(i,n.child,null,f),i.child=Ws(i,null,a,f)):Qt(n,i,a,f),i.memoizedState=m.state,n=i.child):n=ei(n,i,f),n}function M_(n,i,a,l){return pl(),i.flags|=256,Qt(n,i,a,l),i.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Od(n){return{baseLanes:n,cachePool:Uy()}}function kd(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Qn),n}function V_(n,i,a){var l=i.pendingProps,f=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(Ot.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if($e){if(f?$i(i):Ki(),$e){var w=Kt,k;if(k=w){e:{for(k=w,w=Tr;k.nodeType!==8;){if(!w){w=null;break e}if(k=ar(k.nextSibling),k===null){w=null;break e}}w=k}w!==null?(i.memoizedState={dehydrated:w,treeContext:Qs!==null?{id:Xr,overflow:Wr}:null,retryLane:536870912},k=Kn(18,null,null,0),k.stateNode=w,k.return=i,i.child=k,hn=i,Kt=null,k=!0):k=!1}k||Xs(i)}if(w=i.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return w.data==="$!"?i.lanes=16:i.lanes=536870912,null;Zr(i)}return w=l.children,l=l.fallback,f?(Ki(),f=i.mode,w=Md({mode:"hidden",children:w},f),l=aa(l,f,a,null),w.return=i,l.return=i,w.sibling=l,i.child=w,f=i.child,f.memoizedState=Od(a),f.childLanes=kd(n,v,a),i.memoizedState=Dd,l):($i(i),Pd(i,w))}if(k=n.memoizedState,k!==null&&(w=k.dehydrated,w!==null)){if(m)i.flags&256?($i(i),i.flags&=-257,i=Vd(n,i,a)):i.memoizedState!==null?(Ki(),i.child=n.child,i.flags|=128,i=null):(Ki(),f=l.fallback,w=i.mode,l=Md({mode:"visible",children:l.children},w),f=aa(f,w,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,Ws(i,n.child,null,a),l=i.child,l.memoizedState=Od(a),l.childLanes=kd(n,v,a),i.memoizedState=Dd,i=f);else if($i(i),w.data==="$!"){if(v=w.nextSibling&&w.nextSibling.dataset,v)var B=v.dgst;v=B,l=Error(s(419)),l.stack="",l.digest=v,gl({value:l,source:null,stack:null}),i=Vd(n,i,a)}else if(Bt||Il(n,i,a,!1),v=(a&n.childLanes)!==0,Bt||v){if(v=nt,v!==null){if(l=a&-a,(l&42)!==0)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==k.retryLane)throw k.retryLane=l,Gi(n,l),fn(v,n,l),I_}w.data==="$?"||cm(),i=Vd(n,i,a)}else w.data==="$?"?(i.flags|=128,i.child=n.child,i=PA.bind(null,n),w._reactRetry=i,i=null):(n=k.treeContext,Kt=ar(w.nextSibling),hn=i,$e=!0,ir=null,Tr=!1,n!==null&&(qn[Fn++]=Xr,qn[Fn++]=Wr,qn[Fn++]=Qs,Xr=n.id,Wr=n.overflow,Qs=i),i=Pd(i,l.children),i.flags|=4096);return i}return f?(Ki(),f=l.fallback,w=i.mode,k=n.child,B=k.sibling,l=rs(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&31457280,B!==null?f=rs(B,f):(f=aa(f,w,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,w=n.child.memoizedState,w===null?w=Od(a):(k=w.cachePool,k!==null?(B=kt._currentValue,k=k.parent!==B?{parent:B,pool:B}:k):k=Uy(),w={baseLanes:w.baseLanes|a,cachePool:k}),f.memoizedState=w,f.childLanes=kd(n,v,a),i.memoizedState=Dd,l):($i(i),a=n.child,n=a.sibling,a=rs(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=a,i.memoizedState=null,a)}function Pd(n,i){return i=Md({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Md(n,i){return lv(n,i,0,null)}function Vd(n,i,a){return Ws(i,n.child,null,a),n=Pd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function U_(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Bd(n.return,i,a)}function Ud(n,i,a,l,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=f)}function L_(n,i,a){var l=i.pendingProps,f=l.revealOrder,m=l.tail;if(Qt(n,i,l.children,a),l=Ot.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&U_(n,a,i);else if(n.tag===19)U_(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(He(Ot,l),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Tc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Ud(i,!1,f,a,m);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Tc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Ud(i,!0,a,null,m);break;case"together":Ud(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ei(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),is|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Il(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,a=rs(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=rs(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Ld(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&kc(n)))}function EA(n,i,a){switch(i.tag){case 3:Ni(i,i.stateNode.containerInfo),Xi(i,kt,n.memoizedState.cache),pl();break;case 27:case 5:Go(i);break;case 4:Ni(i,i.stateNode.containerInfo);break;case 10:Xi(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?($i(i),i.flags|=128,null):(a&i.child.childLanes)!==0?V_(n,i,a):($i(i),n=ei(n,i,a),n!==null?n.sibling:null);$i(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Il(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return L_(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),He(Ot,Ot.current),l)break;return null;case 22:case 23:return i.lanes=0,D_(n,i,a);case 24:Xi(i,kt,n.memoizedState.cache)}return ei(n,i,a)}function j_(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Bt=!0;else{if(!Ld(n,a)&&(i.flags&128)===0)return Bt=!1,EA(n,i,a);Bt=(n.flags&131072)!==0}else Bt=!1,$e&&(i.flags&1048576)!==0&&wy(i,gc,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")Zd(l)?(n=na(l,n),i.tag=1,i=P_(null,i,l,n,a)):(i.tag=0,i=xd(null,i,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===M){i.tag=11,i=C_(null,i,l,n,a);break e}else if(f===z){i.tag=14,i=N_(null,i,l,n,a);break e}}throw i=C(l)||l,Error(s(306,i,""))}}return i;case 0:return xd(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=na(l,i.pendingProps),P_(n,i,l,f,a);case 3:e:{if(Ni(i,i.stateNode.containerInfo),n===null)throw Error(s(387));var m=i.pendingProps;f=i.memoizedState,l=f.element,Fd(n,i),xl(i,m,null,a);var v=i.memoizedState;if(m=v.cache,Xi(i,kt,m),m!==f.cache&&zd(i,[kt],a,!0),Nl(),m=v.element,f.isDehydrated)if(f={element:m,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=M_(n,i,m,a);break e}else if(m!==l){l=zn(Error(s(424)),i),gl(l),i=M_(n,i,m,a);break e}else for(Kt=ar(i.stateNode.containerInfo.firstChild),hn=i,$e=!0,ir=null,Tr=!0,a=Oy(i,null,m,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(pl(),m===l){i=ei(n,i,a);break e}Qt(n,i,m,a)}i=i.child}return i;case 26:return Rl(n,i),n===null?(a=qv(i.type,null,i.pendingProps,null))?i.memoizedState=a:$e||(a=i.type,n=i.pendingProps,l=Yc(kn.current).createElement(a),l[Ut]=i,l[Nt]=n,Yt(l,a,n),lt(l),i.stateNode=l):i.memoizedState=qv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Go(i),n===null&&$e&&(l=i.stateNode=jv(i.type,i.pendingProps,kn.current),hn=i,Tr=!0,Kt=ar(l.firstChild)),l=i.pendingProps.children,n!==null||$e?Qt(n,i,l,a):i.child=Ws(i,null,l,a),Rl(n,i),i.child;case 5:return n===null&&$e&&((f=l=Kt)&&(l=XA(l,i.type,i.pendingProps,Tr),l!==null?(i.stateNode=l,hn=i,Kt=ar(l.firstChild),Tr=!1,f=!0):f=!1),f||Xs(i)),Go(i),f=i.type,m=i.pendingProps,v=n!==null?n.memoizedProps:null,l=m.children,Sm(f,m)?l=null:v!==null&&Sm(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=fd(n,i,dA,null,null,a),Gl._currentValue=f),Rl(n,i),Qt(n,i,l,a),i.child;case 6:return n===null&&$e&&((n=a=Kt)&&(a=WA(a,i.pendingProps,Tr),a!==null?(i.stateNode=a,hn=i,Kt=null,n=!0):n=!1),n||Xs(i)),null;case 13:return V_(n,i,a);case 4:return Ni(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Ws(i,null,l,a):Qt(n,i,l,a),i.child;case 11:return C_(n,i,i.type,i.pendingProps,a);case 7:return Qt(n,i,i.pendingProps,a),i.child;case 8:return Qt(n,i,i.pendingProps.children,a),i.child;case 12:return Qt(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Xi(i,i.type,l.value),Qt(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,ia(i),f=en(f),l=l(f),i.flags|=1,Qt(n,i,l,a),i.child;case 14:return N_(n,i,i.type,i.pendingProps,a);case 15:return x_(n,i,i.type,i.pendingProps,a);case 19:return L_(n,i,a);case 22:return D_(n,i,a);case 24:return ia(i),l=en(kt),n===null?(f=cd(),f===null&&(f=nt,m=ld(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:l,cache:f},qd(i),Xi(i,kt,f)):((n.lanes&a)!==0&&(Fd(n,i),xl(i,null,null,a),Nl()),f=n.memoizedState,m=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Xi(i,kt,l)):(l=m.cache,Xi(i,kt,l),l!==f.cache&&zd(i,[kt],a,!0))),Qt(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}var jd=xe(null),ra=null,ti=null;function Xi(n,i,a){He(jd,i._currentValue),i._currentValue=a}function ni(n){n._currentValue=jd.current,ot(jd)}function Bd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function zd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=f;for(var k=0;k<i.length;k++)if(w.context===i[k]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Bd(m.return,a,n),l||(v=null);break e}m=w.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Bd(v,a,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Il(n,i,a,l){n=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var w=f.type;Rn(f.pendingProps.value,v.value)||(n!==null?n.push(w):n=[w])}}else if(f===Ci.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Gl):n=[Gl])}f=f.return}n!==null&&zd(i,n,a,l),i.flags|=262144}function kc(n){for(n=n.firstContext;n!==null;){if(!Rn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ia(n){ra=n,ti=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function en(n){return B_(ra,n)}function Pc(n,i){return ra===null&&ia(n),B_(n,i)}function B_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ti===null){if(n===null)throw Error(s(308));ti=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ti=ti.next=i;return a}var Wi=!1;function qd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Zi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ji(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(ct&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=mc(n),Ty(n,null,a),i}return dc(n,l,i,a),mc(n)}function Cl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194176)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Mi(n,a)}}function Hd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Gd=!1;function Nl(){if(Gd){var n=ro;if(n!==null)throw n}}function xl(n,i,a,l){Gd=!1;var f=n.updateQueue;Wi=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var k=w,B=k.next;k.next=null,v===null?m=B:v.next=B,v=k;var W=n.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==v&&(w===null?W.firstBaseUpdate=B:w.next=B,W.lastBaseUpdate=k))}if(m!==null){var ne=f.baseState;v=0,W=B=k=null,w=m;do{var Q=w.lane&-536870913,X=Q!==w.lane;if(X?(qe&Q)===Q:(l&Q)===Q){Q!==0&&Q===no&&(Gd=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ye=n,Ce=w;Q=i;var gt=a;switch(Ce.tag){case 1:if(ye=Ce.payload,typeof ye=="function"){ne=ye.call(gt,ne,Q);break e}ne=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Ce.payload,Q=typeof ye=="function"?ye.call(gt,ne,Q):ye,Q==null)break e;ne=I({},ne,Q);break e;case 2:Wi=!0}}Q=w.callback,Q!==null&&(n.flags|=64,X&&(n.flags|=8192),X=f.callbacks,X===null?f.callbacks=[Q]:X.push(Q))}else X={lane:Q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(B=W=X,k=ne):W=W.next=X,v|=Q;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;X=w,w=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);W===null&&(k=ne),f.baseState=k,f.firstBaseUpdate=B,f.lastBaseUpdate=W,m===null&&(f.shared.lanes=0),is|=v,n.lanes=v,n.memoizedState=ne}}function z_(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function q_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)z_(a[n],i)}function Dl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==f)}}catch(w){tt(i,i.return,w)}}function es(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&n)===n){var v=l.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,f=i;var k=a;try{w()}catch(B){tt(f,k,B)}}}l=l.next}while(l!==m)}}catch(B){tt(i,i.return,B)}}function F_(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{q_(i,a)}catch(l){tt(n,n.return,l)}}}function H_(n,i,a){a.props=na(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){tt(n,i,l)}}function sa(n,i){try{var a=n.ref;if(a!==null){var l=n.stateNode;switch(n.tag){case 26:case 27:case 5:var f=l;break;default:f=l}typeof a=="function"?n.refCleanup=a(f):a.current=f}}catch(m){tt(n,i,m)}}function In(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){tt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){tt(n,i,f)}else a.current=null}function G_(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){tt(n,n.return,f)}}function $_(n,i,a){try{var l=n.stateNode;GA(l,n.type,a,i),l[Nt]=i}catch(f){tt(n,n.return,f)}}function K_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function $d(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||K_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Kd(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Qc));else if(l!==4&&l!==27&&(n=n.child,n!==null))for(Kd(n,i,a),n=n.sibling;n!==null;)Kd(n,i,a),n=n.sibling}function Mc(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&l!==27&&(n=n.child,n!==null))for(Mc(n,i,a),n=n.sibling;n!==null;)Mc(n,i,a),n=n.sibling}var ri=!1,mt=!1,Qd=!1,Q_=typeof WeakSet=="function"?WeakSet:Set,zt=null,Y_=!1;function TA(n,i){if(n=n.containerInfo,bm=th,n=fy(n),Xf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,w=-1,k=-1,B=0,W=0,ne=n,Q=null;t:for(;;){for(var X;ne!==a||f!==0&&ne.nodeType!==3||(w=v+f),ne!==m||l!==0&&ne.nodeType!==3||(k=v+l),ne.nodeType===3&&(v+=ne.nodeValue.length),(X=ne.firstChild)!==null;)Q=ne,ne=X;for(;;){if(ne===n)break t;if(Q===a&&++B===f&&(w=v),Q===m&&++W===l&&(k=v),(X=ne.nextSibling)!==null)break;ne=Q,Q=ne.parentNode}ne=X}a=w===-1||k===-1?null:{start:w,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(wm={focusedElem:n,selectionRange:a},th=!1,zt=i;zt!==null;)if(i=zt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,zt=n;else for(;zt!==null;){switch(i=zt,m=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ye=na(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(ye,m),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ce){tt(a,a.return,Ce)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Im(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Im(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,zt=n;break}zt=i.return}return ye=Y_,Y_=!1,ye}function X_(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:si(n,a),l&4&&Dl(5,a);break;case 1:if(si(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(w){tt(a,a.return,w)}else{var f=na(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){tt(a,a.return,w)}}l&64&&F_(a),l&512&&sa(a,a.return);break;case 3:if(si(n,a),l&64&&(l=a.updateQueue,l!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{q_(l,n)}catch(w){tt(a,a.return,w)}}break;case 26:si(n,a),l&512&&sa(a,a.return);break;case 27:case 5:si(n,a),i===null&&l&4&&G_(a),l&512&&sa(a,a.return);break;case 12:si(n,a);break;case 13:si(n,a),l&4&&J_(n,a);break;case 22:if(f=a.memoizedState!==null||ri,!f){i=i!==null&&i.memoizedState!==null||mt;var m=ri,v=mt;ri=f,(mt=i)&&!v?ts(n,a,(a.subtreeFlags&8772)!==0):si(n,a),ri=m,mt=v}l&512&&(a.memoizedProps.mode==="manual"?sa(a,a.return):In(a,a.return));break;default:si(n,a)}}function W_(n){var i=n.alternate;i!==null&&(n.alternate=null,W_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ms(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var At=null,Cn=!1;function ii(n,i,a){for(a=a.child;a!==null;)Z_(n,i,a),a=a.sibling}function Z_(n,i,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(xi,a)}catch{}switch(a.tag){case 26:mt||In(a,i),ii(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:mt||In(a,i);var l=At,f=Cn;for(At=a.stateNode,ii(n,i,a),a=a.stateNode,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);Ms(a),At=l,Cn=f;break;case 5:mt||In(a,i);case 6:f=At;var m=Cn;if(At=null,ii(n,i,a),At=f,Cn=m,At!==null)if(Cn)try{n=At,l=a.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)}catch(v){tt(a,i,v)}else try{At.removeChild(a.stateNode)}catch(v){tt(a,i,v)}break;case 18:At!==null&&(Cn?(i=At,a=a.stateNode,i.nodeType===8?Rm(i.parentNode,a):i.nodeType===1&&Rm(i,a),Yl(i)):Rm(At,a.stateNode));break;case 4:l=At,f=Cn,At=a.stateNode.containerInfo,Cn=!0,ii(n,i,a),At=l,Cn=f;break;case 0:case 11:case 14:case 15:mt||es(2,a,i),mt||es(4,a,i),ii(n,i,a);break;case 1:mt||(In(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&H_(a,i,l)),ii(n,i,a);break;case 21:ii(n,i,a);break;case 22:mt||In(a,i),mt=(l=mt)||a.memoizedState!==null,ii(n,i,a),mt=l;break;default:ii(n,i,a)}}function J_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Yl(n)}catch(a){tt(i,i.return,a)}}function bA(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Q_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Q_),i;default:throw Error(s(435,n.tag))}}function Yd(n,i){var a=bA(n);i.forEach(function(l){var f=MA.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function Gn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=n,v=i,w=v;e:for(;w!==null;){switch(w.tag){case 27:case 5:At=w.stateNode,Cn=!1;break e;case 3:At=w.stateNode.containerInfo,Cn=!0;break e;case 4:At=w.stateNode.containerInfo,Cn=!0;break e}w=w.return}if(At===null)throw Error(s(160));Z_(m,v,f),At=null,Cn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ev(i,n),i=i.sibling}var sr=null;function ev(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gn(i,n),$n(n),l&4&&(es(3,n,n.return),Dl(3,n),es(5,n,n.return));break;case 1:Gn(i,n),$n(n),l&512&&(mt||a===null||In(a,a.return)),l&64&&ri&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=sr;if(Gn(i,n),$n(n),l&512&&(mt||a===null||In(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ui]||m[Ut]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Yt(m,l,a),m[Ut]=n,lt(m),l=m;break e;case"link":var v=Gv("link","href",f).get(l+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(a.href==null?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}m=f.createElement(l),Yt(m,l,a),f.head.appendChild(m);break;case"meta":if(v=Gv("meta","content",f).get(l+(a.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}m=f.createElement(l),Yt(m,l,a),f.head.appendChild(m);break;default:throw Error(s(468,l))}m[Ut]=n,lt(m),l=m}n.stateNode=l}else $v(f,n.type,n.stateNode);else n.stateNode=Hv(f,l,n.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?$v(f,n.type,n.stateNode):Hv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&$_(n,n.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&n.alternate===null){f=n.stateNode,m=n.memoizedProps;try{for(var k=f.firstChild;k;){var B=k.nextSibling,W=k.nodeName;k[Ui]||W==="HEAD"||W==="BODY"||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&k.rel.toLowerCase()==="stylesheet"||f.removeChild(k),k=B}for(var ne=n.type,Q=f.attributes;Q.length;)f.removeAttributeNode(Q[0]);Yt(f,ne,m),f[Ut]=n,f[Nt]=m}catch(ye){tt(n,n.return,ye)}}case 5:if(Gn(i,n),$n(n),l&512&&(mt||a===null||In(a,a.return)),n.flags&32){f=n.stateNode;try{Vn(f,"")}catch(ye){tt(n,n.return,ye)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,$_(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Qd=!0);break;case 6:if(Gn(i,n),$n(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(ye){tt(n,n.return,ye)}}break;case 3:if(Zc=null,f=sr,sr=Xc(i.containerInfo),Gn(i,n),sr=f,$n(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Yl(i.containerInfo)}catch(ye){tt(n,n.return,ye)}Qd&&(Qd=!1,tv(n));break;case 4:l=sr,sr=Xc(n.stateNode.containerInfo),Gn(i,n),$n(n),sr=l;break;case 12:Gn(i,n),$n(n);break;case 13:Gn(i,n),$n(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(im=gn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Yd(n,l)));break;case 22:if(l&512&&(mt||a===null||In(a,a.return)),k=n.memoizedState!==null,B=a!==null&&a.memoizedState!==null,W=ri,ne=mt,ri=W||k,mt=ne||B,Gn(i,n),mt=ne,ri=W,$n(n),i=n.stateNode,i._current=n,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,l&8192&&(i._visibility=k?i._visibility&-2:i._visibility|1,k&&(i=ri||mt,a===null||B||i||oo(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(a=null,i=n;;){if(i.tag===5||i.tag===26||i.tag===27){if(a===null){B=a=i;try{if(f=B.stateNode,k)m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{v=B.stateNode,w=B.memoizedProps.style;var X=w!=null&&w.hasOwnProperty("display")?w.display:null;v.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ye){tt(B,B.return,ye)}}}else if(i.tag===6){if(a===null){B=i;try{B.stateNode.nodeValue=k?"":B.memoizedProps}catch(ye){tt(B,B.return,ye)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Yd(n,a))));break;case 19:Gn(i,n),$n(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Yd(n,l)));break;case 21:break;default:Gn(i,n),$n(n)}}function $n(n){var i=n.flags;if(i&2){try{if(n.tag!==27){e:{for(var a=n.return;a!==null;){if(K_(a)){var l=a;break e}a=a.return}throw Error(s(160))}switch(l.tag){case 27:var f=l.stateNode,m=$d(n);Mc(n,m,f);break;case 5:var v=l.stateNode;l.flags&32&&(Vn(v,""),l.flags&=-33);var w=$d(n);Mc(n,w,v);break;case 3:case 4:var k=l.stateNode.containerInfo,B=$d(n);Kd(n,B,k);break;default:throw Error(s(161))}}}catch(W){tt(n,n.return,W)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function tv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;tv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function si(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)X_(n,i.alternate,i),i=i.sibling}function oo(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:es(4,i,i.return),oo(i);break;case 1:In(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&H_(i,i.return,a),oo(i);break;case 26:case 27:case 5:In(i,i.return),oo(i);break;case 22:In(i,i.return),i.memoizedState===null&&oo(i);break;default:oo(i)}n=n.sibling}}function ts(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:ts(f,m,a),Dl(4,m);break;case 1:if(ts(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){tt(l,l.return,B)}if(l=m,f=l.updateQueue,f!==null){var w=l.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)z_(k[f],w)}catch(B){tt(l,l.return,B)}}a&&v&64&&F_(m),sa(m,m.return);break;case 26:case 27:case 5:ts(f,m,a),a&&l===null&&v&4&&G_(m),sa(m,m.return);break;case 12:ts(f,m,a);break;case 13:ts(f,m,a),a&&v&4&&J_(f,m);break;case 22:m.memoizedState===null&&ts(f,m,a),sa(m,m.return);break;default:ts(f,m,a)}i=i.sibling}}function Xd(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Tl(a))}function Wd(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Tl(n))}function ns(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)nv(n,i,a,l),i=i.sibling}function nv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ns(n,i,a,l),f&2048&&Dl(9,i);break;case 3:ns(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Tl(n)));break;case 12:if(f&2048){ns(n,i,a,l),n=i.stateNode;try{var m=i.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){tt(i,i.return,k)}}else ns(n,i,a,l);break;case 23:break;case 22:m=i.stateNode,i.memoizedState!==null?m._visibility&4?ns(n,i,a,l):Ol(n,i):m._visibility&4?ns(n,i,a,l):(m._visibility|=4,lo(n,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&Xd(i.alternate,i);break;case 24:ns(n,i,a,l),f&2048&&Wd(i.alternate,i);break;default:ns(n,i,a,l)}}function lo(n,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=n,v=i,w=a,k=l,B=v.flags;switch(v.tag){case 0:case 11:case 15:lo(m,v,w,k,f),Dl(8,v);break;case 23:break;case 22:var W=v.stateNode;v.memoizedState!==null?W._visibility&4?lo(m,v,w,k,f):Ol(m,v):(W._visibility|=4,lo(m,v,w,k,f)),f&&B&2048&&Xd(v.alternate,v);break;case 24:lo(m,v,w,k,f),f&&B&2048&&Wd(v.alternate,v);break;default:lo(m,v,w,k,f)}i=i.sibling}}function Ol(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Ol(a,l),f&2048&&Xd(l.alternate,l);break;case 24:Ol(a,l),f&2048&&Wd(l.alternate,l);break;default:Ol(a,l)}i=i.sibling}}var kl=8192;function uo(n){if(n.subtreeFlags&kl)for(n=n.child;n!==null;)rv(n),n=n.sibling}function rv(n){switch(n.tag){case 26:uo(n),n.flags&kl&&n.memoizedState!==null&&cR(sr,n.memoizedState,n.memoizedProps);break;case 5:uo(n);break;case 3:case 4:var i=sr;sr=Xc(n.stateNode.containerInfo),uo(n),sr=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=kl,kl=16777216,uo(n),kl=i):uo(n));break;default:uo(n)}}function iv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Pl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];zt=l,av(l,n)}iv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)sv(n),n=n.sibling}function sv(n){switch(n.tag){case 0:case 11:case 15:Pl(n),n.flags&2048&&es(9,n,n.return);break;case 3:Pl(n);break;case 12:Pl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&4&&(n.return===null||n.return.tag!==13)?(i._visibility&=-5,Vc(n)):Pl(n);break;default:Pl(n)}}function Vc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];zt=l,av(l,n)}iv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:es(8,i,i.return),Vc(i);break;case 22:a=i.stateNode,a._visibility&4&&(a._visibility&=-5,Vc(i));break;default:Vc(i)}n=n.sibling}}function av(n,i){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:es(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Tl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,zt=l;else e:for(a=n;zt!==null;){l=zt;var f=l.sibling,m=l.return;if(W_(l),l===a){zt=null;break e}if(f!==null){f.return=m,zt=f;break e}zt=m}}}function wA(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(n,i,a,l){return new wA(n,i,a,l)}function Zd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rs(n,i){var a=n.alternate;return a===null?(a=Kn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&31457280,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function ov(n,i){n.flags&=31457282;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Uc(n,i,a,l,f,m){var v=0;if(l=n,typeof n=="function")Zd(n)&&(v=1);else if(typeof n=="string")v=lR(n,a,Gt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case p:return aa(a.children,f,m,i);case g:v=8,f|=24;break;case E:return n=Kn(12,a,i,f|2),n.elementType=E,n.lanes=m,n;case G:return n=Kn(13,a,i,f),n.elementType=G,n.lanes=m,n;case V:return n=Kn(19,a,i,f),n.elementType=V,n.lanes=m,n;case K:return lv(a,f,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case S:case x:v=10;break e;case R:v=9;break e;case M:v=11;break e;case z:v=14;break e;case q:v=16,l=null;break e}v=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return i=Kn(v,a,i,f),i.elementType=n,i.type=l,i.lanes=m,i}function aa(n,i,a,l){return n=Kn(7,n,l,i),n.lanes=a,n}function lv(n,i,a,l){n=Kn(22,n,l,i),n.elementType=K,n.lanes=a;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var m=f._current;if(m===null)throw Error(s(456));if((f._pendingVisibility&2)===0){var v=Gi(m,2);v!==null&&(f._pendingVisibility|=2,fn(v,m,2))}},attach:function(){var m=f._current;if(m===null)throw Error(s(456));if((f._pendingVisibility&2)!==0){var v=Gi(m,2);v!==null&&(f._pendingVisibility&=-3,fn(v,m,2))}}};return n.stateNode=f,n}function Jd(n,i,a){return n=Kn(6,n,null,i),n.lanes=a,n}function em(n,i,a){return i=Kn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function ai(n){n.flags|=4}function uv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Kv(i)){if(i=Hn.current,i!==null&&((qe&4194176)===qe?br!==null:(qe&62914560)!==qe&&(qe&536870912)===0||i!==br))throw _l=sd,Ry;n.flags|=8192}}function Lc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?ki():536870912,n.lanes|=i,ho|=i)}function Ml(n,i){if(!$e)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ut(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&31457280,l|=f.flags&31457280,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function SA(n,i,a){var l=i.pendingProps;switch(rd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(i),null;case 1:return ut(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ni(kt),jr(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(ml(i)?ai(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ir!==null&&(lm(ir),ir=null))),ut(i),null;case 26:return a=i.memoizedState,n===null?(ai(i),a!==null?(ut(i),uv(i,a)):(ut(i),i.flags&=-16777217)):a?a!==n.memoizedState?(ai(i),ut(i),uv(i,a)):(ut(i),i.flags&=-16777217):(n.memoizedProps!==l&&ai(i),ut(i),i.flags&=-16777217),null;case 27:xa(i),a=kn.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ai(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ut(i),null}n=Gt.current,ml(i)?Sy(i):(n=jv(f,l,a),i.stateNode=n,ai(i))}return ut(i),null;case 5:if(xa(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ai(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ut(i),null}if(n=Gt.current,ml(i))Sy(i);else{switch(f=Yc(kn.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[Ut]=i,n[Nt]=l;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(Yt(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ai(i)}}return ut(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&ai(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(n=kn.current,ml(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=hn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ut]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||kv(n.nodeValue,a)),n||Xs(i)}else n=Yc(n).createTextNode(l),n[Ut]=i,i.stateNode=n}return ut(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ml(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ut]=i}else pl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),f=!1}else ir!==null&&(lm(ir),ir=null),f=!0;if(!f)return i.flags&256?(Zr(i),i):(Zr(i),null)}if(Zr(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),Lc(i,i.updateQueue),ut(i),null;case 4:return jr(),n===null&&vm(i.stateNode.containerInfo),ut(i),null;case 10:return ni(i.type),ut(i),null;case 19:if(ot(Ot),f=i.memoizedState,f===null)return ut(i),null;if(l=(i.flags&128)!==0,m=f.rendering,m===null)if(l)Ml(f,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=Tc(n),m!==null){for(i.flags|=128,Ml(f,!1),n=m.updateQueue,i.updateQueue=n,Lc(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)ov(a,n),a=a.sibling;return He(Ot,Ot.current&1|2),i.child}n=n.sibling}f.tail!==null&&gn()>jc&&(i.flags|=128,l=!0,Ml(f,!1),i.lanes=4194304)}else{if(!l)if(n=Tc(m),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,Lc(i,n),Ml(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!$e)return ut(i),null}else 2*gn()-f.renderingStartTime>jc&&a!==536870912&&(i.flags|=128,l=!0,Ml(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(n=f.last,n!==null?n.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=gn(),i.sibling=null,n=Ot.current,He(Ot,l?n&1|2:n&1),i):(ut(i),null);case 22:case 23:return Zr(i),od(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ut(i),i.subtreeFlags&6&&(i.flags|=8192)):ut(i),a=i.updateQueue,a!==null&&Lc(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&ot(Zs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ni(kt),ut(i),null;case 25:return null}throw Error(s(156,i.tag))}function AA(n,i){switch(rd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ni(kt),jr(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return xa(i),null;case 13:if(Zr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));pl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ot(Ot),null;case 4:return jr(),null;case 10:return ni(i.type),null;case 22:case 23:return Zr(i),od(),n!==null&&ot(Zs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ni(kt),null;case 25:return null;default:return null}}function cv(n,i){switch(rd(i),i.tag){case 3:ni(kt),jr();break;case 26:case 27:case 5:xa(i);break;case 4:jr();break;case 13:Zr(i);break;case 19:ot(Ot);break;case 10:ni(i.type);break;case 22:case 23:Zr(i),od(),n!==null&&ot(Zs);break;case 24:ni(kt)}}var RA={getCacheForType:function(n){var i=en(kt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},IA=typeof WeakMap=="function"?WeakMap:Map,ct=0,nt=null,Pe=null,qe=0,rt=0,Nn=null,oi=!1,co=!1,tm=!1,li=0,pt=0,is=0,oa=0,nm=0,Qn=0,ho=0,Vl=null,Sr=null,rm=!1,im=0,jc=1/0,Bc=null,ss=null,zc=!1,la=null,Ul=0,sm=0,am=null,Ll=0,om=null;function xn(){if((ct&2)!==0&&qe!==0)return qe&-qe;if(b.T!==null){var n=no;return n!==0?n:pm()}return Ku()}function hv(){Qn===0&&(Qn=(qe&536870912)===0||$e?Xo():536870912);var n=Hn.current;return n!==null&&(n.flags|=32),Qn}function fn(n,i,a){(n===nt&&rt===2||n.cancelPendingCommit!==null)&&(fo(n,0),ui(n,qe,Qn,!1)),vt(n,a),((ct&2)===0||n!==nt)&&(n===nt&&((ct&2)===0&&(oa|=a),pt===4&&ui(n,qe,Qn,!1)),Ar(n))}function fv(n,i,a){if((ct&6)!==0)throw Error(s(327));var l=!a&&(i&60)===0&&(i&n.expiredLanes)===0||Oi(n,i),f=l?xA(n,i):hm(n,i,!0),m=l;do{if(f===0){co&&!l&&ui(n,i,0,!1);break}else if(f===6)ui(n,i,0,!oi);else{if(a=n.current.alternate,m&&!CA(a)){f=hm(n,i,!1),m=!1;continue}if(f===2){if(m=i,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var w=n;f=Vl;var k=w.current.memoizedState.isDehydrated;if(k&&(fo(w,v).flags|=256),v=hm(w,v,!1),v!==2){if(tm&&!k){w.errorRecoveryDisabledLanes|=m,oa|=m,f=4;break e}m=Sr,Sr=f,m!==null&&lm(m)}f=v}if(m=!1,f!==2)continue}}if(f===1){fo(n,0),ui(n,i,0,!0);break}e:{switch(l=n,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194176)===i){ui(l,i,Qn,!oi);break e}break;case 2:Sr=null;break;case 3:case 5:break;default:throw Error(s(329))}if(l.finishedWork=a,l.finishedLanes=i,(i&62914560)===i&&(m=im+300-gn(),10<m)){if(ui(l,i,Qn,!oi),Pn(l,0)!==0)break e;l.timeoutHandle=Vv(dv.bind(null,l,a,Sr,Bc,rm,i,Qn,oa,ho,oi,2,-0,0),m);break e}dv(l,a,Sr,Bc,rm,i,Qn,oa,ho,oi,0,-0,0)}}break}while(!0);Ar(n)}function lm(n){Sr===null?Sr=n:Sr.push.apply(Sr,n)}function dv(n,i,a,l,f,m,v,w,k,B,W,ne,Q){var X=i.subtreeFlags;if((X&8192||(X&16785408)===16785408)&&(Hl={stylesheets:null,count:0,unsuspend:uR},rv(i),i=hR(),i!==null)){n.cancelPendingCommit=i(Ev.bind(null,n,a,l,f,v,w,k,1,ne,Q)),ui(n,m,v,!B);return}Ev(n,a,l,f,v,w,k,W,ne,Q)}function CA(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Rn(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ui(n,i,a,l){i&=~nm,i&=~oa,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var m=31-ln(f),v=1<<m;l[m]=-1,f&=~v}a!==0&&Pi(n,a,i)}function qc(){return(ct&6)===0?(jl(0),!1):!0}function um(){if(Pe!==null){if(rt===0)var n=Pe.return;else n=Pe,ti=ra=null,pd(n),eo=null,vl=0,n=Pe;for(;n!==null;)cv(n.alternate,n),n=n.return;Pe=null}}function fo(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,KA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),um(),nt=n,Pe=a=rs(n.current,null),qe=i,rt=0,Nn=null,oi=!1,co=Oi(n,i),tm=!1,ho=Qn=nm=oa=is=pt=0,Sr=Vl=null,rm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-ln(l),m=1<<f;i|=n[f],l&=~m}return li=i,fc(),a}function mv(n,i){Oe=null,b.H=wr,i===yl?(i=Ny(),rt=3):i===Ry?(i=Ny(),rt=4):rt=i===I_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nn=i,Pe===null&&(pt=1,Oc(n,zn(i,n.current)))}function pv(){var n=b.H;return b.H=wr,n===null?wr:n}function gv(){var n=b.A;return b.A=RA,n}function cm(){pt=4,oi||(qe&4194176)!==qe&&Hn.current!==null||(co=!0),(is&134217727)===0&&(oa&134217727)===0||nt===null||ui(nt,qe,Qn,!1)}function hm(n,i,a){var l=ct;ct|=2;var f=pv(),m=gv();(nt!==n||qe!==i)&&(Bc=null,fo(n,i)),i=!1;var v=pt;e:do try{if(rt!==0&&Pe!==null){var w=Pe,k=Nn;switch(rt){case 8:um(),v=6;break e;case 3:case 2:case 6:Hn.current===null&&(i=!0);var B=rt;if(rt=0,Nn=null,mo(n,w,k,B),a&&co){v=0;break e}break;default:B=rt,rt=0,Nn=null,mo(n,w,k,B)}}NA(),v=pt;break}catch(W){mv(n,W)}while(!0);return i&&n.shellSuspendCounter++,ti=ra=null,ct=l,b.H=f,b.A=m,Pe===null&&(nt=null,qe=0,fc()),v}function NA(){for(;Pe!==null;)yv(Pe)}function xA(n,i){var a=ct;ct|=2;var l=pv(),f=gv();nt!==n||qe!==i?(Bc=null,jc=gn()+500,fo(n,i)):co=Oi(n,i);e:do try{if(rt!==0&&Pe!==null){i=Pe;var m=Nn;t:switch(rt){case 1:rt=0,Nn=null,mo(n,i,m,1);break;case 2:if(Iy(m)){rt=0,Nn=null,_v(i);break}i=function(){rt===2&&nt===n&&(rt=7),Ar(n)},m.then(i,i);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Iy(m)?(rt=0,Nn=null,_v(i)):(rt=0,Nn=null,mo(n,i,m,7));break;case 5:var v=null;switch(Pe.tag){case 26:v=Pe.memoizedState;case 5:case 27:var w=Pe;if(!v||Kv(v)){rt=0,Nn=null;var k=w.sibling;if(k!==null)Pe=k;else{var B=w.return;B!==null?(Pe=B,Fc(B)):Pe=null}break t}}rt=0,Nn=null,mo(n,i,m,5);break;case 6:rt=0,Nn=null,mo(n,i,m,6);break;case 8:um(),pt=6;break e;default:throw Error(s(462))}}DA();break}catch(W){mv(n,W)}while(!0);return ti=ra=null,b.H=l,b.A=f,ct=a,Pe!==null?0:(nt=null,qe=0,fc(),pt)}function DA(){for(;Pe!==null&&!jf();)yv(Pe)}function yv(n){var i=j_(n.alternate,n,li);n.memoizedProps=n.pendingProps,i===null?Fc(n):Pe=i}function _v(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=k_(a,i,i.pendingProps,i.type,void 0,qe);break;case 11:i=k_(a,i,i.pendingProps,i.type.render,i.ref,qe);break;case 5:pd(i);default:cv(a,i),i=Pe=ov(i,li),i=j_(a,i,li)}n.memoizedProps=n.pendingProps,i===null?Fc(n):Pe=i}function mo(n,i,a,l){ti=ra=null,pd(i),eo=null,vl=0;var f=i.return;try{if(vA(n,f,i,a,qe)){pt=1,Oc(n,zn(a,n.current)),Pe=null;return}}catch(m){if(f!==null)throw Pe=f,m;pt=1,Oc(n,zn(a,n.current)),Pe=null;return}i.flags&32768?($e||l===1?n=!0:co||(qe&536870912)!==0?n=!1:(oi=n=!0,(l===2||l===3||l===6)&&(l=Hn.current,l!==null&&l.tag===13&&(l.flags|=16384))),vv(i,n)):Fc(i)}function Fc(n){var i=n;do{if((i.flags&32768)!==0){vv(i,oi);return}n=i.return;var a=SA(i.alternate,i,li);if(a!==null){Pe=a;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=n}while(i!==null);pt===0&&(pt=5)}function vv(n,i){do{var a=AA(n.alternate,n);if(a!==null){a.flags&=32767,Pe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Pe=n;return}Pe=n=a}while(n!==null);pt=6,Pe=null}function Ev(n,i,a,l,f,m,v,w,k,B){var W=b.T,ne=ue.p;try{ue.p=2,b.T=null,OA(n,i,a,l,ne,f,m,v,w,k,B)}finally{b.T=W,ue.p=ne}}function OA(n,i,a,l,f,m,v,w){do po();while(la!==null);if((ct&6)!==0)throw Error(s(327));var k=n.finishedWork;if(l=n.finishedLanes,k===null)return null;if(n.finishedWork=null,n.finishedLanes=0,k===n.current)throw Error(s(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var B=k.lanes|k.childLanes;if(B|=ed,Gu(n,l,B,m,v,w),n===nt&&(Pe=nt=null,qe=0),(k.subtreeFlags&10256)===0&&(k.flags&10256)===0||zc||(zc=!0,sm=B,am=a,VA(Br,function(){return po(),null})),a=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||a?(a=b.T,b.T=null,m=ue.p,ue.p=2,v=ct,ct|=4,TA(n,k),ev(k,n),nA(wm,n.containerInfo),th=!!bm,wm=bm=null,n.current=k,X_(n,k.alternate,k),$o(),ct=v,ue.p=m,b.T=a):n.current=k,zc?(zc=!1,la=n,Ul=l):Tv(n,B),B=n.pendingLanes,B===0&&(ss=null),Qo(k.stateNode),Ar(n),i!==null)for(f=n.onRecoverableError,k=0;k<i.length;k++)B=i[k],f(B.value,{componentStack:B.stack});return(Ul&3)!==0&&po(),B=n.pendingLanes,(l&4194218)!==0&&(B&42)!==0?n===om?Ll++:(Ll=0,om=n):Ll=0,jl(0),null}function Tv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Tl(i)))}function po(){if(la!==null){var n=la,i=sm;sm=0;var a=$u(Ul),l=b.T,f=ue.p;try{if(ue.p=32>a?32:a,b.T=null,la===null)var m=!1;else{a=am,am=null;var v=la,w=Ul;if(la=null,Ul=0,(ct&6)!==0)throw Error(s(331));var k=ct;if(ct|=4,sv(v.current),nv(v,v.current,w,a),ct=k,jl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(xi,v)}catch{}m=!0}return m}finally{ue.p=f,b.T=l,Tv(n,i)}}return!1}function bv(n,i,a){i=zn(a,i),i=Nd(n.stateNode,i,2),n=Ji(n,i,2),n!==null&&(vt(n,2),Ar(n))}function tt(n,i,a){if(n.tag===3)bv(n,n,a);else for(;i!==null;){if(i.tag===3){bv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ss===null||!ss.has(l))){n=zn(a,n),a=A_(2),l=Ji(i,a,2),l!==null&&(R_(a,l,i,n),vt(l,2),Ar(l));break}}i=i.return}}function fm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new IA;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(tm=!0,f.add(a),n=kA.bind(null,n,i,a),i.then(n,n))}function kA(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,nt===n&&(qe&a)===a&&(pt===4||pt===3&&(qe&62914560)===qe&&300>gn()-im?(ct&2)===0&&fo(n,0):nm|=a,ho===qe&&(ho=0)),Ar(n)}function wv(n,i){i===0&&(i=ki()),n=Gi(n,i),n!==null&&(vt(n,i),Ar(n))}function PA(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),wv(n,a)}function MA(n,i){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),wv(n,a)}function VA(n,i){return Os(n,i)}var Hc=null,go=null,dm=!1,Gc=!1,mm=!1,ua=0;function Ar(n){n!==go&&n.next===null&&(go===null?Hc=go=n:go=go.next=n),Gc=!0,dm||(dm=!0,LA(UA))}function jl(n,i){if(!mm&&Gc){mm=!0;do for(var a=!1,l=Hc;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var v=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-ln(42|n)+1)-1,m&=f&~(v&~w),m=m&201326677?m&201326677|1:m?m|2:0}m!==0&&(a=!0,Rv(l,m))}else m=qe,m=Pn(l,l===nt?m:0),(m&3)===0||Oi(l,m)||(a=!0,Rv(l,m));l=l.next}while(a);mm=!1}}function UA(){Gc=dm=!1;var n=0;ua!==0&&($A()&&(n=ua),ua=0);for(var i=gn(),a=null,l=Hc;l!==null;){var f=l.next,m=Sv(l,i);m===0?(l.next=null,a===null?Hc=f:a.next=f,f===null&&(go=a)):(a=l,(n!==0||(m&3)!==0)&&(Gc=!0)),l=f}jl(n)}function Sv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-ln(m),w=1<<v,k=f[v];k===-1?((w&a)===0||(w&l)!==0)&&(f[v]=ka(w,i)):k<=i&&(n.expiredLanes|=w),m&=~w}if(i=nt,a=qe,a=Pn(n,n===i?a:0),l=n.callbackNode,a===0||n===i&&rt===2||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Oa(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Oi(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Oa(l),$u(a)){case 2:case 8:a=Vt;break;case 32:a=Br;break;case 268435456:a=Ko;break;default:a=Br}return l=Av.bind(null,n),a=Os(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Oa(l),n.callbackPriority=2,n.callbackNode=null,2}function Av(n,i){var a=n.callbackNode;if(po()&&n.callbackNode!==a)return null;var l=qe;return l=Pn(n,n===nt?l:0),l===0?null:(fv(n,l,i),Sv(n,gn()),n.callbackNode!=null&&n.callbackNode===a?Av.bind(null,n):null)}function Rv(n,i){if(po())return null;fv(n,i,!0)}function LA(n){QA(function(){(ct&6)!==0?Os(Ct,n):n()})}function pm(){return ua===0&&(ua=Xo()),ua}function Iv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:mr(""+n)}function Cv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function jA(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var m=Iv((f[Nt]||null).action),v=l.submitter;v&&(i=(i=v[Nt]||null)?Iv(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var w=new Ba("action","action",null,l,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ua!==0){var k=v?Cv(f,v):new FormData(f);Sd(a,{pending:!0,data:k,method:f.method,action:m},null,k)}}else typeof m=="function"&&(w.preventDefault(),k=v?Cv(f,v):new FormData(f),Sd(a,{pending:!0,data:k,method:f.method,action:m},m,k))},currentTarget:f}]})}}for(var gm=0;gm<Ey.length;gm++){var ym=Ey[gm],BA=ym.toLowerCase(),zA=ym[0].toUpperCase()+ym.slice(1);rr(BA,"on"+zA)}rr(py,"onAnimationEnd"),rr(gy,"onAnimationIteration"),rr(yy,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(iA,"onTransitionRun"),rr(sA,"onTransitionStart"),rr(aA,"onTransitionCancel"),rr(_y,"onTransitionEnd"),yn("onMouseEnter",["mouseout","mouseover"]),yn("onMouseLeave",["mouseout","mouseover"]),yn("onPointerEnter",["pointerout","pointerover"]),yn("onPointerLeave",["pointerout","pointerover"]),Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function Nv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var m=void 0;if(i)for(var v=l.length-1;0<=v;v--){var w=l[v],k=w.instance,B=w.currentTarget;if(w=w.listener,k!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=B;try{m(f)}catch(W){Dc(W)}f.currentTarget=null,m=k}else for(v=0;v<l.length;v++){if(w=l[v],k=w.instance,B=w.currentTarget,w=w.listener,k!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=B;try{m(f)}catch(W){Dc(W)}f.currentTarget=null,m=k}}}}function Le(n,i){var a=i[Ps];a===void 0&&(a=i[Ps]=new Set);var l=n+"__bubble";a.has(l)||(xv(i,n,2,!1),a.add(l))}function _m(n,i,a){var l=0;i&&(l|=4),xv(a,n,l,i)}var $c="_reactListening"+Math.random().toString(36).slice(2);function vm(n){if(!n[$c]){n[$c]=!0,Zo.forEach(function(a){a!=="selectionchange"&&(qA.has(a)||_m(a,!1,n),_m(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[$c]||(i[$c]=!0,_m("selectionchange",!1,i))}}function xv(n,i,a,l){switch(Jv(i)){case 2:var f=mR;break;case 8:f=pR;break;default:f=Om}a=f.bind(null,i,a,n),f=void 0,!Ln||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Em(n,i,a,l,f){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var w=l.stateNode.containerInfo;if(w===f||w.nodeType===8&&w.parentNode===f)break;if(v===4)for(v=l.return;v!==null;){var k=v.tag;if((k===3||k===4)&&(k=v.stateNode.containerInfo,k===f||k.nodeType===8&&k.parentNode===f))return;v=v.return}for(;w!==null;){if(v=nr(w),v===null)return;if(k=v.tag,k===5||k===6||k===26||k===27){l=m=v;continue e}w=w.parentNode}}l=l.return}Wu(function(){var B=m,W=ja(a),ne=[];e:{var Q=vy.get(n);if(Q!==void 0){var X=Ba,ye=n;switch(n){case"keypress":if(gr(a)===0)break e;case"keydown":case"keyup":X=$a;break;case"focusin":ye="focus",X=Fa;break;case"focusout":ye="blur",X=Fa;break;case"beforeblur":case"afterblur":X=Fa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=jn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=$f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=sc;break;case py:case gy:case yy:X=Ha;break;case _y:X=oc;break;case"scroll":case"scrollend":X=Zu;break;case"wheel":X=Ka;break;case"copy":case"cut":case"paste":X=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=cl;break;case"toggle":case"beforetoggle":X=uc}var Ce=(i&4)!==0,gt=!Ce&&(n==="scroll"||n==="scrollend"),F=Ce?Q!==null?Q+"Capture":null:Q;Ce=[];for(var L=B,$;L!==null;){var J=L;if($=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||$===null||F===null||(J=js(L,F),J!=null&&Ce.push(zl(L,J,$))),gt)break;L=L.return}0<Ce.length&&(Q=new X(Q,ye,null,a,W),ne.push({event:Q,listeners:Ce}))}}if((i&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",Q&&a!==Un&&(ye=a.relatedTarget||a.fromElement)&&(nr(ye)||ye[zr]))break e;if((X||Q)&&(Q=W.window===W?W:(Q=W.ownerDocument)?Q.defaultView||Q.parentWindow:window,X?(ye=a.relatedTarget||a.toElement,X=B,ye=ye?nr(ye):null,ye!==null&&(gt=pe(ye),Ce=ye.tag,ye!==gt||Ce!==5&&Ce!==27&&Ce!==6)&&(ye=null)):(X=null,ye=B),X!==ye)){if(Ce=jn,J="onMouseLeave",F="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Ce=cl,J="onPointerLeave",F="onPointerEnter",L="pointer"),gt=X==null?Q:Li(X),$=ye==null?Q:Li(ye),Q=new Ce(J,L+"leave",X,a,W),Q.target=gt,Q.relatedTarget=$,J=null,nr(W)===B&&(Ce=new Ce(F,L+"enter",ye,a,W),Ce.target=$,Ce.relatedTarget=gt,J=Ce),gt=J,X&&ye)t:{for(Ce=X,F=ye,L=0,$=Ce;$;$=yo($))L++;for($=0,J=F;J;J=yo(J))$++;for(;0<L-$;)Ce=yo(Ce),L--;for(;0<$-L;)F=yo(F),$--;for(;L--;){if(Ce===F||F!==null&&Ce===F.alternate)break t;Ce=yo(Ce),F=yo(F)}Ce=null}else Ce=null;X!==null&&Dv(ne,Q,X,Ce,!1),ye!==null&&gt!==null&&Dv(ne,gt,ye,Ce,!0)}}e:{if(Q=B?Li(B):window,X=Q.nodeName&&Q.nodeName.toLowerCase(),X==="select"||X==="input"&&Q.type==="file")var me=iy;else if(Dt(Q))if(sy)me=eA;else{me=ZS;var ke=WS}else X=Q.nodeName,!X||X.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?B&&rl(B.elementType)&&(me=iy):me=JS;if(me&&(me=me(n,B))){Yr(ne,me,a,W);break e}ke&&ke(n,Q,B),n==="focusout"&&B&&Q.type==="number"&&B.memoizedProps.value!=null&&La(Q,"number",Q.value)}switch(ke=B?Li(B):window,n){case"focusin":(Dt(ke)||ke.contentEditable==="true")&&(Qa=ke,Wf=B,dl=null);break;case"focusout":dl=Wf=Qa=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,dy(ne,a,W);break;case"selectionchange":if(rA)break;case"keydown":case"keyup":dy(ne,a,W)}var ve;if(vr)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Be?Y(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(_&&a.locale!=="ko"&&(Be||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Be&&(ve=sl()):(pr=W,Hi="value"in pr?pr.value:pr.textContent,Be=!0)),ke=Kc(B,Se),0<ke.length&&(Se=new ll(Se,n,null,a,W),ne.push({event:Se,listeners:ke}),ve?Se.data=ve:(ve=le(a),ve!==null&&(Se.data=ve)))),(ve=y?xt(n,a):ze(n,a))&&(Se=Kc(B,"onBeforeInput"),0<Se.length&&(ke=new ll("onBeforeInput","beforeinput",null,a,W),ne.push({event:ke,listeners:Se}),ke.data=ve)),jA(ne,n,B,a,W)}Nv(ne,i)})}function zl(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Kc(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,m=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=js(n,a),f!=null&&l.unshift(zl(n,f,m)),f=js(n,i),f!=null&&l.push(zl(n,f,m))),n=n.return}return l}function yo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Dv(n,i,a,l,f){for(var m=i._reactName,v=[];a!==null&&a!==l;){var w=a,k=w.alternate,B=w.stateNode;if(w=w.tag,k!==null&&k===l)break;w!==5&&w!==26&&w!==27||B===null||(k=B,f?(B=js(a,m),B!=null&&v.unshift(zl(a,B,k))):f||(B=js(a,m),B!=null&&v.push(zl(a,B,k)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var FA=/\r\n?/g,HA=/\u0000|\uFFFD/g;function Ov(n){return(typeof n=="string"?n:""+n).replace(FA,`
`).replace(HA,"")}function kv(n,i){return i=Ov(i),Ov(n)===i}function Qc(){}function et(n,i,a,l,f,m){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Vn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Vn(n,""+l);break;case"className":zi(n,"class",l);break;case"tabIndex":zi(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":zi(n,a,l);break;case"style":Xu(n,l,m);break;case"data":if(i!=="object"){zi(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=mr(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&et(n,i,"name",f.name,f,null),et(n,i,"formEncType",f.formEncType,f,null),et(n,i,"formMethod",f.formMethod,f,null),et(n,i,"formTarget",f.formTarget,f,null)):(et(n,i,"encType",f.encType,f,null),et(n,i,"method",f.method,f,null),et(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=mr(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Qc);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=mr(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Bi(n,"popover",l);break;case"xlinkActuate":Mn(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Mn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Mn(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Mn(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Mn(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Mn(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Mn(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Mn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Mn(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Bi(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Hf.get(a)||a,Bi(n,a,l))}}function Tm(n,i,a,l,f,m){switch(a){case"style":Xu(n,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Vn(n,l):(typeof l=="number"||typeof l=="bigint")&&Vn(n,""+l);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Va.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=n[Nt]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(i,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Bi(n,a,l)}}}function Yt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:et(n,i,m,v,a,null)}}f&&et(n,i,"srcSet",a.srcSet,a,null),l&&et(n,i,"src",a.src,a,null);return;case"input":Le("invalid",n);var w=m=v=f=null,k=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":f=W;break;case"type":v=W;break;case"checked":k=W;break;case"defaultChecked":B=W;break;case"value":m=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:et(n,i,l,W,a,null)}}Us(n,m,w,k,B,v,f,!1),Vs(n);return;case"select":Le("invalid",n),l=v=m=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":l=w;default:et(n,i,f,w,a,null)}i=m,a=v,n.multiple=!!l,i!=null?Ge(n,!!l,i,!1):a!=null&&Ge(n,!!l,a,!0);return;case"textarea":Le("invalid",n),m=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":l=w;break;case"defaultValue":f=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:et(n,i,v,w,a,null)}Fi(n,l,f,m),Vs(n);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:et(n,i,k,l,a,null)}return;case"dialog":Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(l=0;l<Bl.length;l++)Le(Bl[l],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:et(n,i,B,l,a,null)}return;default:if(rl(i)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Tm(n,i,W,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&et(n,i,w,l,a,null))}function GA(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,w=null,k=null,B=null,W=null;for(X in a){var ne=a[X];if(a.hasOwnProperty(X)&&ne!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":k=ne;default:l.hasOwnProperty(X)||et(n,i,X,null,l,ne)}}for(var Q in l){var X=l[Q];if(ne=a[Q],l.hasOwnProperty(Q)&&(X!=null||ne!=null))switch(Q){case"type":m=X;break;case"name":f=X;break;case"checked":B=X;break;case"defaultChecked":W=X;break;case"value":v=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:X!==ne&&et(n,i,Q,X,l,ne)}}qi(n,v,w,k,B,W,m,f);return;case"select":X=v=w=Q=null;for(m in a)if(k=a[m],a.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":X=k;default:l.hasOwnProperty(m)||et(n,i,m,null,l,k)}for(f in l)if(m=l[f],k=a[f],l.hasOwnProperty(f)&&(m!=null||k!=null))switch(f){case"value":Q=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==k&&et(n,i,f,m,l,k)}i=w,a=v,l=X,Q!=null?Ge(n,!!a,Q,!1):!!l!=!!a&&(i!=null?Ge(n,!!a,i,!0):Ge(n,!!a,a?[]:"",!1));return;case"textarea":X=Q=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:et(n,i,w,null,l,f)}for(v in l)if(f=l[v],m=a[v],l.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":Q=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&et(n,i,v,f,l,m)}Ls(n,Q,X);return;case"option":for(var ye in a)if(Q=a[ye],a.hasOwnProperty(ye)&&Q!=null&&!l.hasOwnProperty(ye))switch(ye){case"selected":n.selected=!1;break;default:et(n,i,ye,null,l,Q)}for(k in l)if(Q=l[k],X=a[k],l.hasOwnProperty(k)&&Q!==X&&(Q!=null||X!=null))switch(k){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:et(n,i,k,Q,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)Q=a[Ce],a.hasOwnProperty(Ce)&&Q!=null&&!l.hasOwnProperty(Ce)&&et(n,i,Ce,null,l,Q);for(B in l)if(Q=l[B],X=a[B],l.hasOwnProperty(B)&&Q!==X&&(Q!=null||X!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:et(n,i,B,Q,l,X)}return;default:if(rl(i)){for(var gt in a)Q=a[gt],a.hasOwnProperty(gt)&&Q!==void 0&&!l.hasOwnProperty(gt)&&Tm(n,i,gt,void 0,l,Q);for(W in l)Q=l[W],X=a[W],!l.hasOwnProperty(W)||Q===X||Q===void 0&&X===void 0||Tm(n,i,W,Q,l,X);return}}for(var F in a)Q=a[F],a.hasOwnProperty(F)&&Q!=null&&!l.hasOwnProperty(F)&&et(n,i,F,null,l,Q);for(ne in l)Q=l[ne],X=a[ne],!l.hasOwnProperty(ne)||Q===X||Q==null&&X==null||et(n,i,ne,Q,l,X)}var bm=null,wm=null;function Yc(n){return n.nodeType===9?n:n.ownerDocument}function Pv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Sm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Am=null;function $A(){var n=window.event;return n&&n.type==="popstate"?n===Am?!1:(Am=n,!0):(Am=null,!1)}var Vv=typeof setTimeout=="function"?setTimeout:void 0,KA=typeof clearTimeout=="function"?clearTimeout:void 0,Uv=typeof Promise=="function"?Promise:void 0,QA=typeof queueMicrotask=="function"?queueMicrotask:typeof Uv<"u"?function(n){return Uv.resolve(null).then(n).catch(YA)}:Vv;function YA(n){setTimeout(function(){throw n})}function Rm(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(l===0){n.removeChild(f),Yl(i);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=f}while(a);Yl(i)}function Im(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Im(a),Ms(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function XA(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ui])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ar(n.nextSibling),n===null)break}return null}function WA(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ar(n.nextSibling),n===null))return null;return n}function ar(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}function Lv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function jv(n,i,a){switch(i=Yc(a),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}var Yn=new Map,Bv=new Set;function Xc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var ci=ue.d;ue.d={f:ZA,r:JA,D:eR,C:tR,L:nR,m:rR,X:sR,S:iR,M:aR};function ZA(){var n=ci.f(),i=qc();return n||i}function JA(n){var i=qr(n);i!==null&&i.tag===5&&i.type==="form"?d_(i):ci.r(n)}var _o=typeof document>"u"?null:document;function zv(n,i,a){var l=_o;if(l&&typeof i=="string"&&i){var f=dt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Bv.has(f)||(Bv.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Yt(i,"link",n),lt(i),l.head.appendChild(i)))}}function eR(n){ci.D(n),zv("dns-prefetch",n,null)}function tR(n,i){ci.C(n,i),zv("preconnect",n,i)}function nR(n,i,a){ci.L(n,i,a);var l=_o;if(l&&n&&i){var f='link[rel="preload"][as="'+dt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+dt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+dt(a.imageSizes)+'"]')):f+='[href="'+dt(n)+'"]';var m=f;switch(i){case"style":m=vo(n);break;case"script":m=Eo(n)}Yn.has(m)||(n=I({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Yn.set(m,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(ql(m))||i==="script"&&l.querySelector(Fl(m))||(i=l.createElement("link"),Yt(i,"link",n),lt(i),l.head.appendChild(i)))}}function rR(n,i){ci.m(n,i);var a=_o;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+dt(l)+'"][href="'+dt(n)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Eo(n)}if(!Yn.has(m)&&(n=I({rel:"modulepreload",href:n},i),Yn.set(m,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fl(m)))return}l=a.createElement("link"),Yt(l,"link",n),lt(l),a.head.appendChild(l)}}}function iR(n,i,a){ci.S(n,i,a);var l=_o;if(l&&n){var f=ji(l).hoistableStyles,m=vo(n);i=i||"default";var v=f.get(m);if(!v){var w={loading:0,preload:null};if(v=l.querySelector(ql(m)))w.loading=5;else{n=I({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Yn.get(m))&&Cm(n,a);var k=v=l.createElement("link");lt(k),Yt(k,"link",n),k._p=new Promise(function(B,W){k.onload=B,k.onerror=W}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Wc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:w},f.set(m,v)}}}function sR(n,i){ci.X(n,i);var a=_o;if(a&&n){var l=ji(a).hoistableScripts,f=Eo(n),m=l.get(f);m||(m=a.querySelector(Fl(f)),m||(n=I({src:n,async:!0},i),(i=Yn.get(f))&&Nm(n,i),m=a.createElement("script"),lt(m),Yt(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function aR(n,i){ci.M(n,i);var a=_o;if(a&&n){var l=ji(a).hoistableScripts,f=Eo(n),m=l.get(f);m||(m=a.querySelector(Fl(f)),m||(n=I({src:n,async:!0,type:"module"},i),(i=Yn.get(f))&&Nm(n,i),m=a.createElement("script"),lt(m),Yt(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function qv(n,i,a,l){var f=(f=kn.current)?Xc(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=vo(a.href),a=ji(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=vo(a.href);var m=ji(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(ql(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Yn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(n,a),m||oR(f,n,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Eo(a),a=ji(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function vo(n){return'href="'+dt(n)+'"'}function ql(n){return'link[rel="stylesheet"]['+n+"]"}function Fv(n){return I({},n,{"data-precedence":n.precedence,precedence:null})}function oR(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Yt(i,"link",a),lt(i),n.head.appendChild(i))}function Eo(n){return'[src="'+dt(n)+'"]'}function Fl(n){return"script[async]"+n}function Hv(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+dt(a.href)+'"]');if(l)return i.instance=l,lt(l),l;var f=I({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),lt(l),Yt(l,"style",f),Wc(l,a.precedence,n),i.instance=l;case"stylesheet":f=vo(a.href);var m=n.querySelector(ql(f));if(m)return i.state.loading|=4,i.instance=m,lt(m),m;l=Fv(a),(f=Yn.get(f))&&Cm(l,f),m=(n.ownerDocument||n).createElement("link"),lt(m);var v=m;return v._p=new Promise(function(w,k){v.onload=w,v.onerror=k}),Yt(m,"link",l),i.state.loading|=4,Wc(m,a.precedence,n),i.instance=m;case"script":return m=Eo(a.src),(f=n.querySelector(Fl(m)))?(i.instance=f,lt(f),f):(l=a,(f=Yn.get(m))&&(l=I({},a),Nm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),lt(f),Yt(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Wc(l,a.precedence,n));return i.instance}function Wc(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,v=0;v<l.length;v++){var w=l[v];if(w.dataset.precedence===i)m=w;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Cm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Nm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Zc=null;function Gv(n,i,a){if(Zc===null){var l=new Map,f=Zc=new Map;f.set(a,l)}else f=Zc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var m=a[f];if(!(m[Ui]||m[Ut]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=n+v;var w=l.get(v);w?w.push(m):l.set(v,[m])}}return l}function $v(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function lR(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Kv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Hl=null;function uR(){}function cR(n,i,a){if(Hl===null)throw Error(s(475));var l=Hl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=vo(a.href),m=n.querySelector(ql(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Jc.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=m,lt(m);return}m=n.ownerDocument||n,a=Fv(a),(f=Yn.get(f))&&Cm(a,f),m=m.createElement("link"),lt(m);var v=m;v._p=new Promise(function(w,k){v.onload=w,v.onerror=k}),Yt(m,"link",a),i.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Jc.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function hR(){if(Hl===null)throw Error(s(475));var n=Hl;return n.stylesheets&&n.count===0&&xm(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&xm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Jc(){if(this.count--,this.count===0){if(this.stylesheets)xm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var eh=null;function xm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,eh=new Map,i.forEach(fR,n),eh=null,Jc.call(n))}function fR(n,i){if(!(i.state.loading&4)){var a=eh.get(n);if(a)var l=a.get(null);else{a=new Map,eh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=i.instance,v=f.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,f),a.set(v,f),this.count++,l=Jc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Gl={$$typeof:x,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function dR(n,i,a,l,f,m,v,w){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pa(0),this.hiddenUpdates=Pa(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Qv(n,i,a,l,f,m,v,w,k,B,W,ne){return n=new dR(n,i,a,v,w,k,B,ne),i=1,m===!0&&(i|=24),m=Kn(3,null,null,i),n.current=m,m.stateNode=n,i=ld(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:i},qd(m),n}function Yv(n){return n?(n=Wa,n):Wa}function Xv(n,i,a,l,f,m){f=Yv(f),l.context===null?l.context=f:l.pendingContext=f,l=Zi(i),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Ji(n,l,i),a!==null&&(fn(a,n,i),Cl(a,n,i))}function Wv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Dm(n,i){Wv(n,i),(n=n.alternate)&&Wv(n,i)}function Zv(n){if(n.tag===13){var i=Gi(n,67108864);i!==null&&fn(i,n,67108864),Dm(n,67108864)}}var th=!0;function mR(n,i,a,l){var f=b.T;b.T=null;var m=ue.p;try{ue.p=2,Om(n,i,a,l)}finally{ue.p=m,b.T=f}}function pR(n,i,a,l){var f=b.T;b.T=null;var m=ue.p;try{ue.p=8,Om(n,i,a,l)}finally{ue.p=m,b.T=f}}function Om(n,i,a,l){if(th){var f=km(l);if(f===null)Em(n,i,l,nh,a),eE(n,l);else if(yR(f,n,i,a,l))l.stopPropagation();else if(eE(n,l),i&4&&-1<gR.indexOf(n)){for(;f!==null;){var m=qr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=tr(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var k=1<<31-ln(v);w.entanglements[1]|=k,v&=~k}Ar(m),(ct&6)===0&&(jc=gn()+500,jl(0))}}break;case 13:w=Gi(m,2),w!==null&&fn(w,m,2),qc(),Dm(m,2)}if(m=km(l),m===null&&Em(n,i,l,nh,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Em(n,i,l,null,a)}}function km(n){return n=ja(n),Pm(n)}var nh=null;function Pm(n){if(nh=null,n=nr(n),n!==null){var i=pe(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=Ue(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return nh=n,null}function Jv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zu()){case Ct:return 2;case Vt:return 8;case Br:case qu:return 32;case Ko:return 268435456;default:return 32}default:return 32}}var Mm=!1,as=null,os=null,ls=null,$l=new Map,Kl=new Map,us=[],gR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function eE(n,i){switch(n){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":$l.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(i.pointerId)}}function Ql(n,i,a,l,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},i!==null&&(i=qr(i),i!==null&&Zv(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function yR(n,i,a,l,f){switch(i){case"focusin":return as=Ql(as,n,i,a,l,f),!0;case"dragenter":return os=Ql(os,n,i,a,l,f),!0;case"mouseover":return ls=Ql(ls,n,i,a,l,f),!0;case"pointerover":var m=f.pointerId;return $l.set(m,Ql($l.get(m)||null,n,i,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Kl.set(m,Ql(Kl.get(m)||null,n,i,a,l,f)),!0}return!1}function tE(n){var i=nr(n.target);if(i!==null){var a=pe(i);if(a!==null){if(i=a.tag,i===13){if(i=Ue(a),i!==null){n.blockedOn=i,Vi(n.priority,function(){if(a.tag===13){var l=xn(),f=Gi(a,l);f!==null&&fn(f,a,l),Dm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=km(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Un=l,a.target.dispatchEvent(l),Un=null}else return i=qr(a),i!==null&&Zv(i),n.blockedOn=a,!1;i.shift()}return!0}function nE(n,i,a){rh(n)&&a.delete(i)}function _R(){Mm=!1,as!==null&&rh(as)&&(as=null),os!==null&&rh(os)&&(os=null),ls!==null&&rh(ls)&&(ls=null),$l.forEach(nE),Kl.forEach(nE)}function ih(n,i){n.blockedOn===i&&(n.blockedOn=null,Mm||(Mm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,_R)))}var sh=null;function rE(n){sh!==n&&(sh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sh===n&&(sh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(Pm(l||a)===null)continue;break}var m=qr(a);m!==null&&(n.splice(i,3),i-=3,Sd(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Yl(n){function i(k){return ih(k,n)}as!==null&&ih(as,n),os!==null&&ih(os,n),ls!==null&&ih(ls,n),$l.forEach(i),Kl.forEach(i);for(var a=0;a<us.length;a++){var l=us[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<us.length&&(a=us[0],a.blockedOn===null);)tE(a),a.blockedOn===null&&us.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],v=f[Nt]||null;if(typeof m=="function")v||rE(a);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Nt]||null)w=v.formAction;else if(Pm(f)!==null)continue}else w=v.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),rE(a)}}}function Vm(n){this._internalRoot=n}ah.prototype.render=Vm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=xn();Xv(a,l,n,i,null,null)},ah.prototype.unmount=Vm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;n.tag===0&&po(),Xv(n.current,2,null,n,null,null),qc(),i[zr]=null}};function ah(n){this._internalRoot=n}ah.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ku();n={blockedOn:null,target:n,priority:i};for(var a=0;a<us.length&&i!==0&&i<us[a].priority;a++);us.splice(a,0,n),a===0&&tE(n)}};var iE=e.version;if(iE!=="19.0.0")throw Error(s(527,iE,"19.0.0"));ue.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=ie(i),n=n!==null?ge(n):null,n=n===null?null:n.stateNode,n};var vR={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:b,findFiberByHostInstance:nr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{xi=oh.inject(vR),Jt=oh}catch{}}return Wl.createRoot=function(n,i){if(!o(n))throw Error(s(299));var a=!1,l="",f=T_,m=b_,v=w_,w=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(w=i.unstable_transitionCallbacks)),i=Qv(n,1,!1,null,null,a,l,f,m,v,w,null),n[zr]=i.current,vm(n.nodeType===8?n.parentNode:n),new Vm(i)},Wl.hydrateRoot=function(n,i,a){if(!o(n))throw Error(s(299));var l=!1,f="",m=T_,v=b_,w=w_,k=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(k=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),i=Qv(n,1,!0,i,a??null,l,f,m,v,w,k,B),i.context=Yv(null),a=i.current,l=xn(),f=Zi(l),f.callback=null,Ji(a,f,l),i.current.lanes=l,vt(i,l),Ar(i),n[zr]=i.current,vm(n),new ah(i)},Wl.version="19.0.0",Wl}var mE;function NR(){if(mE)return jm.exports;mE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jm.exports=CR(),jm.exports}var xR=NR(),Zl={},pE;function DR(){if(pE)return Zl;pE=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.parse=h,Zl.serialize=g;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function h(R,x){const M=new u,G=R.length;if(G<2)return M;const V=(x==null?void 0:x.decode)||E;let z=0;do{const q=R.indexOf("=",z);if(q===-1)break;const K=R.indexOf(";",z),re=K===-1?G:K;if(q>re){z=R.lastIndexOf(";",q-1)+1;continue}const se=d(R,z,q),Z=p(R,q,se),P=R.slice(se,Z);if(M[P]===void 0){let C=d(R,q+1,re),b=p(R,re,C);const I=V(R.slice(C,b));M[P]=I}z=re+1}while(z<G);return M}function d(R,x,M){do{const G=R.charCodeAt(x);if(G!==32&&G!==9)return x}while(++x<M);return M}function p(R,x,M){for(;x>M;){const G=R.charCodeAt(--x);if(G!==32&&G!==9)return x+1}return M}function g(R,x,M){const G=(M==null?void 0:M.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const V=G(x);if(!e.test(V))throw new TypeError(`argument val is invalid: ${x}`);let z=R+"="+V;if(!M)return z;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);z+="; Max-Age="+M.maxAge}if(M.domain){if(!t.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);z+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);z+="; Path="+M.path}if(M.expires){if(!S(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);z+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(z+="; HttpOnly"),M.secure&&(z+="; Secure"),M.partitioned&&(z+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return z}function E(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function S(R){return o.call(R)==="[object Date]"}return Zl}DR();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gE="popstate";function OR(r={}){function e(s,o){let{pathname:u,search:h,hash:d}=s.location;return up("",{pathname:u,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:mu(o)}return PR(e,t,null,r)}function ht(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Or(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kR(){return Math.random().toString(36).substring(2,10)}function yE(r,e){return{usr:r.state,key:r.key,idx:e}}function up(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Lo(e):e,state:t,key:e&&e.key||s||kR()}}function mu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Lo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function PR(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,d="POP",p=null,g=E();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function E(){return(h.state||{idx:null}).idx}function S(){d="POP";let V=E(),z=V==null?null:V-g;g=V,p&&p({action:d,location:G.location,delta:z})}function R(V,z){d="PUSH";let q=up(G.location,V,z);g=E()+1;let K=yE(q,g),re=G.createHref(q);try{h.pushState(K,"",re)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;o.location.assign(re)}u&&p&&p({action:d,location:G.location,delta:1})}function x(V,z){d="REPLACE";let q=up(G.location,V,z);g=E();let K=yE(q,g),re=G.createHref(q);h.replaceState(K,"",re),u&&p&&p({action:d,location:G.location,delta:0})}function M(V){let z=o.location.origin!=="null"?o.location.origin:o.location.href,q=typeof V=="string"?V:mu(V);return q=q.replace(/ $/,"%20"),ht(z,`No window.location.(origin|href) available to create URL for href: ${q}`),new URL(q,z)}let G={get action(){return d},get location(){return r(o,h)},listen(V){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(gE,S),p=V,()=>{o.removeEventListener(gE,S),p=null}},createHref(V){return e(o,V)},createURL:M,encodeLocation(V){let z=M(V);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:R,replace:x,go(V){return h.go(V)}};return G}function _T(r,e,t="/"){return MR(r,e,t,!1)}function MR(r,e,t,s){let o=typeof e=="string"?Lo(e):e,u=Ts(o.pathname||"/",t);if(u==null)return null;let h=vT(r);VR(h);let d=null;for(let p=0;d==null&&p<h.length;++p){let g=KR(u);d=GR(h[p],g,s)}return d}function vT(r,e=[],t=[],s=""){let o=(u,h,d)=>{let p={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};p.relativePath.startsWith("/")&&(ht(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=gi([s,p.relativePath]),E=t.concat(p);u.children&&u.children.length>0&&(ht(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),vT(u.children,e,E,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:FR(g,u.index),routesMeta:E})};return r.forEach((u,h)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))o(u,h);else for(let p of ET(u.path))o(u,h,p)}),e}function ET(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=ET(s.join("/")),d=[];return d.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&d.push(...h),d.map(p=>r.startsWith("/")&&p===""?"/":p)}function VR(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:HR(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var UR=/^:[\w-]+$/,LR=3,jR=2,BR=1,zR=10,qR=-2,_E=r=>r==="*";function FR(r,e){let t=r.split("/"),s=t.length;return t.some(_E)&&(s+=qR),e&&(s+=jR),t.filter(o=>!_E(o)).reduce((o,u)=>o+(UR.test(u)?LR:u===""?BR:zR),s)}function HR(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function GR(r,e,t=!1){let{routesMeta:s}=r,o={},u="/",h=[];for(let d=0;d<s.length;++d){let p=s[d],g=d===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",S=Nh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),R=p.route;if(!S&&g&&t&&!s[s.length-1].route.index&&(S=Nh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!S)return null;Object.assign(o,S.params),h.push({params:o,pathname:gi([u,S.pathname]),pathnameBase:WR(gi([u,S.pathnameBase])),route:R}),S.pathnameBase!=="/"&&(u=gi([u,S.pathnameBase]))}return h}function Nh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=$R(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:S},R)=>{if(E==="*"){let M=d[R]||"";h=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const x=d[R];return S&&!x?g[E]=void 0:g[E]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:r}}function $R(r,e=!1,t=!0){Or(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,p)=>(s.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function KR(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Or(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ts(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function QR(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Lo(r):r;return{pathname:t?t.startsWith("/")?t:YR(t,e):e,search:ZR(s),hash:JR(o)}}function YR(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Fm(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XR(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function TT(r){let e=XR(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function bT(r,e,t,s=!1){let o;typeof r=="string"?o=Lo(r):(o={...r},ht(!o.pathname||!o.pathname.includes("?"),Fm("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),Fm("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),Fm("#","search","hash",o)));let u=r===""||o.pathname==="",h=u?"/":o.pathname,d;if(h==null)d=t;else{let S=e.length-1;if(!s&&h.startsWith("..")){let R=h.split("/");for(;R[0]==="..";)R.shift(),S-=1;o.pathname=R.join("/")}d=S>=0?e[S]:"/"}let p=QR(o,d),g=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var gi=r=>r.join("/").replace(/\/\/+/g,"/"),WR=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ZR=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,JR=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function eI(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var wT=["POST","PUT","PATCH","DELETE"];new Set(wT);var tI=["GET",...wT];new Set(tI);var jo=j.createContext(null);jo.displayName="DataRouter";var rf=j.createContext(null);rf.displayName="DataRouterState";var ST=j.createContext({isTransitioning:!1});ST.displayName="ViewTransition";var nI=j.createContext(new Map);nI.displayName="Fetchers";var rI=j.createContext(null);rI.displayName="Await";var Mr=j.createContext(null);Mr.displayName="Navigation";var Ru=j.createContext(null);Ru.displayName="Location";var Si=j.createContext({outlet:null,matches:[],isDataRoute:!1});Si.displayName="Route";var Fp=j.createContext(null);Fp.displayName="RouteError";function iI(r,{relative:e}={}){ht(Iu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=j.useContext(Mr),{hash:o,pathname:u,search:h}=Cu(r,{relative:e}),d=u;return t!=="/"&&(d=u==="/"?t:gi([t,u])),s.createHref({pathname:d,search:h,hash:o})}function Iu(){return j.useContext(Ru)!=null}function Ai(){return ht(Iu(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Ru).location}var AT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RT(r){j.useContext(Mr).static||j.useLayoutEffect(r)}function Vr(){let{isDataRoute:r}=j.useContext(Si);return r?yI():sI()}function sI(){ht(Iu(),"useNavigate() may be used only in the context of a <Router> component.");let r=j.useContext(jo),{basename:e,navigator:t}=j.useContext(Mr),{matches:s}=j.useContext(Si),{pathname:o}=Ai(),u=JSON.stringify(TT(s)),h=j.useRef(!1);return RT(()=>{h.current=!0}),j.useCallback((p,g={})=>{if(Or(h.current,AT),!h.current)return;if(typeof p=="number"){t.go(p);return}let E=bT(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:gi([e,E.pathname])),(g.replace?t.replace:t.push)(E,g.state,g)},[e,t,u,o,r])}j.createContext(null);function Cu(r,{relative:e}={}){let{matches:t}=j.useContext(Si),{pathname:s}=Ai(),o=JSON.stringify(TT(t));return j.useMemo(()=>bT(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function aI(r,e){return IT(r,e)}function IT(r,e,t,s){var q;ht(Iu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=j.useContext(Mr),{matches:h}=j.useContext(Si),d=h[h.length-1],p=d?d.params:{},g=d?d.pathname:"/",E=d?d.pathnameBase:"/",S=d&&d.route;{let K=S&&S.path||"";CT(g,!S||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let R=Ai(),x;if(e){let K=typeof e=="string"?Lo(e):e;ht(E==="/"||((q=K.pathname)==null?void 0:q.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${K.pathname}" was given in the \`location\` prop.`),x=K}else x=R;let M=x.pathname||"/",G=M;if(E!=="/"){let K=E.replace(/^\//,"").split("/");G="/"+M.replace(/^\//,"").split("/").slice(K.length).join("/")}let V=!u&&t&&t.matches&&t.matches.length>0?t.matches:_T(r,{pathname:G});Or(S||V!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Or(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=hI(V&&V.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:gi([E,o.encodeLocation?o.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?E:gi([E,o.encodeLocation?o.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),h,t,s);return e&&z?j.createElement(Ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},z):z}function oI(){let r=gI(),e=eI(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:o},t):null,h)}var lI=j.createElement(oI,null),uI=class extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?j.createElement(Si.Provider,{value:this.props.routeContext},j.createElement(Fp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cI({routeContext:r,match:e,children:t}){let s=j.useContext(jo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Si.Provider,{value:r},t)}function hI(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,u=t==null?void 0:t.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);ht(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:E,errors:S}=t,R=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||R){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,g,E)=>{let S,R=!1,x=null,M=null;t&&(S=u&&g.route.id?u[g.route.id]:void 0,x=g.route.errorElement||lI,h&&(d<0&&E===0?(CT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,M=null):d===E&&(R=!0,M=g.route.hydrateFallbackElement||null)));let G=e.concat(o.slice(0,E+1)),V=()=>{let z;return S?z=x:R?z=M:g.route.Component?z=j.createElement(g.route.Component,null):g.route.element?z=g.route.element:z=p,j.createElement(cI,{match:g,routeContext:{outlet:p,matches:G,isDataRoute:t!=null},children:z})};return t&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?j.createElement(uI,{location:t.location,revalidation:t.revalidation,component:x,error:S,children:V(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):V()},null)}function Hp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fI(r){let e=j.useContext(jo);return ht(e,Hp(r)),e}function dI(r){let e=j.useContext(rf);return ht(e,Hp(r)),e}function mI(r){let e=j.useContext(Si);return ht(e,Hp(r)),e}function Gp(r){let e=mI(r),t=e.matches[e.matches.length-1];return ht(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function pI(){return Gp("useRouteId")}function gI(){var s;let r=j.useContext(Fp),e=dI("useRouteError"),t=Gp("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function yI(){let{router:r}=fI("useNavigate"),e=Gp("useNavigate"),t=j.useRef(!1);return RT(()=>{t.current=!0}),j.useCallback(async(o,u={})=>{Or(t.current,AT),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var vE={};function CT(r,e,t){!e&&!vE[r]&&(vE[r]=!0,Or(!1,t))}j.memo(_I);function _I({routes:r,future:e,state:t}){return IT(r,void 0,t,e)}function hi(r){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vI({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:u=!1}){ht(!Iu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof t=="string"&&(t=Lo(t));let{pathname:p="/",search:g="",hash:E="",state:S=null,key:R="default"}=t,x=j.useMemo(()=>{let M=Ts(p,h);return M==null?null:{location:{pathname:M,search:g,hash:E,state:S,key:R},navigationType:s}},[h,p,g,E,S,R,s]);return Or(x!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:j.createElement(Mr.Provider,{value:d},j.createElement(Ru.Provider,{children:e,value:x}))}function EI({children:r,location:e}){return aI(cp(r),e)}function cp(r,e=[]){let t=[];return j.Children.forEach(r,(s,o)=>{if(!j.isValidElement(s))return;let u=[...e,o];if(s.type===j.Fragment){t.push.apply(t,cp(s.props.children,u));return}ht(s.type===hi,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=cp(s.props.children,u)),t.push(h)}),t}var yh="get",_h="application/x-www-form-urlencoded";function sf(r){return r!=null&&typeof r.tagName=="string"}function TI(r){return sf(r)&&r.tagName.toLowerCase()==="button"}function bI(r){return sf(r)&&r.tagName.toLowerCase()==="form"}function wI(r){return sf(r)&&r.tagName.toLowerCase()==="input"}function SI(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function AI(r,e){return r.button===0&&(!e||e==="_self")&&!SI(r)}var lh=null;function RI(){if(lh===null)try{new FormData(document.createElement("form"),0),lh=!1}catch{lh=!0}return lh}var II=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hm(r){return r!=null&&!II.has(r)?(Or(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):r}function CI(r,e){let t,s,o,u,h;if(bI(r)){let d=r.getAttribute("action");s=d?Ts(d,e):null,t=r.getAttribute("method")||yh,o=Hm(r.getAttribute("enctype"))||_h,u=new FormData(r)}else if(TI(r)||wI(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||d.getAttribute("action");if(s=p?Ts(p,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||yh,o=Hm(r.getAttribute("formenctype"))||Hm(d.getAttribute("enctype"))||_h,u=new FormData(d,r),!RI()){let{name:g,type:E,value:S}=r;if(E==="image"){let R=g?`${g}.`:"";u.append(`${R}x`,"0"),u.append(`${R}y`,"0")}else g&&u.append(g,S)}}else{if(sf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yh,s=null,o=_h,h=r}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:u,body:h}}function $p(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function NI(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xI(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function DI(r,e,t){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await NI(u,t);return h.links?h.links():[]}return[]}));return MI(s.flat(1).filter(xI).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function EE(r,e,t,s,o,u){let h=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var E;return t[g].pathname!==p.pathname||((E=t[g].route.path)==null?void 0:E.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>h(p,g)||d(p,g)):u==="data"?e.filter((p,g)=>{var S;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(h(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let R=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=t[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function OI(r,e,{includeHydrateFallback:t}={}){return kI(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function kI(r){return[...new Set(r)]}function PI(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function MI(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(PI(o));return t.has(u)||(t.add(u),s.push({key:u,link:o})),s},[])}function VI(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function UI(){let r=j.useContext(jo);return $p(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function LI(){let r=j.useContext(rf);return $p(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Kp=j.createContext(void 0);Kp.displayName="FrameworkContext";function NT(){let r=j.useContext(Kp);return $p(r,"You must render this element inside a <HydratedRouter> element"),r}function jI(r,e){let t=j.useContext(Kp),[s,o]=j.useState(!1),[u,h]=j.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:S}=e,R=j.useRef(null);j.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let G=z=>{z.forEach(q=>{h(q.isIntersecting)})},V=new IntersectionObserver(G,{threshold:.5});return R.current&&V.observe(R.current),()=>{V.disconnect()}}},[r]),j.useEffect(()=>{if(s){let G=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(G)}}},[s]);let x=()=>{o(!0)},M=()=>{o(!1),h(!1)};return t?r!=="intent"?[u,R,{}]:[u,R,{onFocus:Jl(d,x),onBlur:Jl(p,M),onMouseEnter:Jl(g,x),onMouseLeave:Jl(E,M),onTouchStart:Jl(S,x)}]:[!1,R,{}]}function Jl(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function BI({page:r,...e}){let{router:t}=UI(),s=j.useMemo(()=>_T(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?j.createElement(qI,{page:r,matches:s,...e}):null}function zI(r){let{manifest:e,routeModules:t}=NT(),[s,o]=j.useState([]);return j.useEffect(()=>{let u=!1;return DI(r,e,t).then(h=>{u||o(h)}),()=>{u=!0}},[r,e,t]),s}function qI({page:r,matches:e,...t}){let s=Ai(),{manifest:o,routeModules:u}=NT(),{loaderData:h,matches:d}=LI(),p=j.useMemo(()=>EE(r,e,d,o,s,"data"),[r,e,d,o,s]),g=j.useMemo(()=>EE(r,e,d,o,s,"assets"),[r,e,d,o,s]),E=j.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let x=new Set,M=!1;if(e.forEach(V=>{var q;let z=o.routes[V.route.id];!z||!z.hasLoader||(!p.some(K=>K.route.id===V.route.id)&&V.route.id in h&&((q=u[V.route.id])!=null&&q.shouldRevalidate)||z.hasClientLoader?M=!0:x.add(V.route.id))}),x.size===0)return[];let G=VI(r);return M&&x.size>0&&G.searchParams.set("_routes",e.filter(V=>x.has(V.route.id)).map(V=>V.route.id).join(",")),[G.pathname+G.search]},[h,s,o,p,e,r,u]),S=j.useMemo(()=>OI(g,o),[g,o]),R=zI(g);return j.createElement(j.Fragment,null,E.map(x=>j.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),S.map(x=>j.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),R.map(({key:x,link:M})=>j.createElement("link",{key:x,...M})))}function FI(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var xT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xT&&(window.__reactRouterVersion="7.2.0")}catch{}function HI({basename:r,children:e,window:t}){let s=j.useRef();s.current==null&&(s.current=OR({window:t,v5Compat:!0}));let o=s.current,[u,h]=j.useState({action:o.action,location:o.location}),d=j.useCallback(p=>{j.startTransition(()=>h(p))},[h]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.createElement(vI,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var DT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pu=j.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:d,target:p,to:g,preventScrollReset:E,viewTransition:S,...R},x){let{basename:M}=j.useContext(Mr),G=typeof g=="string"&&DT.test(g),V,z=!1;if(typeof g=="string"&&G&&(V=g,xT))try{let b=new URL(window.location.href),I=g.startsWith("//")?new URL(b.protocol+g):new URL(g),D=Ts(I.pathname,M);I.origin===b.origin&&D!=null?g=D+I.search+I.hash:z=!0}catch{Or(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=iI(g,{relative:o}),[K,re,se]=jI(s,R),Z=QI(g,{replace:h,state:d,target:p,preventScrollReset:E,relative:o,viewTransition:S});function P(b){e&&e(b),b.defaultPrevented||Z(b)}let C=j.createElement("a",{...R,...se,href:V||q,onClick:z||u?e:P,ref:FI(x,re),target:p,"data-discover":!G&&t==="render"?"true":void 0});return K&&!G?j.createElement(j.Fragment,null,C,j.createElement(BI,{page:q})):C});pu.displayName="Link";var GI=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:d,children:p,...g},E){let S=Cu(h,{relative:g.relative}),R=Ai(),x=j.useContext(rf),{navigator:M,basename:G}=j.useContext(Mr),V=x!=null&&JI(S)&&d===!0,z=M.encodeLocation?M.encodeLocation(S).pathname:S.pathname,q=R.pathname,K=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(q=q.toLowerCase(),K=K?K.toLowerCase():null,z=z.toLowerCase()),K&&G&&(K=Ts(K,G)||K);const re=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let se=q===z||!o&&q.startsWith(z)&&q.charAt(re)==="/",Z=K!=null&&(K===z||!o&&K.startsWith(z)&&K.charAt(z.length)==="/"),P={isActive:se,isPending:Z,isTransitioning:V},C=se?e:void 0,b;typeof s=="function"?b=s(P):b=[s,se?"active":null,Z?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let I=typeof u=="function"?u(P):u;return j.createElement(pu,{...g,"aria-current":C,className:b,ref:E,style:I,to:h,viewTransition:d},typeof p=="function"?p(P):p)});GI.displayName="NavLink";var $I=j.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:u,method:h=yh,action:d,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:S,...R},x)=>{let M=WI(),G=ZI(d,{relative:g}),V=h.toLowerCase()==="get"?"get":"post",z=typeof d=="string"&&DT.test(d),q=K=>{if(p&&p(K),K.defaultPrevented)return;K.preventDefault();let re=K.nativeEvent.submitter,se=(re==null?void 0:re.getAttribute("formmethod"))||h;M(re||K.currentTarget,{fetcherKey:e,method:se,navigate:t,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:S})};return j.createElement("form",{ref:x,method:V,action:G,onSubmit:s?p:q,...R,"data-discover":!z&&r==="render"?"true":void 0})});$I.displayName="Form";function KI(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OT(r){let e=j.useContext(jo);return ht(e,KI(r)),e}function QI(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:u,viewTransition:h}={}){let d=Vr(),p=Ai(),g=Cu(r,{relative:u});return j.useCallback(E=>{if(AI(E,e)){E.preventDefault();let S=t!==void 0?t:mu(p)===mu(g);d(r,{replace:S,state:s,preventScrollReset:o,relative:u,viewTransition:h})}},[p,d,g,t,s,e,r,o,u,h])}var YI=0,XI=()=>`__${String(++YI)}__`;function WI(){let{router:r}=OT("useSubmit"),{basename:e}=j.useContext(Mr),t=pI();return j.useCallback(async(s,o={})=>{let{action:u,method:h,encType:d,formData:p,body:g}=CI(s,e);if(o.navigate===!1){let E=o.fetcherKey||XI();await r.fetch(E,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||d,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function ZI(r,{relative:e}={}){let{basename:t}=j.useContext(Mr),s=j.useContext(Si);ht(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Cu(r||".",{relative:e})},h=Ai();if(r==null){u.search=h.search;let d=new URLSearchParams(u.search),p=d.getAll("index");if(p.some(E=>E==="")){d.delete("index"),p.filter(S=>S).forEach(S=>d.append("index",S));let E=d.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:gi([t,u.pathname])),mu(u)}function JI(r,e={}){let t=j.useContext(ST);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=OT("useViewTransitionState"),o=Cu(r,{relative:e.relative});if(!t.isTransitioning)return!1;let u=Ts(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=Ts(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Nh(o.pathname,h)!=null||Nh(o.pathname,u)!=null}new TextEncoder;var TE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},e1=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[t++],h=r[t++],d=r[t++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},PT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,d=h?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,E=u>>2,S=(u&3)<<4|d>>4;let R=(d&15)<<2|g>>6,x=g&63;p||(x=64,h||(R=64)),s.push(t[E],t[S],t[R],t[x])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(kT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):e1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const g=o<r.length?t[r.charAt(o)]:64;++o;const S=o<r.length?t[r.charAt(o)]:64;if(++o,u==null||d==null||g==null||S==null)throw new t1;const R=u<<2|d>>4;if(s.push(R),g!==64){const x=d<<4&240|g>>2;if(s.push(x),S!==64){const M=g<<6&192|S;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class t1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n1=function(r){const e=kT(r);return PT.encodeByteArray(e,!0)},xh=function(r){return n1(r).replace(/\./g,"")},MT=function(r){try{return PT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=()=>r1().__FIREBASE_DEFAULTS__,s1=()=>{if(typeof process>"u"||typeof TE>"u")return;const r=TE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},a1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&MT(r[1]);return e&&JSON.parse(e)},af=()=>{try{return i1()||s1()||a1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},VT=r=>{var e,t;return(t=(e=af())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},UT=r=>{const e=VT(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},LT=()=>{var r;return(r=af())===null||r===void 0?void 0:r.config},jT=r=>{var e;return(e=af())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[xh(JSON.stringify(t)),xh(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function l1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function u1(){var r;const e=(r=af())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function c1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function h1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f1(){const r=on();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function d1(){return!u1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qT(){try{return typeof indexedDB=="object"}catch{return!1}}function FT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}function m1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="FirebaseError";class er extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=p1,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Aa.prototype.create)}}class Aa{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?g1(u,s):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new er(o,d,s)}}function g1(r,e){return r.replace(y1,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const y1=/\{\$([^}]+)}/g;function _1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function gu(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=r[o],h=e[o];if(bE(u)&&bE(h)){if(!gu(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function bE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function tu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function nu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function v1(r,e){const t=new E1(r,e);return t.subscribe.bind(t)}class E1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");T1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Gm),o.error===void 0&&(o.error=Gm),o.complete===void 0&&(o.complete=Gm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function T1(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Gm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=1e3,w1=2,S1=4*60*60*1e3,A1=.5;function wE(r,e=b1,t=w1){const s=e*Math.pow(t,r),o=Math.round(A1*s*(Math.random()-.5)*2);return Math.min(S1,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(r){return r&&r._delegate?r._delegate:r}class Zn{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new o1;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(C1(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);s===d&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:I1(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function I1(r){return r===ca?void 0:r}function C1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new R1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Me||(Me={}));const x1={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},D1=Me.INFO,O1={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},k1=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=O1[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class of{constructor(e){this.name=e,this._logLevel=D1,this._logHandler=k1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const P1=(r,e)=>e.some(t=>r instanceof t);let SE,AE;function M1(){return SE||(SE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V1(){return AE||(AE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HT=new WeakMap,hp=new WeakMap,GT=new WeakMap,$m=new WeakMap,Qp=new WeakMap;function U1(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{t(ys(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&HT.set(t,r)}).catch(()=>{}),Qp.set(e,r),e}function L1(r){if(hp.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});hp.set(r,e)}let fp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return hp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||GT.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ys(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function j1(r){fp=r(fp)}function B1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Km(this),e,...t);return GT.set(s,e.sort?e.sort():[e]),ys(s)}:V1().includes(r)?function(...e){return r.apply(Km(this),e),ys(HT.get(this))}:function(...e){return ys(r.apply(Km(this),e))}}function z1(r){return typeof r=="function"?B1(r):(r instanceof IDBTransaction&&L1(r),P1(r,M1())?new Proxy(r,fp):r)}function ys(r){if(r instanceof IDBRequest)return U1(r);if($m.has(r))return $m.get(r);const e=z1(r);return e!==r&&($m.set(r,e),Qp.set(e,r)),e}const Km=r=>Qp.get(r);function $T(r,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,e),d=ys(h);return s&&h.addEventListener("upgradeneeded",p=>{s(ys(h.result),p.oldVersion,p.newVersion,ys(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const q1=["get","getKey","getAll","getAllKeys","count"],F1=["put","add","delete","clear"],Qm=new Map;function RE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Qm.get(e))return Qm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=F1.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||q1.includes(t)))return;const u=async function(h,...d){const p=this.transaction(h,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),o&&p.done]))[0]};return Qm.set(e,u),u}j1(r=>({...r,get:(e,t,s)=>RE(e,t)||r.get(e,t,s),has:(e,t)=>!!RE(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(G1(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function G1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dp="@firebase/app",IE="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new of("@firebase/app"),$1="@firebase/app-compat",K1="@firebase/analytics-compat",Q1="@firebase/analytics",Y1="@firebase/app-check-compat",X1="@firebase/app-check",W1="@firebase/auth",Z1="@firebase/auth-compat",J1="@firebase/database",eC="@firebase/data-connect",tC="@firebase/database-compat",nC="@firebase/functions",rC="@firebase/functions-compat",iC="@firebase/installations",sC="@firebase/installations-compat",aC="@firebase/messaging",oC="@firebase/messaging-compat",lC="@firebase/performance",uC="@firebase/performance-compat",cC="@firebase/remote-config",hC="@firebase/remote-config-compat",fC="@firebase/storage",dC="@firebase/storage-compat",mC="@firebase/firestore",pC="@firebase/vertexai",gC="@firebase/firestore-compat",yC="firebase",_C="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="[DEFAULT]",vC={[dp]:"fire-core",[$1]:"fire-core-compat",[Q1]:"fire-analytics",[K1]:"fire-analytics-compat",[X1]:"fire-app-check",[Y1]:"fire-app-check-compat",[W1]:"fire-auth",[Z1]:"fire-auth-compat",[J1]:"fire-rtdb",[eC]:"fire-data-connect",[tC]:"fire-rtdb-compat",[nC]:"fire-fn",[rC]:"fire-fn-compat",[iC]:"fire-iid",[sC]:"fire-iid-compat",[aC]:"fire-fcm",[oC]:"fire-fcm-compat",[lC]:"fire-perf",[uC]:"fire-perf-compat",[cC]:"fire-rc",[hC]:"fire-rc-compat",[fC]:"fire-gcs",[dC]:"fire-gcs-compat",[mC]:"fire-fst",[gC]:"fire-fst-compat",[pC]:"fire-vertex","fire-js":"fire-js",[yC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Map,EC=new Map,pp=new Map;function CE(r,e){try{r.container.addComponent(e)}catch(t){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function lr(r){const e=r.name;if(pp.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;pp.set(e,r);for(const t of Dh.values())CE(t,r);for(const t of EC.values())CE(t,r);return!0}function Ns(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function mn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new Aa("app","Firebase",TC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=_C;function KT(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:mp,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw _s.create("bad-app-name",{appName:String(o)});if(t||(t=LT()),!t)throw _s.create("no-options");const u=Dh.get(o);if(u){if(gu(t,u.options)&&gu(s,u.config))return u;throw _s.create("duplicate-app",{appName:o})}const h=new N1(o);for(const p of pp.values())h.addComponent(p);const d=new bC(t,s,h);return Dh.set(o,d),d}function lf(r=mp){const e=Dh.get(r);if(!e&&r===mp&&LT())return KT();if(!e)throw _s.create("no-app",{appName:r});return e}function Tn(r,e,t){var s;let o=(s=vC[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const d=[`Unable to register library "${o}" with version "${e}":`];u&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(d.join(" "));return}lr(new Zn(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="firebase-heartbeat-database",SC=1,yu="firebase-heartbeat-store";let Ym=null;function QT(){return Ym||(Ym=$T(wC,SC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(yu)}catch(t){console.warn(t)}}}}).catch(r=>{throw _s.create("idb-open",{originalErrorMessage:r.message})})),Ym}async function AC(r){try{const t=(await QT()).transaction(yu),s=await t.objectStore(yu).get(YT(r));return await t.done,s}catch(e){if(e instanceof er)_i.warn(e.message);else{const t=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_i.warn(t.message)}}}async function NE(r,e){try{const s=(await QT()).transaction(yu,"readwrite");await s.objectStore(yu).put(e,YT(r)),await s.done}catch(t){if(t instanceof er)_i.warn(t.message);else{const s=_s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_i.warn(s.message)}}}function YT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=1024,IC=30;class CC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=xE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>IC){const h=DC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){_i.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xE(),{heartbeatsToSend:s,unsentEntries:o}=NC(this._heartbeatsCache.heartbeats),u=xh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return _i.warn(t),""}}}function xE(){return new Date().toISOString().substring(0,10)}function NC(r,e=RC){const t=[];let s=r.slice();for(const o of r){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),DE(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),DE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class xC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qT()?FT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await AC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return NE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return NE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function DE(r){return xh(JSON.stringify({version:2,heartbeats:r})).length}function DC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(r){lr(new Zn("platform-logger",e=>new H1(e),"PRIVATE")),lr(new Zn("heartbeat",e=>new CC(e),"PRIVATE")),Tn(dp,IE,r),Tn(dp,IE,"esm2017"),Tn("fire-js","")}OC("");function Yp(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function XT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kC=XT,WT=new Aa("auth","Firebase",XT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new of("@firebase/auth");function PC(r,...e){Oh.logLevel<=Me.WARN&&Oh.warn(`Auth (${Ra}): ${r}`,...e)}function vh(r,...e){Oh.logLevel<=Me.ERROR&&Oh.error(`Auth (${Ra}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(r,...e){throw Wp(r,...e)}function or(r,...e){return Wp(r,...e)}function Xp(r,e,t){const s=Object.assign(Object.assign({},kC()),{[e]:t});return new Aa("auth","Firebase",s).create(e,{appName:r.name})}function Cr(r){return Xp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function MC(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Jn(r,"argument-error"),Xp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return WT.create(r,...e)}function Ae(r,e,...t){if(!r)throw Wp(e,...t)}function di(r){const e="INTERNAL ASSERTION FAILED: "+r;throw vh(e),new Error(e)}function vi(r,e){r||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function VC(){return OE()==="http:"||OE()==="https:"}function OE(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VC()||zT()||"connection"in navigator)?navigator.onLine:!0}function LC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,vi(t>e,"Short delay should be less than long delay!"),this.isMobile=l1()||h1()}get(){return UC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(r,e){vi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new xu(3e4,6e4);function Ri(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ur(r,e,t,s,o={}){return JT(r,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const d=Nu(Object.assign({key:r.config.apiKey},h)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:p},u);return c1()||(g.referrerPolicy="no-referrer"),ZT.fetch()(eb(r,r.config.apiHost,t,d),g)})}async function JT(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},jC),e);try{const o=new qC(r),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw uh(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const d=u.ok?h.errorMessage:h.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw uh(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw uh(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw uh(r,"user-disabled",h);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Xp(r,E,g);Jn(r,E)}}catch(o){if(o instanceof er)throw o;Jn(r,"network-request-failed",{message:String(o)})}}async function Du(r,e,t,s,o={}){const u=await Ur(r,e,t,s,o);return"mfaPendingCredential"in u&&Jn(r,"multi-factor-auth-required",{_serverResponse:u}),u}function eb(r,e,t,s){const o=`${e}${t}?${s}`;return r.config.emulator?Zp(r.config,o):`${r.config.apiScheme}://${o}`}function zC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(or(this.auth,"network-request-failed")),BC.get())})}}function uh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=or(r,e,s);return o.customData._tokenResponse=t,o}function kE(r){return r!==void 0&&r.enterprise!==void 0}class FC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HC(r,e){return Ur(r,"GET","/v2/recaptchaConfig",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(r,e){return Ur(r,"POST","/v1/accounts:delete",e)}async function tb(r,e){return Ur(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $C(r,e=!1){const t=We(r),s=await t.getIdToken(e),o=Jp(s);Ae(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:ou(Xm(o.auth_time)),issuedAtTime:ou(Xm(o.iat)),expirationTime:ou(Xm(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Xm(r){return Number(r)*1e3}function Jp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const o=MT(t);return o?JSON.parse(o):(vh("Failed to decode base64 JWT payload"),null)}catch(o){return vh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function PE(r){const e=Jp(r);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof er&&KC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function KC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kh(r){var e;const t=r.auth,s=await r.getIdToken(),o=await xo(r,tb(t,{idToken:s}));Ae(o==null?void 0:o.users.length,t,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?nb(u.providerUserInfo):[],d=XC(r.providerData,h),p=r.isAnonymous,g=!(r.email&&u.passwordHash)&&!(d!=null&&d.length),E=p?g:!1,S={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:d,metadata:new yp(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(r,S)}async function YC(r){const e=We(r);await kh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XC(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function nb(r){return r.map(e=>{var{providerId:t}=e,s=Yp(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(r,e){const t=await JT(r,{},async()=>{const s=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=eb(r,o,"/v1/token",`key=${u}`),d=await r._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",ZT.fetch()(h,{method:"POST",headers:d,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZC(r,e){return Ur(r,"POST","/v2/accounts:revokeToken",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=PE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await WC(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,h=new Ao;return s&&(Ae(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ae(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Ae(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(r,e){Ae(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class mi{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,u=Yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new yp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await xo(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $C(this,e)}reload(){return YC(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await kh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await xo(this,GC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,u,h,d,p,g,E;const S=(s=t.displayName)!==null&&s!==void 0?s:void 0,R=(o=t.email)!==null&&o!==void 0?o:void 0,x=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,M=(h=t.photoURL)!==null&&h!==void 0?h:void 0,G=(d=t.tenantId)!==null&&d!==void 0?d:void 0,V=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,z=(g=t.createdAt)!==null&&g!==void 0?g:void 0,q=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:K,emailVerified:re,isAnonymous:se,providerData:Z,stsTokenManager:P}=t;Ae(K&&P,e,"internal-error");const C=Ao.fromJSON(this.name,P);Ae(typeof K=="string",e,"internal-error"),hs(S,e.name),hs(R,e.name),Ae(typeof re=="boolean",e,"internal-error"),Ae(typeof se=="boolean",e,"internal-error"),hs(x,e.name),hs(M,e.name),hs(G,e.name),hs(V,e.name),hs(z,e.name),hs(q,e.name);const b=new mi({uid:K,auth:e,email:R,emailVerified:re,displayName:S,isAnonymous:se,photoURL:M,phoneNumber:x,tenantId:G,stsTokenManager:C,createdAt:z,lastLoginAt:q});return Z&&Array.isArray(Z)&&(b.providerData=Z.map(I=>Object.assign({},I))),V&&(b._redirectEventId=V),b}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ao;o.updateFromServerResponse(t);const u=new mi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await kh(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ae(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?nb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),d=new Ao;d.updateFromIdToken(s);const p=new mi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new yp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=new Map;function pi(r){vi(r instanceof Function,"Expected a class definition");let e=ME.get(r);return e?(vi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ME.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rb.type="NONE";const VE=rb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(r,e,t){return`firebase:${r}:${e}:${t}`}class Ro{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Eh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Eh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ro(pi(VE),e,s);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||pi(VE);const h=Eh(s,e.config.apiKey,e.name);let d=null;for(const g of t)try{const E=await g._get(h);if(E){const S=mi._fromJSON(e,E);g!==u&&(d=S),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Ro(u,e,s):(u=p[0],d&&await u._set(h,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new Ro(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ob(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ib(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ub(e))return"Blackberry";if(cb(e))return"Webos";if(sb(e))return"Safari";if((e.includes("chrome/")||ab(e))&&!e.includes("edge/"))return"Chrome";if(lb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ib(r=on()){return/firefox\//i.test(r)}function sb(r=on()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ab(r=on()){return/crios\//i.test(r)}function ob(r=on()){return/iemobile/i.test(r)}function lb(r=on()){return/android/i.test(r)}function ub(r=on()){return/blackberry/i.test(r)}function cb(r=on()){return/webos/i.test(r)}function eg(r=on()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function JC(r=on()){var e;return eg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eN(){return f1()&&document.documentMode===10}function hb(r=on()){return eg(r)||lb(r)||cb(r)||ub(r)||/windows phone/i.test(r)||ob(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r,e=[]){let t;switch(r){case"Browser":t=UE(on());break;case"Worker":t=`${UE(on())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ra}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((h,d)=>{try{const p=e(u);h(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(r,e={}){return Ur(r,"GET","/v2/passwordPolicy",Ri(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=6;class iN{constructor(e){var t,s,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:rN,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,u,h,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LE(this),this.idTokenSubscription=new LE(this),this.beforeStateQueue=new tN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pi(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await tb(this,{idToken:e}),s=await mi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(mn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===d)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(Cr(this));const t=e?We(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nN(this),t=new iN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Aa("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await ZC(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pi(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(d,this,"internal-error"),d.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&PC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ii(r){return We(r)}class LE{constructor(e){this.auth=e,this.observer=null,this.addObserver=v1(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aN(r){uf=r}function db(r){return uf.loadJS(r)}function oN(){return uf.recaptchaEnterpriseScript}function lN(){return uf.gapiScript}function uN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class cN{constructor(){this.enterprise=new hN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class hN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const fN="recaptcha-enterprise",mb="NO_RECAPTCHA";class dN{constructor(e){this.type=fN,this.auth=Ii(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,d)=>{HC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new FC(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(p=>{d(p)})})}function o(u,h,d){const p=window.grecaptcha;kE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(mb)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cN().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(d=>{if(!t&&kE(window.grecaptcha))o(d,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=oN();p.length!==0&&(p+=d),db(p).then(()=>{o(d,u,h)}).catch(g=>{h(g)})}}).catch(d=>{h(d)})})}}async function jE(r,e,t,s=!1,o=!1){const u=new dN(r);let h;if(o)h=mb;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:h}):Object.assign(d,{captchaResponse:h}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Ph(r,e,t,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await jE(r,e,t,t==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await jE(r,e,t,t==="getOobCode");return s(r,d)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(r,e){const t=Ns(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(gu(u,e??{}))return o;Jn(o,"already-initialized")}return t.initialize({options:e})}function pN(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(pi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function gN(r,e,t){const s=Ii(r);Ae(s._canInitEmulator,s,"emulator-config-failed"),Ae(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=pb(e),{host:h,port:d}=yN(e),p=d===null?"":`:${d}`;s.config.emulator={url:`${u}//${h}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:h,port:d,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),_N()}function pb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function yN(r){const e=pb(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:BE(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:BE(h)}}}function BE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function _N(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,t){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}async function vN(r,e){return Ur(r,"POST","/v1/accounts:update",e)}async function EN(r,e){return Ur(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(r,e){return Du(r,"POST","/v1/accounts:signInWithPassword",Ri(r,e))}async function bN(r,e){return Ur(r,"POST","/v1/accounts:sendOobCode",Ri(r,e))}async function wN(r,e){return bN(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(r,e){return Du(r,"POST","/v1/accounts:signInWithEmailLink",Ri(r,e))}async function AN(r,e){return Du(r,"POST","/v1/accounts:signInWithEmailLink",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends tg{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new _u(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new _u(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ph(e,t,"signInWithPassword",TN);case"emailLink":return SN(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ph(e,s,"signUpPassword",EN);case"emailLink":return AN(e,{idToken:t,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(r,e){return Du(r,"POST","/v1/accounts:signInWithIdp",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="http://localhost";class ga extends tg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,u=Yp(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new ga(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Io(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Io(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Io(e,t)}buildRequest(){const e={requestUri:RN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CN(r){const e=tu(nu(r)).link,t=e?tu(nu(e)).deep_link_id:null,s=tu(nu(r)).deep_link_id;return(s?tu(nu(s)).link:null)||s||t||e||r}class ng{constructor(e){var t,s,o,u,h,d;const p=tu(nu(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,S=IN((o=p.mode)!==null&&o!==void 0?o:null);Ae(g&&E&&S,"argument-error"),this.apiKey=g,this.operation=S,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=CN(e);try{return new ng(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,t){return _u._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=ng.parseLink(t);return Ae(s,"argument-error"),_u._fromEmailAndCode(e,s.code,s.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends rg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Ou{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ga._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return fi.credential(t,s)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Ou{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Ou{constructor(){super("twitter.com")}static credential(e,t){return ga._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ms.credential(t,s)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(r,e){return Du(r,"POST","/v1/accounts:signUp",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await mi._fromIdTokenResponse(e,s,o),h=zE(s);return new ya({user:u,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=zE(s);return new ya({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function zE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends er{constructor(e,t,s,o){var u;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Mh(e,t,s,o)}}function gb(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(r,u,e,s):u})}async function xN(r,e,t=!1){const s=await xo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ya._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(r,e,t=!1){const{auth:s}=r;if(mn(s.app))return Promise.reject(Cr(s));const o="reauthenticate";try{const u=await xo(r,gb(s,o,e,r),t);Ae(u.idToken,s,"internal-error");const h=Jp(u.idToken);Ae(h,s,"internal-error");const{sub:d}=h;return Ae(r.uid===d,s,"user-mismatch"),ya._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Jn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(r,e,t=!1){if(mn(r.app))return Promise.reject(Cr(r));const s="signIn",o=await gb(r,s,e),u=await ya._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(u.user),u}async function ON(r,e){return yb(Ii(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(r){const e=Ii(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kN(r,e,t){const s=Ii(r);await Ph(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",wN)}async function PN(r,e,t){if(mn(r.app))return Promise.reject(Cr(r));const s=Ii(r),h=await Ph(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NN).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&_b(r),p}),d=await ya._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(d.user),d}function MN(r,e,t){return mn(r.app)?Promise.reject(Cr(r)):ON(We(r),Bo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&_b(r),s})}function VN(r,e){const t=We(r);return mn(t.auth.app)?Promise.reject(Cr(t.auth)):vb(t,e,null)}function UN(r,e){return vb(We(r),null,e)}async function vb(r,e,t){const{auth:s}=r,u={idToken:await r.getIdToken(),returnSecureToken:!0};e&&(u.email=e),t&&(u.password=t);const h=await xo(r,vN(s,u));await r._updateTokensIfNecessary(h,!0)}function LN(r,e,t,s){return We(r).onIdTokenChanged(e,t,s)}function jN(r,e,t){return We(r).beforeAuthStateChanged(e,t)}function Eb(r,e,t,s){return We(r).onAuthStateChanged(e,t,s)}function ig(r){return We(r).signOut()}async function BN(r){return We(r).delete()}const Vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=1e3,qN=10;class bb extends Tb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,d,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);eN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,qN):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},zN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bb.type="LOCAL";const FN=bb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb extends Tb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wb.type="SESSION";const Sb=wb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new cf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(h).map(async g=>g(t.origin,u)),p=await HN(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((d,p)=>{const g=sg("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(S){const R=S;if(R.data.eventId===g)switch(R.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),d(R.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function $N(r){Nr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function KN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function YN(){return Ab()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="firebaseLocalStorageDb",XN=1,Uh="firebaseLocalStorage",Ib="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hf(r,e){return r.transaction([Uh],e?"readwrite":"readonly").objectStore(Uh)}function WN(){const r=indexedDB.deleteDatabase(Rb);return new ku(r).toPromise()}function _p(){const r=indexedDB.open(Rb,XN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Uh,{keyPath:Ib})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Uh)?e(s):(s.close(),await WN(),e(await _p()))})})}async function qE(r,e,t){const s=hf(r,!0).put({[Ib]:e,value:t});return new ku(s).toPromise()}async function ZN(r,e){const t=hf(r,!1).get(e),s=await new ku(t).toPromise();return s===void 0?null:s.value}function FE(r,e){const t=hf(r,!0).delete(e);return new ku(t).toPromise()}const JN=800,ex=3;class Cb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _p(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>ex)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ab()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cf._getInstance(YN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await KN(),!this.activeServiceWorker)return;this.sender=new GN(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _p();return await qE(e,Vh,"1"),await FE(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>qE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>ZN(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>FE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=hf(o,!1).getAll();return new ku(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cb.type="LOCAL";const tx=Cb;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(r,e){return e?pi(e):(Ae(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends tg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Io(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nx(r){return yb(r.auth,new ag(r),r.bypassAuthState)}function rx(r){const{auth:e,user:t}=r;return Ae(t,e,"internal-error"),DN(t,new ag(r),r.bypassAuthState)}async function ix(r){const{auth:e,user:t}=r;return Ae(t,e,"internal-error"),xN(t,new ag(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:h,type:d}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nx;case"linkViaPopup":case"linkViaRedirect":return ix;case"reauthViaPopup":case"reauthViaRedirect":return rx;default:Jn(this.auth,"internal-error")}}resolve(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new xu(2e3,1e4);async function ax(r,e,t){if(mn(r.app))return Promise.reject(or(r,"operation-not-supported-in-this-environment"));const s=Ii(r);MC(r,e,rg);const o=Nb(s,t);return new ha(s,"signInViaPopup",e,o).executeNotNull()}class ha extends xb{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){vi(this.filter.length===1,"Popup operations only handle one event");const e=sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sx.get())};e()}}ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="pendingRedirect",Th=new Map;class lx extends xb{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Th.get(this.auth._key());if(!e){try{const s=await ux(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Th.set(this.auth._key(),e)}return this.bypassAuthState||Th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ux(r,e){const t=fx(e),s=hx(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function cx(r,e){Th.set(r._key(),e)}function hx(r){return pi(r._redirectPersistence)}function fx(r){return Eh(ox,r.config.apiKey,r.name)}async function dx(r,e,t=!1){if(mn(r.app))return Promise.reject(Cr(r));const s=Ii(r),o=Nb(s,e),h=await new lx(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=10*60*1e3;class px{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Db(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(or(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mx&&this.cachedEventUids.clear(),this.cachedEventUids.has(HE(e))}saveEventToCache(e){this.cachedEventUids.add(HE(e)),this.lastProcessedEventTime=Date.now()}}function HE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Db({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Db(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(r,e={}){return Ur(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vx=/^https?/;async function Ex(r){if(r.config.emulator)return;const{authorizedDomains:e}=await yx(r);for(const t of e)try{if(Tx(t))return}catch{}Jn(r,"unauthorized-domain")}function Tx(r){const e=gp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!vx.test(t))return!1;if(_x.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new xu(3e4,6e4);function GE(){const r=Nr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function wx(r){return new Promise((e,t)=>{var s,o,u;function h(){GE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GE(),t(or(r,"network-request-failed"))},timeout:bx.get()})}if(!((o=(s=Nr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Nr().gapi)===null||u===void 0)&&u.load)h();else{const d=uN("iframefcb");return Nr()[d]=()=>{gapi.load?h():t(or(r,"network-request-failed"))},db(`${lN()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw bh=null,e})}let bh=null;function Sx(r){return bh=bh||wx(r),bh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new xu(5e3,15e3),Rx="__/auth/iframe",Ix="emulator/auth/iframe",Cx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xx(r){const e=r.config;Ae(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Zp(e,Ix):`https://${r.config.authDomain}/${Rx}`,s={apiKey:e.apiKey,appName:r.name,v:Ra},o=Nx.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${Nu(s).slice(1)}`}async function Dx(r){const e=await Sx(r),t=Nr().gapi;return Ae(t,r,"internal-error"),e.open({where:document.body,url:xx(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cx,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=or(r,"network-request-failed"),d=Nr().setTimeout(()=>{u(h)},Ax.get());function p(){Nr().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kx=500,Px=600,Mx="_blank",Vx="http://localhost";class $E{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ux(r,e,t,s=kx,o=Px){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p=Object.assign(Object.assign({},Ox),{width:s.toString(),height:o.toString(),top:u,left:h}),g=on().toLowerCase();t&&(d=ab(g)?Mx:t),ib(g)&&(e=e||Vx,p.scrollbars="yes");const E=Object.entries(p).reduce((R,[x,M])=>`${R}${x}=${M},`,"");if(JC(g)&&d!=="_self")return Lx(e||"",d),new $E(null);const S=window.open(e||"",d,E);Ae(S,r,"popup-blocked");try{S.focus()}catch{}return new $E(S)}function Lx(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="__/auth/handler",Bx="emulator/auth/handler",zx=encodeURIComponent("fac");async function KE(r,e,t,s,o,u){Ae(r.config.authDomain,r,"auth-domain-config-required"),Ae(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Ra,eventId:o};if(e instanceof rg){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",_1(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))h[E]=S}if(e instanceof Ou){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const d=h;for(const E of Object.keys(d))d[E]===void 0&&delete d[E];const p=await r._getAppCheckToken(),g=p?`#${zx}=${encodeURIComponent(p)}`:"";return`${qx(r)}?${Nu(d).slice(1)}${g}`}function qx({config:r}){return r.emulator?Zp(r,Bx):`https://${r.authDomain}/${jx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="webStorageSupport";class Fx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sb,this._completeRedirectFn=dx,this._overrideRedirectResult=cx}async _openPopup(e,t,s,o){var u;vi((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await KE(e,t,s,gp(),o);return Ux(e,h,sg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await KE(e,t,s,gp(),o);return $N(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(vi(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Dx(e),s=new px(e);return t.register("authEvent",o=>(Ae(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wm,{type:Wm},o=>{var u;const h=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Wm];h!==void 0&&t(!!h),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ex(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hb()||sb()||eg()}}const Hx=Fx;var QE="@firebase/auth",YE="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kx(r){lr(new Zn("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:d}=s.options;Ae(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fb(r)},g=new sN(s,o,u,p);return pN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),lr(new Zn("auth-internal",e=>{const t=Ii(e.getProvider("auth").getImmediate());return(s=>new Gx(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tn(QE,YE,$x(r)),Tn(QE,YE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=5*60,Yx=jT("authIdTokenMaxAge")||Qx;let XE=null;const Xx=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Yx)return;const o=t==null?void 0:t.token;XE!==o&&(XE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Wx(r=lf()){const e=Ns(r,"auth");if(e.isInitialized())return e.getImmediate();const t=mN(r,{popupRedirectResolver:Hx,persistence:[tx,FN,Sb]}),s=jT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=Xx(u.toString());jN(t,h,()=>h(t.currentUser)),LN(t,d=>h(d))}}const o=VT("auth");return o&&gN(t,`http://${o}`),t}function Zx(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}aN({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=or("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",Zx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kx("Browser");var Jx="firebase",e2="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn(Jx,e2,"app");var WE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,Ob;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,C){function b(){}b.prototype=C.prototype,P.D=C.prototype,P.prototype=new b,P.prototype.constructor=P,P.C=function(I,D,O){for(var N=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)N[_e-2]=arguments[_e];return C.prototype[D].apply(I,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,C,b){b||(b=0);var I=Array(16);if(typeof C=="string")for(var D=0;16>D;++D)I[D]=C.charCodeAt(b++)|C.charCodeAt(b++)<<8|C.charCodeAt(b++)<<16|C.charCodeAt(b++)<<24;else for(D=0;16>D;++D)I[D]=C[b++]|C[b++]<<8|C[b++]<<16|C[b++]<<24;C=P.g[0],b=P.g[1],D=P.g[2];var O=P.g[3],N=C+(O^b&(D^O))+I[0]+3614090360&4294967295;C=b+(N<<7&4294967295|N>>>25),N=O+(D^C&(b^D))+I[1]+3905402710&4294967295,O=C+(N<<12&4294967295|N>>>20),N=D+(b^O&(C^b))+I[2]+606105819&4294967295,D=O+(N<<17&4294967295|N>>>15),N=b+(C^D&(O^C))+I[3]+3250441966&4294967295,b=D+(N<<22&4294967295|N>>>10),N=C+(O^b&(D^O))+I[4]+4118548399&4294967295,C=b+(N<<7&4294967295|N>>>25),N=O+(D^C&(b^D))+I[5]+1200080426&4294967295,O=C+(N<<12&4294967295|N>>>20),N=D+(b^O&(C^b))+I[6]+2821735955&4294967295,D=O+(N<<17&4294967295|N>>>15),N=b+(C^D&(O^C))+I[7]+4249261313&4294967295,b=D+(N<<22&4294967295|N>>>10),N=C+(O^b&(D^O))+I[8]+1770035416&4294967295,C=b+(N<<7&4294967295|N>>>25),N=O+(D^C&(b^D))+I[9]+2336552879&4294967295,O=C+(N<<12&4294967295|N>>>20),N=D+(b^O&(C^b))+I[10]+4294925233&4294967295,D=O+(N<<17&4294967295|N>>>15),N=b+(C^D&(O^C))+I[11]+2304563134&4294967295,b=D+(N<<22&4294967295|N>>>10),N=C+(O^b&(D^O))+I[12]+1804603682&4294967295,C=b+(N<<7&4294967295|N>>>25),N=O+(D^C&(b^D))+I[13]+4254626195&4294967295,O=C+(N<<12&4294967295|N>>>20),N=D+(b^O&(C^b))+I[14]+2792965006&4294967295,D=O+(N<<17&4294967295|N>>>15),N=b+(C^D&(O^C))+I[15]+1236535329&4294967295,b=D+(N<<22&4294967295|N>>>10),N=C+(D^O&(b^D))+I[1]+4129170786&4294967295,C=b+(N<<5&4294967295|N>>>27),N=O+(b^D&(C^b))+I[6]+3225465664&4294967295,O=C+(N<<9&4294967295|N>>>23),N=D+(C^b&(O^C))+I[11]+643717713&4294967295,D=O+(N<<14&4294967295|N>>>18),N=b+(O^C&(D^O))+I[0]+3921069994&4294967295,b=D+(N<<20&4294967295|N>>>12),N=C+(D^O&(b^D))+I[5]+3593408605&4294967295,C=b+(N<<5&4294967295|N>>>27),N=O+(b^D&(C^b))+I[10]+38016083&4294967295,O=C+(N<<9&4294967295|N>>>23),N=D+(C^b&(O^C))+I[15]+3634488961&4294967295,D=O+(N<<14&4294967295|N>>>18),N=b+(O^C&(D^O))+I[4]+3889429448&4294967295,b=D+(N<<20&4294967295|N>>>12),N=C+(D^O&(b^D))+I[9]+568446438&4294967295,C=b+(N<<5&4294967295|N>>>27),N=O+(b^D&(C^b))+I[14]+3275163606&4294967295,O=C+(N<<9&4294967295|N>>>23),N=D+(C^b&(O^C))+I[3]+4107603335&4294967295,D=O+(N<<14&4294967295|N>>>18),N=b+(O^C&(D^O))+I[8]+1163531501&4294967295,b=D+(N<<20&4294967295|N>>>12),N=C+(D^O&(b^D))+I[13]+2850285829&4294967295,C=b+(N<<5&4294967295|N>>>27),N=O+(b^D&(C^b))+I[2]+4243563512&4294967295,O=C+(N<<9&4294967295|N>>>23),N=D+(C^b&(O^C))+I[7]+1735328473&4294967295,D=O+(N<<14&4294967295|N>>>18),N=b+(O^C&(D^O))+I[12]+2368359562&4294967295,b=D+(N<<20&4294967295|N>>>12),N=C+(b^D^O)+I[5]+4294588738&4294967295,C=b+(N<<4&4294967295|N>>>28),N=O+(C^b^D)+I[8]+2272392833&4294967295,O=C+(N<<11&4294967295|N>>>21),N=D+(O^C^b)+I[11]+1839030562&4294967295,D=O+(N<<16&4294967295|N>>>16),N=b+(D^O^C)+I[14]+4259657740&4294967295,b=D+(N<<23&4294967295|N>>>9),N=C+(b^D^O)+I[1]+2763975236&4294967295,C=b+(N<<4&4294967295|N>>>28),N=O+(C^b^D)+I[4]+1272893353&4294967295,O=C+(N<<11&4294967295|N>>>21),N=D+(O^C^b)+I[7]+4139469664&4294967295,D=O+(N<<16&4294967295|N>>>16),N=b+(D^O^C)+I[10]+3200236656&4294967295,b=D+(N<<23&4294967295|N>>>9),N=C+(b^D^O)+I[13]+681279174&4294967295,C=b+(N<<4&4294967295|N>>>28),N=O+(C^b^D)+I[0]+3936430074&4294967295,O=C+(N<<11&4294967295|N>>>21),N=D+(O^C^b)+I[3]+3572445317&4294967295,D=O+(N<<16&4294967295|N>>>16),N=b+(D^O^C)+I[6]+76029189&4294967295,b=D+(N<<23&4294967295|N>>>9),N=C+(b^D^O)+I[9]+3654602809&4294967295,C=b+(N<<4&4294967295|N>>>28),N=O+(C^b^D)+I[12]+3873151461&4294967295,O=C+(N<<11&4294967295|N>>>21),N=D+(O^C^b)+I[15]+530742520&4294967295,D=O+(N<<16&4294967295|N>>>16),N=b+(D^O^C)+I[2]+3299628645&4294967295,b=D+(N<<23&4294967295|N>>>9),N=C+(D^(b|~O))+I[0]+4096336452&4294967295,C=b+(N<<6&4294967295|N>>>26),N=O+(b^(C|~D))+I[7]+1126891415&4294967295,O=C+(N<<10&4294967295|N>>>22),N=D+(C^(O|~b))+I[14]+2878612391&4294967295,D=O+(N<<15&4294967295|N>>>17),N=b+(O^(D|~C))+I[5]+4237533241&4294967295,b=D+(N<<21&4294967295|N>>>11),N=C+(D^(b|~O))+I[12]+1700485571&4294967295,C=b+(N<<6&4294967295|N>>>26),N=O+(b^(C|~D))+I[3]+2399980690&4294967295,O=C+(N<<10&4294967295|N>>>22),N=D+(C^(O|~b))+I[10]+4293915773&4294967295,D=O+(N<<15&4294967295|N>>>17),N=b+(O^(D|~C))+I[1]+2240044497&4294967295,b=D+(N<<21&4294967295|N>>>11),N=C+(D^(b|~O))+I[8]+1873313359&4294967295,C=b+(N<<6&4294967295|N>>>26),N=O+(b^(C|~D))+I[15]+4264355552&4294967295,O=C+(N<<10&4294967295|N>>>22),N=D+(C^(O|~b))+I[6]+2734768916&4294967295,D=O+(N<<15&4294967295|N>>>17),N=b+(O^(D|~C))+I[13]+1309151649&4294967295,b=D+(N<<21&4294967295|N>>>11),N=C+(D^(b|~O))+I[4]+4149444226&4294967295,C=b+(N<<6&4294967295|N>>>26),N=O+(b^(C|~D))+I[11]+3174756917&4294967295,O=C+(N<<10&4294967295|N>>>22),N=D+(C^(O|~b))+I[2]+718787259&4294967295,D=O+(N<<15&4294967295|N>>>17),N=b+(O^(D|~C))+I[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+D&4294967295,P.g[3]=P.g[3]+O&4294967295}s.prototype.u=function(P,C){C===void 0&&(C=P.length);for(var b=C-this.blockSize,I=this.B,D=this.h,O=0;O<C;){if(D==0)for(;O<=b;)o(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<C;)if(I[D++]=P.charCodeAt(O++),D==this.blockSize){o(this,I),D=0;break}}else for(;O<C;)if(I[D++]=P[O++],D==this.blockSize){o(this,I),D=0;break}}this.h=D,this.o+=C},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;var b=8*this.o;for(C=P.length-8;C<P.length;++C)P[C]=b&255,b/=256;for(this.u(P),P=Array(16),C=b=0;4>C;++C)for(var I=0;32>I;I+=8)P[b++]=this.g[C]>>>I&255;return P};function u(P,C){var b=d;return Object.prototype.hasOwnProperty.call(b,P)?b[P]:b[P]=C(P)}function h(P,C){this.h=C;for(var b=[],I=!0,D=P.length-1;0<=D;D--){var O=P[D]|0;I&&O==C||(b[D]=O,I=!1)}this.g=b}var d={};function p(P){return-128<=P&&128>P?u(P,function(C){return new h([C|0],0>C?-1:0)}):new h([P|0],0>P?-1:0)}function g(P){if(isNaN(P)||!isFinite(P))return S;if(0>P)return V(g(-P));for(var C=[],b=1,I=0;P>=b;I++)C[I]=P/b|0,b*=4294967296;return new h(C,0)}function E(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return V(E(P.substring(1),C));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=g(Math.pow(C,8)),I=S,D=0;D<P.length;D+=8){var O=Math.min(8,P.length-D),N=parseInt(P.substring(D,D+O),C);8>O?(O=g(Math.pow(C,O)),I=I.j(O).add(g(N))):(I=I.j(b),I=I.add(g(N)))}return I}var S=p(0),R=p(1),x=p(16777216);r=h.prototype,r.m=function(){if(G(this))return-V(this).m();for(var P=0,C=1,b=0;b<this.g.length;b++){var I=this.i(b);P+=(0<=I?I:4294967296+I)*C,C*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M(this))return"0";if(G(this))return"-"+V(this).toString(P);for(var C=g(Math.pow(P,6)),b=this,I="";;){var D=re(b,C).g;b=z(b,D.j(C));var O=((0<b.g.length?b.g[0]:b.h)>>>0).toString(P);if(b=D,M(b))return O+I;for(;6>O.length;)O="0"+O;I=O+I}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function M(P){if(P.h!=0)return!1;for(var C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function G(P){return P.h==-1}r.l=function(P){return P=z(this,P),G(P)?-1:M(P)?0:1};function V(P){for(var C=P.g.length,b=[],I=0;I<C;I++)b[I]=~P.g[I];return new h(b,~P.h).add(R)}r.abs=function(){return G(this)?V(this):this},r.add=function(P){for(var C=Math.max(this.g.length,P.g.length),b=[],I=0,D=0;D<=C;D++){var O=I+(this.i(D)&65535)+(P.i(D)&65535),N=(O>>>16)+(this.i(D)>>>16)+(P.i(D)>>>16);I=N>>>16,O&=65535,N&=65535,b[D]=N<<16|O}return new h(b,b[b.length-1]&-2147483648?-1:0)};function z(P,C){return P.add(V(C))}r.j=function(P){if(M(this)||M(P))return S;if(G(this))return G(P)?V(this).j(V(P)):V(V(this).j(P));if(G(P))return V(this.j(V(P)));if(0>this.l(x)&&0>P.l(x))return g(this.m()*P.m());for(var C=this.g.length+P.g.length,b=[],I=0;I<2*C;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<P.g.length;D++){var O=this.i(I)>>>16,N=this.i(I)&65535,_e=P.i(D)>>>16,Te=P.i(D)&65535;b[2*I+2*D]+=N*Te,q(b,2*I+2*D),b[2*I+2*D+1]+=O*Te,q(b,2*I+2*D+1),b[2*I+2*D+1]+=N*_e,q(b,2*I+2*D+1),b[2*I+2*D+2]+=O*_e,q(b,2*I+2*D+2)}for(I=0;I<C;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=C;I<2*C;I++)b[I]=0;return new h(b,0)};function q(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function K(P,C){this.g=P,this.h=C}function re(P,C){if(M(C))throw Error("division by zero");if(M(P))return new K(S,S);if(G(P))return C=re(V(P),C),new K(V(C.g),V(C.h));if(G(C))return C=re(P,V(C)),new K(V(C.g),C.h);if(30<P.g.length){if(G(P)||G(C))throw Error("slowDivide_ only works with positive integers.");for(var b=R,I=C;0>=I.l(P);)b=se(b),I=se(I);var D=Z(b,1),O=Z(I,1);for(I=Z(I,2),b=Z(b,2);!M(I);){var N=O.add(I);0>=N.l(P)&&(D=D.add(b),O=N),I=Z(I,1),b=Z(b,1)}return C=z(P,D.j(C)),new K(D,C)}for(D=S;0<=P.l(C);){for(b=Math.max(1,Math.floor(P.m()/C.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),O=g(b),N=O.j(C);G(N)||0<N.l(P);)b-=I,O=g(b),N=O.j(C);M(O)&&(O=R),D=D.add(O),P=z(P,N)}return new K(D,P)}r.A=function(P){return re(this,P).h},r.and=function(P){for(var C=Math.max(this.g.length,P.g.length),b=[],I=0;I<C;I++)b[I]=this.i(I)&P.i(I);return new h(b,this.h&P.h)},r.or=function(P){for(var C=Math.max(this.g.length,P.g.length),b=[],I=0;I<C;I++)b[I]=this.i(I)|P.i(I);return new h(b,this.h|P.h)},r.xor=function(P){for(var C=Math.max(this.g.length,P.g.length),b=[],I=0;I<C;I++)b[I]=this.i(I)^P.i(I);return new h(b,this.h^P.h)};function se(P){for(var C=P.g.length+1,b=[],I=0;I<C;I++)b[I]=P.i(I)<<1|P.i(I-1)>>>31;return new h(b,P.h)}function Z(P,C){var b=C>>5;C%=32;for(var I=P.g.length-b,D=[],O=0;O<I;O++)D[O]=0<C?P.i(O+b)>>>C|P.i(O+b+1)<<32-C:P.i(O+b);return new h(D,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Ob=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=E,vs=h}).apply(typeof WE<"u"?WE:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kb,ru,Pb,wh,vp,Mb,Vb,Ub;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,_){return c==Array.prototype||c==Object.prototype||(c[y]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var H=c[A];if(!(H in _))break e;_=_[H]}c=c[c.length-1],A=_[c],y=y(A),y!=A&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var _=0,A=!1,H={next:function(){if(!A&&_<c.length){var Y=_++;return{value:y(Y,c[Y]),done:!1}}return A=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,_){return c.call.apply(c.bind,arguments)}function S(c,y,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,A),c.apply(y,H)}}return function(){return c.apply(y,arguments)}}function R(c,y,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,R.apply(null,arguments)}function x(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function M(c,y){function _(){}_.prototype=y.prototype,c.aa=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,H,Y){for(var le=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)le[Be-2]=arguments[Be];return y.prototype[H].apply(A,le)}}function G(c){const y=c.length;if(0<y){const _=Array(y);for(let A=0;A<y;A++)_[A]=c[A];return _}return[]}function V(c,y){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(p(A)){const H=c.length||0,Y=A.length||0;c.length=H+Y;for(let le=0;le<Y;le++)c[H+le]=A[le]}else c.push(A)}}class z{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var se=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function Z(c,y,_){for(const A in c)y.call(_,c[A],A,c)}function P(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function C(c){const y={};for(const _ in c)y[_]=c[_];return y}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,y){let _,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(_ in A)c[_]=A[_];for(let Y=0;Y<b.length;Y++)_=b[Y],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function D(c){var y=1;c=c.split(":");const _=[];for(;0<y&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function O(c){d.setTimeout(()=>{throw c},0)}function N(){var c=Ue;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class _e{constructor(){this.h=this.g=null}add(y,_){const A=Te.get();A.set(y,_),this.h?this.h.next=A:this.g=A,this.h=A}}var Te=new z(()=>new oe,c=>c.reset());class oe{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let de,pe=!1,Ue=new _e,U=()=>{const c=d.Promise.resolve(void 0);de=()=>{c.then(ie)}};var ie=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(_){O(_)}var y=Te;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}pe=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return c}();function we(c,y){if(ae.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(se){e:{try{re(y.nodeName);var H=!0;break e}catch{}H=!1}H||(y=null)}}else _=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:be[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&we.aa.h.call(this)}}M(we,ae);var be={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),xe=0;function ot(c,y,_,A,H){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!A,this.ha=H,this.key=++xe,this.da=this.fa=!1}function He(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Gt(c){this.src=c,this.g={},this.h=0}Gt.prototype.add=function(c,y,_,A,H){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var le=kn(c,y,A,H);return-1<le?(y=c[le],_||(y.fa=!1)):(y=new ot(y,this.src,Y,!!A,H),y.fa=_,c.push(y)),y};function Lr(c,y){var _=y.type;if(_ in c.g){var A=c.g[_],H=Array.prototype.indexOf.call(A,y,void 0),Y;(Y=0<=H)&&Array.prototype.splice.call(A,H,1),Y&&(He(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function kn(c,y,_,A){for(var H=0;H<c.length;++H){var Y=c[H];if(!Y.da&&Y.listener==y&&Y.capture==!!_&&Y.ha==A)return H}return-1}var Ci="closure_lm_"+(1e6*Math.random()|0),Ni={};function jr(c,y,_,A,H){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)jr(c,y[Y],_,A,H);return null}return _=zu(_),c&&c[at]?c.K(y,_,g(A)?!!A.capture:!1,H):Go(c,y,_,!1,A,H)}function Go(c,y,_,A,H,Y){if(!y)throw Error("Invalid event type");var le=g(H)?!!H.capture:!!H,Be=$o(c);if(Be||(c[Ci]=Be=new Gt(c)),_=Be.add(y,_,A,le,Y),_.proxy)return _;if(A=xa(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)ue||(H=le),H===void 0&&(H=!1),c.addEventListener(y.toString(),A,H);else if(c.attachEvent)c.attachEvent(Oa(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function xa(){function c(_){return y.call(c.src,c.listener,_)}const y=jf;return c}function Da(c,y,_,A,H){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Da(c,y[Y],_,A,H);else A=g(A)?!!A.capture:!!A,_=zu(_),c&&c[at]?(c=c.i,y=String(y).toString(),y in c.g&&(Y=c.g[y],_=kn(Y,_,A,H),-1<_&&(He(Y[_]),Array.prototype.splice.call(Y,_,1),Y.length==0&&(delete c.g[y],c.h--)))):c&&(c=$o(c))&&(y=c.g[y.toString()],c=-1,y&&(c=kn(y,_,A,H)),(_=-1<c?y[c]:null)&&Os(_))}function Os(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[at])Lr(y.i,c);else{var _=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(_,A,c.capture):y.detachEvent?y.detachEvent(Oa(_),A):y.addListener&&y.removeListener&&y.removeListener(A),(_=$o(y))?(Lr(_,c),_.h==0&&(_.src=null,y[Ci]=null)):He(c)}}}function Oa(c){return c in Ni?Ni[c]:Ni[c]="on"+c}function jf(c,y){if(c.da)c=!0;else{y=new we(y,this);var _=c.listener,A=c.ha||c.src;c.fa&&Os(c),c=_.call(A,y)}return c}function $o(c){return c=c[Ci],c instanceof Gt?c:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zu(c){return typeof c=="function"?c:(c[gn]||(c[gn]=function(y){return c.handleEvent(y)}),c[gn])}function Ct(){ge.call(this),this.i=new Gt(this),this.M=this,this.F=null}M(Ct,ge),Ct.prototype[at]=!0,Ct.prototype.removeEventListener=function(c,y,_,A){Da(this,c,y,_,A)};function Vt(c,y){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new ae(y,c);else if(y instanceof ae)y.target=y.target||c;else{var H=y;y=new ae(A,c),I(y,H)}if(H=!0,_)for(var Y=_.length-1;0<=Y;Y--){var le=y.g=_[Y];H=Br(le,A,!0,y)&&H}if(le=y.g=c,H=Br(le,A,!0,y)&&H,H=Br(le,A,!1,y)&&H,_)for(Y=0;Y<_.length;Y++)le=y.g=_[Y],H=Br(le,A,!1,y)&&H}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var _=c.g[y],A=0;A<_.length;A++)He(_[A]);delete c.g[y],c.h--}}this.F=null},Ct.prototype.K=function(c,y,_,A){return this.i.add(String(c),y,!1,_,A)},Ct.prototype.L=function(c,y,_,A){return this.i.add(String(c),y,!0,_,A)};function Br(c,y,_,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var H=!0,Y=0;Y<y.length;++Y){var le=y[Y];if(le&&!le.da&&le.capture==_){var Be=le.listener,xt=le.ha||le.src;le.fa&&Lr(c.i,le),H=Be.call(xt,A)!==!1&&H}}return H&&!A.defaultPrevented}function qu(c,y,_){if(typeof c=="function")_&&(c=R(c,_));else if(c&&typeof c.handleEvent=="function")c=R(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(c,y||0)}function Ko(c){c.g=qu(()=>{c.g=null,c.i&&(c.i=!1,Ko(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Bf extends ge{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ko(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(c){ge.call(this),this.h=c,this.g={}}M(ks,ge);var xi=[];function Jt(c){Z(c.g,function(y,_){this.g.hasOwnProperty(_)&&Os(y)},c),c.g={}}ks.prototype.N=function(){ks.aa.N.call(this),Jt(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qo=d.JSON.stringify,cr=d.JSON.parse,ln=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Yo(){}Yo.prototype.h=null;function Fu(c){return c.h||(c.h=c.i())}function Hu(){}var hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Di(){ae.call(this,"d")}M(Di,ae);function tr(){ae.call(this,"c")}M(tr,ae);var Pn={},Oi=null;function ka(){return Oi=Oi||new Ct}Pn.La="serverreachability";function Xo(c){ae.call(this,Pn.La,c)}M(Xo,ae);function ki(c){const y=ka();Vt(y,new Xo(y))}Pn.STAT_EVENT="statevent";function Pa(c,y){ae.call(this,Pn.STAT_EVENT,c),this.stat=y}M(Pa,ae);function vt(c){const y=ka();Vt(y,new Pa(y,c))}Pn.Ma="timingevent";function Gu(c,y){ae.call(this,Pn.Ma,c),this.size=y}M(Gu,ae);function Pi(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},y)}function Mi(){this.g=!0}Mi.prototype.xa=function(){this.g=!1};function $u(c,y,_,A,H,Y){c.info(function(){if(c.g)if(Y)for(var le="",Be=Y.split("&"),xt=0;xt<Be.length;xt++){var ze=Be[xt].split("=");if(1<ze.length){var jt=ze[0];ze=ze[1];var Dt=jt.split("_");le=2<=Dt.length&&Dt[1]=="type"?le+(jt+"="+ze+"&"):le+(jt+"=redacted&")}}else le=null;else le=Y;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+y+`
`+_+`
`+le})}function Ku(c,y,_,A,H,Y,le){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+y+`
`+_+`
`+Y+" "+le})}function Vi(c,y,_,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ut(c,_)+(A?" "+A:"")})}function fr(c,y){c.info(function(){return"TIMEOUT: "+y})}Mi.prototype.info=function(){};function Ut(c,y){if(!c.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var H=A[1];if(Array.isArray(H)&&!(1>H.length)){var Y=H[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var le=1;le<H.length;le++)H[le]=""}}}}return Qo(_)}catch{return y}}var Nt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ps;function Ma(){}M(Ma,Yo),Ma.prototype.g=function(){return new XMLHttpRequest},Ma.prototype.i=function(){return{}},Ps=new Ma;function dr(c,y,_,A){this.j=c,this.i=y,this.l=_,this.R=A||1,this.U=new ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wo}function Wo(){this.i=null,this.g="",this.h=!1}var Ui={},Ms={};function nr(c,y,_){c.L=1,c.v=Ls(dt(y)),c.m=_,c.P=!0,qr(c,null)}function qr(c,y){c.F=Date.now(),lt(c),c.A=dt(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Gr(_.i,"t",A),c.C=0,_=c.j.J,c.h=new Wo,c.g=oc(c.j,_?y:null,!c.m),0<c.O&&(c.M=new Bf(R(c.Y,c,c.g),c.O)),y=c.U,_=c.g,A=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(xi[0]=H.toString()),H=xi);for(var Y=0;Y<H.length;Y++){var le=jr(_,H[Y],A||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),ki(),$u(c.i,c.u,c.A,c.l,c.R,c.m)}dr.prototype.ca=function(c){c=c.target;const y=this.M;y&&jn(c)==3?y.j():this.Y(c)},dr.prototype.Y=function(c){try{if(c==this.g)e:{const Dt=jn(this.g);var y=this.g.Ba();const Yr=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||Ju(this.g)))){this.J||Dt!=4||y==7||(y==8||0>=Yr?ki(3):ki(2)),Va(this);var _=this.g.Z();this.X=_;t:if(Li(this)){var A=Ju(this.g);c="";var H=A.length,Y=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),Sn(this);var le="";break t}this.h.i=new d.TextDecoder}for(y=0;y<H;y++)this.h.h=!0,c+=this.h.i.decode(A[y],{stream:!(Y&&y==H-1)});A.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,Ku(this.i,this.u,this.A,this.l,this.R,Dt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,xt=this.g;if((Be=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Be)){var ze=Be;break t}}ze=null}if(_=ze)Vi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,An(this,_);else{this.o=!1,this.s=3,vt(12),yn(this),Sn(this);break e}}if(this.P){_=!0;let $t;for(;!this.J&&this.C<le.length;)if($t=ji(this,le),$t==Ms){Dt==4&&(this.s=4,vt(14),_=!1),Vi(this.i,this.l,null,"[Incomplete Response]");break}else if($t==Ui){this.s=4,vt(15),Vi(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else Vi(this.i,this.l,$t,null),An(this,$t);if(Li(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||le.length!=0||this.h.h||(this.s=1,vt(16),_=!1),this.o=this.o&&_,!_)Vi(this.i,this.l,le,"[Invalid Chunked Response]"),yn(this),Sn(this);else if(0<le.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Gs(jt),jt.M=!0,vt(11))}}else Vi(this.i,this.l,le,null),An(this,le);Dt==4&&yn(this),this.o&&!this.J&&(Dt==4?ic(this.j,this):(this.o=!1,lt(this)))}else $f(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),yn(this),Sn(this)}}}catch{}finally{}};function Li(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ji(c,y){var _=c.C,A=y.indexOf(`
`,_);return A==-1?Ms:(_=Number(y.substring(_,A)),isNaN(_)?Ui:(A+=1,A+_>y.length?Ms:(y=y.slice(A,A+_),c.C=A+_,y)))}dr.prototype.cancel=function(){this.J=!0,yn(this)};function lt(c){c.S=Date.now()+c.I,Zo(c,c.I)}function Zo(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Pi(R(c.ba,c),y)}function Va(c){c.B&&(d.clearTimeout(c.B),c.B=null)}dr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(fr(this.i,this.A),this.L!=2&&(ki(),vt(17)),yn(this),this.s=2,Sn(this)):Zo(this,this.S-c)};function Sn(c){c.j.G==0||c.J||ic(c.j,c)}function yn(c){Va(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Jt(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function An(c,y){try{var _=c.j;if(_.G!=0&&(_.g==c||Bi(_.h,c))){if(!c.K&&Bi(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)$a(_),Ha(_);else break e;ul(_),vt(18)}}else _.za=H[1],0<_.za-_.T&&37500>H[2]&&_.F&&_.v==0&&!_.C&&(_.C=Pi(R(_.Za,_),6e3));if(1>=Qu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Qr(_,11)}else if((c.K||_.g==c)&&$a(_),!q(y))for(H=_.Da.g.parse(y),y=0;y<H.length;y++){let ze=H[y];if(_.T=ze[0],ze=ze[1],_.G==2)if(ze[0]=="c"){_.K=ze[1],_.ia=ze[2];const jt=ze[3];jt!=null&&(_.la=jt,_.j.info("VER="+_.la));const Dt=ze[4];Dt!=null&&(_.Aa=Dt,_.j.info("SVER="+_.Aa));const Yr=ze[5];Yr!=null&&typeof Yr=="number"&&0<Yr&&(A=1.5*Yr,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const $t=c.g;if($t){const Er=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Er){var Y=A.h;Y.g||Er.indexOf("spdy")==-1&&Er.indexOf("quic")==-1&&Er.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(zi(Y,Y.h),Y.h=null))}if(A.D){const hl=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(A.ya=hl,Ge(A.I,A.D,hl))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var le=c;if(A.qa=ac(A,A.J?A.ia:null,A.W),le.K){Mn(A.h,le);var Be=le,xt=A.L;xt&&(Be.I=xt),Be.B&&(Va(Be),lt(Be)),A.g=le}else nc(A);0<_.i.length&&Ga(_)}else ze[0]!="stop"&&ze[0]!="close"||Qr(_,7);else _.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Qr(_,7):ol(_):ze[0]!="noop"&&_.l&&_.l.ta(ze),_.v=0)}}ki(4)}catch{}}var zf=class{constructor(c,y){this.g=c,this.map=y}};function Jo(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function el(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Qu(c){return c.h?1:c.g?c.g.size:0}function Bi(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function zi(c,y){c.g?c.g.add(y):c.h=y}function Mn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Jo.prototype.cancel=function(){if(this.i=un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function un(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.D);return y}return G(c.i)}function Yu(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],_=c.length,A=0;A<_;A++)y.push(c[A]);return y}y=[],_=0;for(A in c)y[_++]=c[A];return y}function qf(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var _=0;_<c;_++)y.push(_);return y}y=[],_=0;for(const A in c)y[_++]=A;return y}}}function Vs(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var _=qf(c),A=Yu(c),H=A.length,Y=0;Y<H;Y++)y.call(void 0,A[Y],_&&_[Y],c)}var tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ua(c,y){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),H=null;if(0<=A){var Y=c[_].substring(0,A);H=c[_].substring(A+1)}else Y=c[_];y(Y,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Fr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Fr){this.h=c.h,qi(this,c.j),this.o=c.o,this.g=c.g,Us(this,c.s),this.l=c.l;var y=c.i,_=new mr;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),La(this,_),this.m=c.m}else c&&(y=String(c).match(tl))?(this.h=!1,qi(this,y[1]||"",!0),this.o=Fi(y[2]||""),this.g=Fi(y[3]||"",!0),Us(this,y[4]),this.l=Fi(y[5]||"",!0),La(this,y[6]||"",!0),this.m=Fi(y[7]||"")):(this.h=!1,this.i=new mr(null,this.h))}Fr.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Vn(y,nl,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Vn(y,nl,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Vn(_,_.charAt(0)=="/"?rl:Xu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Vn(_,Gf)),c.join("")};function dt(c){return new Fr(c)}function qi(c,y,_){c.j=_?Fi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Us(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function La(c,y,_){y instanceof mr?(c.i=y,il(c.i,c.h)):(_||(y=Vn(y,Hf)),c.i=new mr(y,c.h))}function Ge(c,y,_){c.i.set(y,_)}function Ls(c){return Ge(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Vn(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,Ff),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ff(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var nl=/[#\/\?@]/g,Xu=/[#\?:]/g,rl=/[#\?]/g,Hf=/[#\?@]/g,Gf=/#/g;function mr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Un(c){c.g||(c.g=new Map,c.h=0,c.i&&Ua(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=mr.prototype,r.add=function(c,y){Un(this),this.i=null,c=$r(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function ja(c,y){Un(c),y=$r(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Hr(c,y){return Un(c),y=$r(c,y),c.g.has(y)}r.forEach=function(c,y){Un(this),this.g.forEach(function(_,A){_.forEach(function(H){c.call(y,H,A,this)},this)},this)},r.na=function(){Un(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let A=0;A<y.length;A++){const H=c[A];for(let Y=0;Y<H.length;Y++)_.push(y[A])}return _},r.V=function(c){Un(this);let y=[];if(typeof c=="string")Hr(this,c)&&(y=y.concat(this.g.get($r(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)y=y.concat(c[_])}return y},r.set=function(c,y){return Un(this),this.i=null,c=$r(this,c),Hr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Gr(c,y,_){ja(c,y),0<_.length&&(c.i=null,c.g.set($r(c,y),G(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var A=y[_];const Y=encodeURIComponent(String(A)),le=this.V(A);for(A=0;A<le.length;A++){var H=Y;le[A]!==""&&(H+="="+encodeURIComponent(String(le[A]))),c.push(H)}}return this.i=c.join("&")};function $r(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function il(c,y){y&&!c.j&&(Un(c),c.i=null,c.g.forEach(function(_,A){var H=A.toLowerCase();A!=H&&(ja(this,A),Gr(this,H,_))},c)),c.j=y}function Wu(c,y){const _=new Mi;if(d.Image){const A=new Image;A.onload=x(Ln,_,"TestLoadImage: loaded",!0,y,A),A.onerror=x(Ln,_,"TestLoadImage: error",!1,y,A),A.onabort=x(Ln,_,"TestLoadImage: abort",!1,y,A),A.ontimeout=x(Ln,_,"TestLoadImage: timeout",!1,y,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function js(c,y){const _=new Mi,A=new AbortController,H=setTimeout(()=>{A.abort(),Ln(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(Y=>{clearTimeout(H),Y.ok?Ln(_,"TestPingServer: ok",!0,y):Ln(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Ln(_,"TestPingServer: error",!1,y)})}function Ln(c,y,_,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(_)}catch{}}function Bs(){this.g=new ln}function pr(c,y,_){const A=_||"";try{Vs(c,function(H,Y){let le=H;g(H)&&(le=Qo(H)),y.push(A+Y+"="+encodeURIComponent(le))})}catch(H){throw y.push(A+"type="+encodeURIComponent("_badmap")),H}}function Hi(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Hi,Yo),Hi.prototype.g=function(){return new Kr(this.l,this.j)},Hi.prototype.i=function(c){return function(){return c}}({});function Kr(c,y){Ct.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Kr,Ct),r=Kr.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,yr(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,yr(this)),this.g&&(this.readyState=3,yr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function sl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?gr(this):yr(this),this.readyState==3&&sl(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,gr(this))},r.Qa=function(c){this.g&&(this.response=c,gr(this))},r.ga=function(){this.g&&gr(this)};function gr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,yr(c)}r.setRequestHeader=function(c,y){this.u.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function yr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function al(c){let y="";return Z(c,function(_,A){y+=A,y+=":",y+=_,y+=`\r
`}),y}function Lt(c,y,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=al(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ge(c,y,_))}function Qe(c){Ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Qe,Ct);var Ba=/^https?$/i,zs=["POST","PUT"];r=Qe.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,y,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ps.g(),this.v=this.o?Fu(this.o):Fu(Ps),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Y){Zu(this,Y);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)_.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())_.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),H=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(zs,y,void 0))||A||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,le]of _)this.g.setRequestHeader(Y,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qs(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){Zu(this,Y)}};function Zu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,za(c),_r(c)}function za(c){c.A||(c.A=!0,Vt(c,"complete"),Vt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Vt(this,"complete"),Vt(this,"abort"),_r(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_r(this,!0)),Qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?qa(this):this.bb())},r.bb=function(){qa(this)};function qa(c){if(c.h&&typeof h<"u"&&(!c.v[1]||jn(c)!=4||c.Z()!=2)){if(c.u&&jn(c)==4)qu(c.Ea,0,c);else if(Vt(c,"readystatechange"),jn(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var A;if(A=le===0){var H=String(c.D).match(tl)[1]||null;!H&&d.self&&d.self.location&&(H=d.self.location.protocol.slice(0,-1)),A=!Ba.test(H?H.toLowerCase():"")}_=A}if(_)Vt(c,"complete"),Vt(c,"success");else{c.m=6;try{var Y=2<jn(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",za(c)}}finally{_r(c)}}}}function _r(c,y){if(c.g){qs(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Vt(c,"ready");try{_.onreadystatechange=A}catch{}}}function qs(c){c.I&&(d.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function jn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),cr(y)}};function Ju(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function $f(c){const y={};c=(c.g&&2<=jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(q(c[A]))continue;var _=D(c[A]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=y[H]||[];y[H]=Y,Y.push(_)}P(y,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function Fa(c){this.Aa=0,this.i=[],this.j=new Mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fs("baseRetryDelayMs",5e3,c),this.cb=Fs("retryDelaySeedMs",1e4,c),this.Wa=Fs("forwardChannelMaxRetries",2,c),this.wa=Fs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Jo(c&&c.concurrentRequestLimit),this.Da=new Bs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Fa.prototype,r.la=8,r.G=1,r.connect=function(c,y,_,A){vt(0),this.W=c,this.H=y||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=ac(this,null,this.W),Ga(this)};function ol(c){if(ec(c),c.G==3){var y=c.U++,_=dt(c.I);if(Ge(_,"SID",c.K),Ge(_,"RID",y),Ge(_,"TYPE","terminate"),Hs(c,_),y=new dr(c,c.j,y),y.L=2,y.v=Ls(dt(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.v,_=!0),_||(y.g=oc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),lt(y)}sc(c)}function Ha(c){c.g&&(Gs(c),c.g.cancel(),c.g=null)}function ec(c){Ha(c),c.u&&(d.clearTimeout(c.u),c.u=null),$a(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Ga(c){if(!el(c.h)&&!c.s){c.s=!0;var y=c.Ga;de||U(),pe||(de(),pe=!0),Ue.add(y,c),c.B=0}}function Kf(c,y){return Qu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Pi(R(c.Ga,c,y),cl(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new dr(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=C(Y),I(Y,this.S)):Y=this.S),this.m!==null||this.O||(H.H=Y,Y=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=tc(this,H,y),_=dt(this.I),Ge(_,"RID",c),Ge(_,"CVER",22),this.D&&Ge(_,"X-HTTP-Session-Id",this.D),Hs(this,_),Y&&(this.O?y="headers="+encodeURIComponent(String(al(Y)))+"&"+y:this.m&&Lt(_,this.m,Y)),zi(this.h,H),this.Ua&&Ge(_,"TYPE","init"),this.P?(Ge(_,"$req",y),Ge(_,"SID","null"),H.T=!0,nr(H,_,null)):nr(H,_,y),this.G=2}}else this.G==3&&(c?ll(this,c):this.i.length==0||el(this.h)||ll(this))};function ll(c,y){var _;y?_=y.l:_=c.U++;const A=dt(c.I);Ge(A,"SID",c.K),Ge(A,"RID",_),Ge(A,"AID",c.T),Hs(c,A),c.m&&c.o&&Lt(A,c.m,c.o),_=new dr(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),y&&(c.i=y.D.concat(c.i)),y=tc(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),zi(c.h,_),nr(_,A,y)}function Hs(c,y){c.H&&Z(c.H,function(_,A){Ge(y,A,_)}),c.l&&Vs({},function(_,A){Ge(y,A,_)})}function tc(c,y,_){_=Math.min(c.i.length,_);var A=c.l?R(c.l.Na,c.l,c):null;e:{var H=c.i;let Y=-1;for(;;){const le=["count="+_];Y==-1?0<_?(Y=H[0].g,le.push("ofs="+Y)):Y=0:le.push("ofs="+Y);let Be=!0;for(let xt=0;xt<_;xt++){let ze=H[xt].g;const jt=H[xt].map;if(ze-=Y,0>ze)Y=Math.max(0,H[xt].g-100),Be=!1;else try{pr(jt,le,"req"+ze+"_")}catch{A&&A(jt)}}if(Be){A=le.join("&");break e}}}return c=c.i.splice(0,_),y.D=c,A}function nc(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;de||U(),pe||(de(),pe=!0),Ue.add(y,c),c.v=0}}function ul(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Pi(R(c.Fa,c),cl(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,rc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Pi(R(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Ha(this),rc(this))};function Gs(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function rc(c){c.g=new dr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=dt(c.qa);Ge(y,"RID","rpc"),Ge(y,"SID",c.K),Ge(y,"AID",c.T),Ge(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ge(y,"TO",c.ja),Ge(y,"TYPE","xmlhttp"),Hs(c,y),c.m&&c.o&&Lt(y,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Ls(dt(y)),_.m=null,_.P=!0,qr(_,c)}r.Za=function(){this.C!=null&&(this.C=null,Ha(this),ul(this),vt(19))};function $a(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function ic(c,y){var _=null;if(c.g==y){$a(c),Gs(c),c.g=null;var A=2}else if(Bi(c.h,y))_=y.D,Mn(c.h,y),A=1;else return;if(c.G!=0){if(y.o)if(A==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var H=c.B;A=ka(),Vt(A,new Gu(A,_)),Ga(c)}else nc(c);else if(H=y.s,H==3||H==0&&0<y.X||!(A==1&&Kf(c,y)||A==2&&ul(c)))switch(_&&0<_.length&&(y=c.h,y.i=y.i.concat(_)),H){case 1:Qr(c,5);break;case 4:Qr(c,10);break;case 3:Qr(c,6);break;default:Qr(c,2)}}}function cl(c,y){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*y}function Qr(c,y){if(c.j.info("Error code "+y),y==2){var _=R(c.fb,c),A=c.Xa;const H=!A;A=new Fr(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||qi(A,"https"),Ls(A),H?Wu(A.toString(),_):js(A.toString(),_)}else vt(2);c.G=0,c.l&&c.l.sa(y),sc(c),ec(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function sc(c){if(c.G=0,c.ka=[],c.l){const y=un(c.h);(y.length!=0||c.i.length!=0)&&(V(c.ka,y),V(c.ka,c.i),c.h.i.length=0,G(c.i),c.i.length=0),c.l.ra()}}function ac(c,y,_){var A=_ instanceof Fr?dt(_):new Fr(_);if(A.g!="")y&&(A.g=y+"."+A.g),Us(A,A.s);else{var H=d.location;A=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;var Y=new Fr(null);A&&qi(Y,A),y&&(Y.g=y),H&&Us(Y,H),_&&(Y.l=_),A=Y}return _=c.D,y=c.ya,_&&y&&Ge(A,_,y),Ge(A,"VER",c.la),Hs(c,A),A}function oc(c,y,_){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Qe(new Hi({eb:_})):new Qe(c.pa),y.Ha(c.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function lc(){}r=lc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ka(){}Ka.prototype.g=function(c,y){return new cn(c,y)};function cn(c,y){Ct.call(this),this.g=new Fa(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!q(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!q(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new vr(this)}M(cn,Ct),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){ol(this.g)},cn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Qo(c),c=_);y.i.push(new zf(y.Ya++,c)),y.G==3&&Ga(y)},cn.prototype.N=function(){this.g.l=null,delete this.j,ol(this.g),delete this.g,cn.aa.N.call(this)};function uc(c){Di.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}M(uc,Di);function cc(){tr.call(this),this.status=1}M(cc,tr);function vr(c){this.g=c}M(vr,lc),vr.prototype.ua=function(){Vt(this.g,"a")},vr.prototype.ta=function(c){Vt(this.g,new uc(c))},vr.prototype.sa=function(c){Vt(this.g,new cc)},vr.prototype.ra=function(){Vt(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Ub=function(){return new Ka},Vb=function(){return ka()},Mb=Pn,vp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nt.NO_ERROR=0,Nt.TIMEOUT=8,Nt.HTTP_ERROR=6,wh=Nt,zr.COMPLETE="complete",Pb=zr,Hu.EventType=hr,hr.OPEN="a",hr.CLOSE="b",hr.ERROR="c",hr.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,ru=Hu,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,kb=Qe}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});const ZE="@firebase/firestore",JE="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new of("@firebase/firestore");function To(){return _a.logLevel}function he(r,...e){if(_a.logLevel<=Me.DEBUG){const t=e.map(og);_a.debug(`Firestore (${zo}): ${r}`,...t)}}function Ei(r,...e){if(_a.logLevel<=Me.ERROR){const t=e.map(og);_a.error(`Firestore (${zo}): ${r}`,...t)}}function Do(r,...e){if(_a.logLevel<=Me.WARN){const t=e.map(og);_a.warn(`Firestore (${zo}): ${r}`,...t)}}function og(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(r="Unexpected state"){const e=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: `+r;throw Ei(e),new Error(e)}function Xe(r,e){r||Re()}function Ne(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends er{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rn.UNAUTHENTICATED))}shutdown(){}}class n2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class r2{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let u=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new yi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new yi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string"),new Lb(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new rn(e)}}class i2{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class s2{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new i2(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a2{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,mn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0);const s=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new e0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe(typeof t.token=="string"),this.R=t.token,new e0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=o2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function je(r,e){return r<e?-1:r>e?1:0}function Oo(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=-62135596800,n0=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*n0);return new Pt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<t0)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n0}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-t0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Pt(0,0))}static max(){return new Ie(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="__name__";class Rr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Re(),s===void 0?s=e.length-t:s>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Rr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=Rr.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Math.sign(e.length-t.length)}static compareSegments(e,t){const s=Rr.isNumericId(e),o=Rr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Rr.extractNumericId(e).compare(Rr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class st extends Rr{construct(e,t,s){return new st(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new st(t)}static emptyPath(){return new st([])}}const l2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Rr{construct(e,t,s){return new Wt(e,t,s)}static isValidIdentifier(e){return l2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===r0}static keyField(){return new Wt([r0])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new fe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(s+=d,o++):(u(),o++)}if(u(),h)throw new fe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(st.fromString(e))}static fromName(e){return new Ee(st.fromString(e).popFirst(5))}static empty(){return new Ee(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new st(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=-1;function u2(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new Pt(t+1,0):new Pt(t,s));return new bs(o,Ee.empty(),e)}function c2(r){return new bs(r.readTime,r.key,vu)}class bs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new bs(Ie.min(),Ee.empty(),vu)}static max(){return new bs(Ie.max(),Ee.empty(),vu)}}function h2(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:je(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==f2)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,s)=>{t(e)})}static reject(e){return new ee((t,s)=>{s(e)})}static waitFor(e){return new ee((t,s)=>{let o=0,u=0,h=!1;e.forEach(d=>{++o,d.next(()=>{++u,h&&u===o&&t()},p=>s(p))}),h=!0,u===o&&t()})}static or(e){let t=ee.resolve(!1);for(const s of e)t=t.next(o=>o?ee.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,u)=>{s.push(t.call(this,o,u))}),this.waitFor(s)}static mapArray(e,t){return new ee((s,o)=>{const u=e.length,h=new Array(u);let d=0;for(let p=0;p<u;p++){const g=p;t(e[g]).next(E=>{h[g]=E,++d,d===u&&s(h)},E=>o(E))}})}static doWhile(e,t){return new ee((s,o)=>{const u=()=>{e()===!0?t().next(()=>{u()},o):s()};u()})}}function m2(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.oe(s),this._e=s=>t.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}ff.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-1;function df(r){return r==null}function Lh(r){return r===0&&1/r==-1/0}function p2(r){return typeof r=="number"&&Number.isInteger(r)&&!Lh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="";function g2(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=i0(e)),e=y2(r.get(t),e);return i0(e)}function y2(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":t+="";break;case Bb:t+="";break;default:t+=u}}return t}function i0(r){return r+Bb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function xs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function zb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hh(this.root,e,this.comparator,!0)}}class hh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Xt.RED,this.left=o??Xt.EMPTY,this.right=u??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Xt(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,s,o,u){return this}insert(e,t,s){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new a0(this.data.getIterator())}getIteratorFrom(e){return new a0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mt(this.comparator);return t.data=e,t}}class a0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Mt(Wt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new qb("Invalid base64 string: "+u):u}}(e);return new Zt(t)}static fromUint8Array(e){const t=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const _2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(r){if(Xe(!!r),typeof r=="string"){let e=0;const t=_2.exec(r);if(Xe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Tt(r.seconds),nanos:Tt(r.nanos)}}function Tt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ss(r){return typeof r=="string"?Zt.fromBase64String(r):Zt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="server_timestamp",Hb="__type__",Gb="__previous_value__",$b="__local_write_time__";function ug(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Hb])===null||t===void 0?void 0:t.stringValue)===Fb}function mf(r){const e=r.mapValue.fields[Gb];return ug(e)?mf(e):e}function Eu(r){const e=ws(r.mapValue.fields[$b].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t,s,o,u,h,d,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g}}const jh="(default)";class Tu{constructor(e,t){this.projectId=e,this.database=t||jh}static empty(){return new Tu("","")}get isDefaultDatabase(){return this.database===jh}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="__type__",E2="__max__",fh={mapValue:{}},Qb="__vector__",Bh="value";function As(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ug(r)?4:b2(r)?9007199254740991:T2(r)?10:11:Re()}function kr(r,e){if(r===e)return!0;const t=As(r);if(t!==As(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Eu(r).isEqual(Eu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ws(o.timestampValue),d=ws(u.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Ss(o.bytesValue).isEqual(Ss(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return Tt(o.geoPointValue.latitude)===Tt(u.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Tt(o.integerValue)===Tt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Tt(o.doubleValue),d=Tt(u.doubleValue);return h===d?Lh(h)===Lh(d):isNaN(h)&&isNaN(d)}return!1}(r,e);case 9:return Oo(r.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},d=u.mapValue.fields||{};if(s0(h)!==s0(d))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(d[p]===void 0||!kr(h[p],d[p])))return!1;return!0}(r,e);default:return Re()}}function bu(r,e){return(r.values||[]).find(t=>kr(t,e))!==void 0}function ko(r,e){if(r===e)return 0;const t=As(r),s=As(e);if(t!==s)return je(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(r.booleanValue,e.booleanValue);case 2:return function(u,h){const d=Tt(u.integerValue||u.doubleValue),p=Tt(h.integerValue||h.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(r,e);case 3:return o0(r.timestampValue,e.timestampValue);case 4:return o0(Eu(r),Eu(e));case 5:return je(r.stringValue,e.stringValue);case 6:return function(u,h){const d=Ss(u),p=Ss(h);return d.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,h){const d=u.split("/"),p=h.split("/");for(let g=0;g<d.length&&g<p.length;g++){const E=je(d[g],p[g]);if(E!==0)return E}return je(d.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,h){const d=je(Tt(u.latitude),Tt(h.latitude));return d!==0?d:je(Tt(u.longitude),Tt(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return l0(r.arrayValue,e.arrayValue);case 10:return function(u,h){var d,p,g,E;const S=u.fields||{},R=h.fields||{},x=(d=S[Bh])===null||d===void 0?void 0:d.arrayValue,M=(p=R[Bh])===null||p===void 0?void 0:p.arrayValue,G=je(((g=x==null?void 0:x.values)===null||g===void 0?void 0:g.length)||0,((E=M==null?void 0:M.values)===null||E===void 0?void 0:E.length)||0);return G!==0?G:l0(x,M)}(r.mapValue,e.mapValue);case 11:return function(u,h){if(u===fh.mapValue&&h===fh.mapValue)return 0;if(u===fh.mapValue)return 1;if(h===fh.mapValue)return-1;const d=u.fields||{},p=Object.keys(d),g=h.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let S=0;S<p.length&&S<E.length;++S){const R=je(p[S],E[S]);if(R!==0)return R;const x=ko(d[p[S]],g[E[S]]);if(x!==0)return x}return je(p.length,E.length)}(r.mapValue,e.mapValue);default:throw Re()}}function o0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return je(r,e);const t=ws(r),s=ws(e),o=je(t.seconds,s.seconds);return o!==0?o:je(t.nanos,s.nanos)}function l0(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=ko(t[o],s[o]);if(u)return u}return je(t.length,s.length)}function Po(r){return Ep(r)}function Ep(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=ws(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ss(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Ee.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=Ep(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${Ep(t.fields[h])}`;return o+"}"}(r.mapValue):Re()}function Sh(r){switch(As(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mf(r);return e?16+Sh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ss(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Sh(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return xs(s.fields,(u,h)=>{o+=u.length+Sh(h)}),o}(r.mapValue);default:throw Re()}}function u0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Tp(r){return!!r&&"integerValue"in r}function cg(r){return!!r&&"arrayValue"in r}function c0(r){return!!r&&"nullValue"in r}function h0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ah(r){return!!r&&"mapValue"in r}function T2(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Kb])===null||t===void 0?void 0:t.stringValue)===Qb}function lu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return xs(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=lu(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lu(r.arrayValue.values[t]);return e}return Object.assign({},r)}function b2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===E2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ah(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(t)}setAll(e){let t=Wt.emptyPath(),s={},o=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}h?s[d.lastSegment()]=lu(h):o.push(d.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());Ah(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Ah(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){xs(t,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new En(lu(this.value))}}function Yb(r){const e=[];return xs(r.fields,(t,s)=>{const o=new Wt([t]);if(Ah(s)){const u=Yb(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,s,o,u,h,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=d}static newInvalidDocument(e){return new sn(e,0,Ie.min(),Ie.min(),Ie.min(),En.empty(),0)}static newFoundDocument(e,t,s,o){return new sn(e,1,t,Ie.min(),s,o,0)}static newNoDocument(e,t){return new sn(e,2,t,Ie.min(),Ie.min(),En.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Ie.min(),Ie.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t){this.position=e,this.inclusive=t}}function f0(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],h=r.position[o];if(u.field.isKeyField()?s=Ee.comparator(Ee.fromName(h.referenceValue),t.key):s=ko(h,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function d0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!kr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t="asc"){this.field=e,this.dir=t}}function w2(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{}class It extends Xb{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new A2(e,t,s):t==="array-contains"?new C2(e,s):t==="in"?new N2(e,s):t==="not-in"?new x2(e,s):t==="array-contains-any"?new D2(e,s):new It(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new R2(e,s):new I2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ko(t,this.value)):t!==null&&As(this.value)===As(t)&&this.matchesComparison(ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends Xb{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ur(e,t)}matches(e){return Wb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Wb(r){return r.op==="and"}function Zb(r){return S2(r)&&Wb(r)}function S2(r){for(const e of r.filters)if(e instanceof ur)return!1;return!0}function bp(r){if(r instanceof It)return r.field.canonicalString()+r.op.toString()+Po(r.value);if(Zb(r))return r.filters.map(e=>bp(e)).join(",");{const e=r.filters.map(t=>bp(t)).join(",");return`${r.op}(${e})`}}function Jb(r,e){return r instanceof It?function(s,o){return o instanceof It&&s.op===o.op&&s.field.isEqual(o.field)&&kr(s.value,o.value)}(r,e):r instanceof ur?function(s,o){return o instanceof ur&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,h,d)=>u&&Jb(h,o.filters[d]),!0):!1}(r,e):void Re()}function ew(r){return r instanceof It?function(t){return`${t.field.canonicalString()} ${t.op} ${Po(t.value)}`}(r):r instanceof ur?function(t){return t.op.toString()+" {"+t.getFilters().map(ew).join(" ,")+"}"}(r):"Filter"}class A2 extends It{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class R2 extends It{constructor(e,t){super(e,"in",t),this.keys=tw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class I2 extends It{constructor(e,t){super(e,"not-in",t),this.keys=tw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tw(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Ee.fromName(s.referenceValue))}class C2 extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cg(t)&&bu(t.arrayValue,this.value)}}class N2 extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bu(this.value.arrayValue,t)}}class x2 extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!bu(this.value.arrayValue,t)}}class D2 extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>bu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,t=null,s=[],o=[],u=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=d,this.le=null}}function m0(r,e=null,t=[],s=[],o=null,u=null,h=null){return new O2(r,e,t,s,o,u,h)}function hg(r){const e=Ne(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>bp(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),df(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Po(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Po(s)).join(",")),e.le=t}return e.le}function fg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!w2(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Jb(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!d0(r.startAt,e.startAt)&&d0(r.endAt,e.endAt)}function wp(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t=null,s=[],o=[],u=null,h="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=d,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function k2(r,e,t,s,o,u,h,d){return new Pu(r,e,t,s,o,u,h,d)}function pf(r){return new Pu(r)}function p0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function nw(r){return r.collectionGroup!==null}function uu(r){const e=Ne(r);if(e.he===null){e.he=[];const t=new Set;for(const u of e.explicitOrderBy)e.he.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new Mt(Wt.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.he.push(new qh(u,s))}),t.has(Wt.keyField().canonicalString())||e.he.push(new qh(Wt.keyField(),s))}return e.he}function xr(r){const e=Ne(r);return e.Pe||(e.Pe=P2(e,uu(r))),e.Pe}function P2(r,e){if(r.limitType==="F")return m0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new qh(o.field,u)});const t=r.endAt?new zh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new zh(r.startAt.position,r.startAt.inclusive):null;return m0(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Sp(r,e){const t=r.filters.concat([e]);return new Pu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ap(r,e,t){return new Pu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function gf(r,e){return fg(xr(r),xr(e))&&r.limitType===e.limitType}function rw(r){return`${hg(xr(r))}|lt:${r.limitType}`}function bo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>ew(o)).join(", ")}]`),df(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>Po(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>Po(o)).join(",")),`Target(${s})`}(xr(r))}; limitType=${r.limitType})`}function yf(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ee.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of uu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,d,p){const g=f0(h,d,p);return h.inclusive?g<=0:g<0}(s.startAt,uu(s),o)||s.endAt&&!function(h,d,p){const g=f0(h,d,p);return h.inclusive?g>=0:g>0}(s.endAt,uu(s),o))}(r,e)}function M2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function iw(r){return(e,t)=>{let s=!1;for(const o of uu(r)){const u=V2(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function V2(r,e,t){const s=r.field.isKeyField()?Ee.comparator(e.key,t.key):function(u,h,d){const p=h.data.field(u),g=d.data.field(u);return p!==null&&g!==null?ko(p,g):Re()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(t,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return zb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new ft(Ee.comparator);function Ti(){return U2}const sw=new ft(Ee.comparator);function iu(...r){let e=sw;for(const t of r)e=e.insert(t.key,t);return e}function aw(r){let e=sw;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function fa(){return cu()}function ow(){return cu()}function cu(){return new Ia(r=>r.toString(),(r,e)=>r.isEqual(e))}const L2=new ft(Ee.comparator),j2=new Mt(Ee.comparator);function Ve(...r){let e=j2;for(const t of r)e=e.add(t);return e}const B2=new Mt(je);function z2(){return B2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function lw(r){return{integerValue:""+r}}function q2(r,e){return p2(e)?lw(e):dg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this._=void 0}}function F2(r,e,t){return r instanceof wu?function(o,u){const h={fields:{[Hb]:{stringValue:Fb},[$b]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ug(u)&&(u=mf(u)),u&&(h.fields[Gb]=u),{mapValue:h}}(t,e):r instanceof Su?cw(r,e):r instanceof Au?hw(r,e):function(o,u){const h=uw(o,u),d=g0(h)+g0(o.Ie);return Tp(h)&&Tp(o.Ie)?lw(d):dg(o.serializer,d)}(r,e)}function H2(r,e,t){return r instanceof Su?cw(r,e):r instanceof Au?hw(r,e):t}function uw(r,e){return r instanceof Fh?function(s){return Tp(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class wu extends _f{}class Su extends _f{constructor(e){super(),this.elements=e}}function cw(r,e){const t=fw(e);for(const s of r.elements)t.some(o=>kr(o,s))||t.push(s);return{arrayValue:{values:t}}}class Au extends _f{constructor(e){super(),this.elements=e}}function hw(r,e){let t=fw(e);for(const s of r.elements)t=t.filter(o=>!kr(o,s));return{arrayValue:{values:t}}}class Fh extends _f{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function g0(r){return Tt(r.integerValue||r.doubleValue)}function fw(r){return cg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,t){this.field=e,this.transform=t}}function $2(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Su&&o instanceof Su||s instanceof Au&&o instanceof Au?Oo(s.elements,o.elements,kr):s instanceof Fh&&o instanceof Fh?kr(s.Ie,o.Ie):s instanceof wu&&o instanceof wu}(r.transform,e.transform)}class K2{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class vf{}function dw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new mg(r.key,Wn.none()):new Mu(r.key,r.data,Wn.none());{const t=r.data,s=En.empty();let o=new Mt(Wt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new Ds(r.key,s,new Dn(o.toArray()),Wn.none())}}function Q2(r,e,t){r instanceof Mu?function(o,u,h){const d=o.value.clone(),p=_0(o.fieldTransforms,u,h.transformResults);d.setAll(p),u.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(r,e,t):r instanceof Ds?function(o,u,h){if(!Rh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const d=_0(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(mw(o)),p.setAll(d),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function hu(r,e,t,s){return r instanceof Mu?function(u,h,d,p){if(!Rh(u.precondition,h))return d;const g=u.value.clone(),E=v0(u.fieldTransforms,p,h);return g.setAll(E),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ds?function(u,h,d,p){if(!Rh(u.precondition,h))return d;const g=v0(u.fieldTransforms,p,h),E=h.data;return E.setAll(mw(u)),E.setAll(g),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(S=>S.field))}(r,e,t,s):function(u,h,d){return Rh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(r,e,t)}function Y2(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=uw(s.transform,o||null);u!=null&&(t===null&&(t=En.empty()),t.set(s.field,u))}return t||null}function y0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Oo(s,o,(u,h)=>$2(u,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Mu extends vf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ds extends vf{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function mw(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function _0(r,e,t){const s=new Map;Xe(r.length===t.length);for(let o=0;o<t.length;o++){const u=r[o],h=u.transform,d=e.data.field(u.field);s.set(u.field,H2(h,d,t[o]))}return s}function v0(r,e,t){const s=new Map;for(const o of r){const u=o.transform,h=t.data.field(o.field);s.set(o.field,F2(u,h,e))}return s}class mg extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X2 extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Q2(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=hu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=hu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ow();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let d=this.applyToLocalView(h,u.mutatedFields);d=t.has(o.key)?null:d;const p=dw(h,d);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ie.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(t,s)=>y0(t,s))&&Oo(this.baseMutations,e.baseMutations,(t,s)=>y0(t,s))}}class pg{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Xe(e.mutations.length===s.length);let o=function(){return L2}();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new pg(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,Fe;function eD(r){switch(r){case te.OK:return Re();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Re()}}function pw(r){if(r===void 0)return Ei("GRPC error has no .code"),te.UNKNOWN;switch(r){case Rt.OK:return te.OK;case Rt.CANCELLED:return te.CANCELLED;case Rt.UNKNOWN:return te.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return te.INTERNAL;case Rt.UNAVAILABLE:return te.UNAVAILABLE;case Rt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Rt.NOT_FOUND:return te.NOT_FOUND;case Rt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Rt.ABORTED:return te.ABORTED;case Rt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Rt.DATA_LOSS:return te.DATA_LOSS;default:return Re()}}(Fe=Rt||(Rt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=new vs([4294967295,4294967295],0);function E0(r){const e=tD().encode(r),t=new Ob;return t.update(e),new Uint8Array(t.digest())}function T0(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new vs([t,s],0),new vs([o,u],0)]}class gg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new su(`Invalid padding: ${t}`);if(s<0)throw new su(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new su(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=vs.fromNumber(this.Ee)}Ae(e,t,s){let o=e.add(t.multiply(vs.fromNumber(s)));return o.compare(nD)===1&&(o=new vs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=E0(e),[s,o]=T0(t);for(let u=0;u<this.hashCount;u++){const h=this.Ae(s,o,u);if(!this.Re(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new gg(u,o,t);return s.forEach(d=>h.insert(d)),h}insert(e){if(this.Ee===0)return;const t=E0(e),[s,o]=T0(t);for(let u=0;u<this.hashCount;u++){const h=this.Ae(s,o,u);this.Ve(h)}}Ve(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ef(Ie.min(),o,new ft(je),Ti(),Ve())}}class Vu{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Vu(s,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,t,s,o){this.me=e,this.removedTargetIds=t,this.key=s,this.fe=o}}class gw{constructor(e,t){this.targetId=e,this.ge=t}}class yw{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class b0{constructor(){this.pe=0,this.ye=w0(),this.we=Zt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ve(),t=Ve(),s=Ve();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Re()}}),new Vu(this.we,this.Se,e,t,s)}Me(){this.be=!1,this.ye=w0()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Xe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class rD{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ti(),this.$e=dh(),this.Ke=dh(),this.Ue=new ft(je)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const s=this.He(t);switch(e.state){case 0:this.Je(t)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(t);break;case 3:this.Je(t)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),s.Ce(e.resumeToken));break;default:Re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((s,o)=>{this.Je(o)&&t(o)})}Ze(e){const t=e.targetId,s=e.ge.count,o=this.Xe(t);if(o){const u=o.target;if(wp(u))if(s===0){const h=new Ee(u.path);this.ze(t,h,sn.newNoDocument(h,Ie.min()))}else Xe(s===1);else{const h=this.et(t);if(h!==s){const d=this.tt(e),p=d?this.nt(d,e,h):1;if(p!==0){this.Ye(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,g)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let h,d;try{h=Ss(s).toUint8Array()}catch(p){if(p instanceof qb)return Do("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new gg(h,o,u)}catch(p){return Do(p instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ee===0?null:d}nt(e,t,s){return t.ge.count===s-this.st(e,t.targetId)?0:2}st(e,t){const s=this.ke.getRemoteKeysForTarget(t);let o=0;return s.forEach(u=>{const h=this.ke.it(),d=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,u,null),o++)}),o}ot(e){const t=new Map;this.qe.forEach((u,h)=>{const d=this.Xe(h);if(d){if(u.current&&wp(d.target)){const p=new Ee(d.target.path);this._t(p).has(h)||this.ut(h,p)||this.ze(h,p,sn.newNoDocument(p,e))}u.ve&&(t.set(h,u.Fe()),u.Me())}});let s=Ve();this.Ke.forEach((u,h)=>{let d=!0;h.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(u))}),this.Qe.forEach((u,h)=>h.setReadTime(e));const o=new Ef(e,t,this.Ue,this.Qe,s);return this.Qe=Ti(),this.$e=dh(),this.Ke=dh(),this.Ue=new ft(je),o}Ge(e,t){if(!this.Je(e))return;const s=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,s),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,t)?o.xe(t,1):o.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),s&&(this.Qe=this.Qe.insert(t,s))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new b0,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Mt(je),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Mt(je),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new b0),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function dh(){return new ft(Ee.comparator)}function w0(){return new ft(Ee.comparator)}const iD={asc:"ASCENDING",desc:"DESCENDING"},sD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aD={and:"AND",or:"OR"};class oD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rp(r,e){return r.useProto3Json||df(e)?e:{value:e}}function Hh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _w(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function lD(r,e){return Hh(r,e.toTimestamp())}function Dr(r){return Xe(!!r),Ie.fromTimestamp(function(t){const s=ws(t);return new Pt(s.seconds,s.nanos)}(r))}function yg(r,e){return Ip(r,e).canonicalString()}function Ip(r,e){const t=function(o){return new st(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function vw(r){const e=st.fromString(r);return Xe(Sw(e)),e}function Cp(r,e){return yg(r.databaseId,e.path)}function Zm(r,e){const t=vw(e);if(t.get(1)!==r.databaseId.projectId)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(Tw(t))}function Ew(r,e){return yg(r.databaseId,e)}function uD(r){const e=vw(r);return e.length===4?st.emptyPath():Tw(e)}function Np(r){return new st(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Tw(r){return Xe(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function S0(r,e,t){return{name:Cp(r,e),fields:t.value.mapValue.fields}}function cD(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,E){return g.useProto3Json?(Xe(E===void 0||typeof E=="string"),Zt.fromBase64String(E||"")):(Xe(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Zt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(g){const E=g.code===void 0?te.UNKNOWN:pw(g.code);return new fe(E,g.message||"")}(h);t=new yw(s,o,u,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Zm(r,s.document.name),u=Dr(s.document.updateTime),h=s.document.createTime?Dr(s.document.createTime):Ie.min(),d=new En({mapValue:{fields:s.document.fields}}),p=sn.newFoundDocument(o,u,h,d),g=s.targetIds||[],E=s.removedTargetIds||[];t=new Ih(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Zm(r,s.document),u=s.readTime?Dr(s.readTime):Ie.min(),h=sn.newNoDocument(o,u),d=s.removedTargetIds||[];t=new Ih([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Zm(r,s.document),u=s.removedTargetIds||[];t=new Ih([],u,o,null)}else{if(!("filter"in e))return Re();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new J2(o,u),d=s.targetId;t=new gw(d,h)}}return t}function hD(r,e){let t;if(e instanceof Mu)t={update:S0(r,e.key,e.value)};else if(e instanceof mg)t={delete:Cp(r,e.key)};else if(e instanceof Ds)t={update:S0(r,e.key,e.data),updateMask:ED(e.fieldMask)};else{if(!(e instanceof X2))return Re();t={verify:Cp(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const d=h.transform;if(d instanceof wu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Su)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Au)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Fh)return{fieldPath:h.field.canonicalString(),increment:d.Ie};throw Re()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:lD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Re()}(r,e.precondition)),t}function fD(r,e){return r&&r.length>0?(Xe(e!==void 0),r.map(t=>function(o,u){let h=o.updateTime?Dr(o.updateTime):Dr(u);return h.isEqual(Ie.min())&&(h=Dr(u)),new K2(h,o.transformResults||[])}(t,e))):[]}function dD(r,e){return{documents:[Ew(r,e.path)]}}function mD(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Ew(r,o);const u=function(g){if(g.length!==0)return ww(ur.create(g,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const h=function(g){if(g.length!==0)return g.map(E=>function(R){return{field:wo(R.field),direction:yD(R.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=Rp(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:t,parent:o}}function pD(r){let e=uD(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Xe(s===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=function(S){const R=bw(S);return R instanceof ur&&Zb(R)?R.getFilters():[R]}(t.where));let h=[];t.orderBy&&(h=function(S){return S.map(R=>function(M){return new qh(So(M.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(R))}(t.orderBy));let d=null;t.limit&&(d=function(S){let R;return R=typeof S=="object"?S.value:S,df(R)?null:R}(t.limit));let p=null;t.startAt&&(p=function(S){const R=!!S.before,x=S.values||[];return new zh(x,R)}(t.startAt));let g=null;return t.endAt&&(g=function(S){const R=!S.before,x=S.values||[];return new zh(x,R)}(t.endAt)),k2(e,o,h,u,d,"F",p,g)}function gD(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bw(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=So(t.unaryFilter.field);return It.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=So(t.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=So(t.unaryFilter.field);return It.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=So(t.unaryFilter.field);return It.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(r):r.fieldFilter!==void 0?function(t){return It.create(So(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ur.create(t.compositeFilter.filters.map(s=>bw(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}}(t.compositeFilter.op))}(r):Re()}function yD(r){return iD[r]}function _D(r){return sD[r]}function vD(r){return aD[r]}function wo(r){return{fieldPath:r.canonicalString()}}function So(r){return Wt.fromServerFormat(r.fieldPath)}function ww(r){return r instanceof It?function(t){if(t.op==="=="){if(h0(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NAN"}};if(c0(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(h0(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NAN"}};if(c0(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(t.field),op:_D(t.op),value:t.value}}}(r):r instanceof ur?function(t){const s=t.getFilters().map(o=>ww(o));return s.length===1?s[0]:{compositeFilter:{op:vD(t.op),filters:s}}}(r):Re()}function ED(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Sw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t,s,o,u=Ie.min(),h=Ie.min(),d=Zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.Tt=e}}function bD(r){const e=pD({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ap(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.Tn=new SD}addToCollectionParentIndex(e,t){return this.Tn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(bs.min())}updateCollectionGroup(e,t,s){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class SD{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Mt(st.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Mt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Aw=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(Aw,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Mo(0)}static Un(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="LruGarbageCollector",AD=1048576;function I0([r,e],[t,s]){const o=je(r,t);return o===0?je(e,s):o}class RD{constructor(e){this.Hn=e,this.buffer=new Mt(I0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();I0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ID{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){he(R0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fo(t)?he(R0,"Ignoring IndexedDB error during garbage collection: ",t):await qo(t)}await this.er(3e5)})}}class CD{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(ff.ae);const s=new RD(t);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.tr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(A0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A0):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let s,o,u,h,d,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(s=S,d=Date.now(),this.removeTargets(e,s,t))).next(S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(S=>(g=Date.now(),To()<=Me.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${u} targets in `+(p-d)+`ms
	Removed ${S} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}function ND(r,e){return new CD(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.changes=new Ia(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ee.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&hu(s.mutation,o,Dn.empty(),Pt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ve()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ve()){const o=fa();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(u=>{let h=iu();return u.forEach((d,p)=>{h=h.insert(d,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=fa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ve()))}populateOverlays(e,t,s){const o=[];return s.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,s,o){let u=Ti();const h=cu(),d=function(){return cu()}();return t.forEach((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof Ds)?u=u.insert(g.key,g):E!==void 0?(h.set(g.key,E.mutation.getFieldMask()),hu(E.mutation,g,E.mutation.getFieldMask(),Pt.now())):h.set(g.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,E)=>h.set(g,E)),t.forEach((g,E)=>{var S;return d.set(g,new DD(E,(S=h.get(g))!==null&&S!==void 0?S:null))}),d))}recalculateAndSaveOverlays(e,t){const s=cu();let o=new ft((h,d)=>h-d),u=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let E=s.get(p)||Dn.empty();E=d.applyToLocalView(g,E),s.set(p,E);const S=(o.get(d.batchId)||Ve()).add(p);o=o.insert(d.batchId,S)})}).next(()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,E=p.value,S=ow();E.forEach(R=>{if(!u.has(R)){const x=dw(t.get(R),s.get(R));x!==null&&S.set(R,x),u=u.add(R)}}),h.push(this.documentOverlayCache.saveOverlays(e,g,S))}return ee.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):ee.resolve(fa());let d=vu,p=u;return h.next(g=>ee.forEach(g,(E,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),u.get(E)?ee.resolve():this.remoteDocumentCache.getEntry(e,E).next(R=>{p=p.insert(E,R)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Ve())).next(E=>({batchId:d,changes:aw(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(s=>{let o=iu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let h=iu();return this.indexManager.getCollectionParents(e,u).next(d=>ee.forEach(d,p=>{const g=function(S,R){return new Pu(R,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(t,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(E=>{E.forEach((S,R)=>{h=h.insert(S,R)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o))).next(h=>{u.forEach((p,g)=>{const E=g.getKey();h.get(E)===null&&(h=h.insert(E,sn.newInvalidDocument(E)))});let d=iu();return h.forEach((p,g)=>{const E=u.get(p);E!==void 0&&hu(E.mutation,g,Dn.empty(),Pt.now()),yf(t,g)&&(d=d.insert(p,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ee.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Dr(o.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(o){return{name:o.name,query:bD(o.bundledQuery),readTime:Dr(o.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.overlays=new ft(Ee.comparator),this.Rr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const s=fa();return ee.forEach(t,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,u)=>{this.Et(e,t,u)}),ee.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),ee.resolve()}getOverlaysForCollection(e,t,s){const o=fa(),u=t.length+1,h=new Ee(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new ft((g,E)=>g-E);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=fa(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const d=fa(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>d.set(g,E)),!(d.size()>=o)););return ee.resolve(d)}Et(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new Z2(t,s));let u=this.Rr.get(t);u===void 0&&(u=Ve(),this.Rr.set(t,u)),this.Rr.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Vr=new Mt(Ft.mr),this.gr=new Mt(Ft.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const s=new Ft(e,t);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.wr(new Ft(e,t))}Sr(e,t){e.forEach(s=>this.removeReference(s,t))}br(e){const t=new Ee(new st([])),s=new Ft(t,e),o=new Ft(t,e+1),u=[];return this.gr.forEachInRange([s,o],h=>{this.wr(h),u.push(h.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Ee(new st([])),s=new Ft(t,e),o=new Ft(t,e+1);let u=Ve();return this.gr.forEachInRange([s,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Ft(e,0),s=this.Vr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ft{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Ee.comparator(e.key,t.key)||je(e.Cr,t.Cr)}static pr(e,t){return je(e.Cr,t.Cr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Mt(Ft.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new W2(u,t,s,o);this.mutationQueue.push(h);for(const d of o)this.Mr=this.Mr.add(new Ft(d.key,u)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ee.resolve(h)}lookupMutationBatch(e,t){return ee.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Nr(s),u=o<0?0:o;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?lg:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],h=>{const d=this.Or(h.Cr);u.push(d)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Mt(je);return t.forEach(o=>{const u=new Ft(o,0),h=new Ft(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,h],d=>{s=s.add(d.Cr)})}),ee.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;Ee.isDocumentKey(u)||(u=u.child(""));const h=new Ft(new Ee(u),0);let d=new Mt(je);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(d=d.add(p.Cr)),!0)},h),ee.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Xe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return ee.forEach(t.mutations,o=>{const u=new Ft(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,t){const s=new Ft(t,0),o=this.Mr.firstAfterOrEqual(s);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.kr=e,this.docs=function(){return new ft(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,h=this.kr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ee.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let s=Ti();return t.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():sn.newInvalidDocument(o))}),ee.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=Ti();const h=t.path,d=new Ee(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||h2(c2(E),s)<=0||(o.has(E.key)||yf(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,t,s,o){Re()}qr(e,t){return ee.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new LD(this)}getSize(e){return ee.resolve(this.size)}}class LD extends xD{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),ee.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.persistence=e,this.Qr=new Ia(t=>hg(t),fg),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.$r=0,this.Kr=new _g,this.targetCount=0,this.Ur=Mo.Kn()}forEachTarget(e,t){return this.Qr.forEach((s,o)=>t(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.$r&&(this.$r=t),ee.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.zn(t),ee.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.Qr.forEach((h,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.Qr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),ee.waitFor(u).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const s=this.Qr.get(t)||null;return ee.resolve(s)}addMatchingKeys(e,t,s){return this.Kr.yr(t,s),ee.resolve()}removeMatchingKeys(e,t,s){this.Kr.Sr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Kr.vr(t);return ee.resolve(s)}containsKey(e,t){return ee.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new ff(0),this.zr=!1,this.zr=!0,this.jr=new MD,this.referenceDelegate=e(this),this.Hr=new jD(this),this.indexManager=new wD,this.remoteDocumentCache=function(o){return new UD(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new TD(t),this.Yr=new kD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Wr[e.toKey()];return s||(s=new VD(t,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,s){he("MemoryPersistence","Starting transaction:",e);const o=new BD(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,t){return ee.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,t)))}}class BD extends d2{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.ti=new _g,this.ni=null}static ri(e){return new vg(e)}get ii(){if(this.ni)return this.ni;throw Re()}addReference(e,t,s){return this.ti.addReference(s,t),this.ii.delete(s.toString()),ee.resolve()}removeReference(e,t,s){return this.ti.removeReference(s,t),this.ii.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ee.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,s=>{const o=Ee.fromPath(s);return this.si(e,o).next(u=>{u||t.removeEntry(o,Ie.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(s=>{s?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ee.or([()=>ee.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Gh{constructor(e,t){this.persistence=e,this.oi=new Ia(s=>g2(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=ND(this,t)}static ri(e,t){return new Gh(e,t)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}sr(e){let t=0;return this.rr(e,s=>{t++}).next(()=>t)}rr(e,t){return ee.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?ee.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,h=>this.ar(e,h,t).next(d=>{d||(s++,u.removeEntry(h,Ie.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sh(e.data.value)),t}ar(e,t,s){return ee.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.oi.get(t);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Hi=s,this.Ji=o}static Yi(e,t){let s=Ve(),o=Ve();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Eg(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return d1()?8:m2(on())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.rs(e,t).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.ss(e,t,o,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new zD;return this._s(e,t,h).next(d=>{if(u.result=d,this.Xi)return this.us(e,t,h,d.size)})}).next(()=>u.result)}us(e,t,s,o){return s.documentReadCount<this.es?(To()<=Me.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(To()<=Me.DEBUG&&he("QueryEngine","Query:",bo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(To()<=Me.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):ee.resolve())}rs(e,t){if(p0(t))return ee.resolve(null);let s=xr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Ap(t,null,"F"),s=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=Ve(...u);return this.ns.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(t,d);return this.ls(t,g,h,p.readTime)?this.rs(e,Ap(t,null,"F")):this.hs(e,g,t,p)}))})))}ss(e,t,s,o){return p0(t)||o.isEqual(Ie.min())?ee.resolve(null):this.ns.getDocuments(e,s).next(u=>{const h=this.cs(t,u);return this.ls(t,h,s,o)?ee.resolve(null):(To()<=Me.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.hs(e,h,t,u2(o,vu)).next(d=>d))})}cs(e,t){let s=new Mt(iw(e));return t.forEach((o,u)=>{yf(e,u)&&(s=s.add(u))}),s}ls(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,t,s){return To()<=Me.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",bo(t)),this.ns.getDocumentsMatchingQuery(e,t,bs.min(),s)}hs(e,t,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="LocalStore",FD=3e8;class HD{constructor(e,t,s,o){this.persistence=e,this.Ps=t,this.serializer=o,this.Ts=new ft(je),this.Is=new Ia(u=>hg(u),fg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OD(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function GD(r,e,t,s){return new HD(r,e,t,s)}async function Iw(r,e){const t=Ne(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,t.As(e),t.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],d=[];let p=Ve();for(const g of o){h.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){d.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:h,addedBatchIds:d}))})})}function $D(r,e){const t=Ne(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,p,g,E){const S=g.batch,R=S.keys();let x=ee.resolve();return R.forEach(M=>{x=x.next(()=>E.getEntry(p,M)).next(G=>{const V=g.docVersions.get(M);Xe(V!==null),G.version.compareTo(V)<0&&(S.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),E.addEntry(G)))})}),x.next(()=>d.mutationQueue.removeMutationBatch(p,S))}(t,s,e,u).next(()=>u.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let p=Ve();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function Cw(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function KD(r,e){const t=Ne(r),s=e.snapshotVersion;let o=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.ds.newChangeBuffer({trackRemovals:!0});o=t.Ts;const d=[];e.targetChanges.forEach((E,S)=>{const R=o.get(S);if(!R)return;d.push(t.Hr.removeMatchingKeys(u,E.removedDocuments,S).next(()=>t.Hr.addMatchingKeys(u,E.addedDocuments,S)));let x=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?x=x.withResumeToken(Zt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):E.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(E.resumeToken,s)),o=o.insert(S,x),function(G,V,z){return G.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=FD?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(R,x,E)&&d.push(t.Hr.updateTargetData(u,x))});let p=Ti(),g=Ve();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))}),d.push(QD(u,h,e.documentUpdates).next(E=>{p=E.Vs,g=E.fs})),!s.isEqual(Ie.min())){const E=t.Hr.getLastRemoteSnapshotVersion(u).next(S=>t.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));d.push(E)}return ee.waitFor(d).next(()=>h.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(t.Ts=o,u))}function QD(r,e,t){let s=Ve(),o=Ve();return t.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let h=Ti();return t.forEach((d,p)=>{const g=u.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(d,p.readTime),h=h.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(d,p)):he(Tg,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)}),{Vs:h,fs:o}})}function YD(r,e){const t=Ne(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=lg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function XD(r,e){const t=Ne(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Hr.getTargetData(s,e).next(u=>u?(o=u,ee.resolve(o)):t.Hr.allocateTargetId(s).next(h=>(o=new gs(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(s.targetId,s),t.Is.set(e,s.targetId)),s})}async function xp(r,e,t){const s=Ne(r),o=s.Ts.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Fo(h))throw h;he(Tg,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function C0(r,e,t){const s=Ne(r);let o=Ie.min(),u=Ve();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,g,E){const S=Ne(p),R=S.Is.get(E);return R!==void 0?ee.resolve(S.Ts.get(R)):S.Hr.getTargetData(g,E)}(s,h,xr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(h,d.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(h,e,t?o:Ie.min(),t?u:Ve())).next(d=>(WD(s,M2(e),d),{documents:d,gs:u})))}function WD(r,e,t){let s=r.Es.get(e)||Ie.min();t.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Es.set(e,s)}class N0{constructor(){this.activeTargetIds=z2()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZD{constructor(){this.ho=new N0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,s){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new N0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="ConnectivityMonitor";class D0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){he(x0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){he(x0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh=null;function Dp(){return mh===null?mh=function(){return 268435456+Math.round(2147483648*Math.random())}():mh++,"0x"+mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="RestConnection",eO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tO{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===jh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,t,s,o,u){const h=Dp(),d=this.bo(e,t.toUriEncodedString());he(Jm,`Sending RPC '${e}' ${h}:`,d,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,d,p,s).then(g=>(he(Jm,`Received RPC '${e}' ${h}: `,g),g),g=>{throw Do(Jm,`RPC '${e}' ${h} failed with error: `,g,"url: ",d,"request:",s),g})}Co(e,t,s,o,u,h){return this.So(e,t,s,o,u)}Do(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,t){const s=eO[e];return`${this.po}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class rO extends tO{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,s,o){const u=Dp();return new Promise((h,d)=>{const p=new kb;p.setWithCredentials(!0),p.listenOnce(Pb.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case wh.NO_ERROR:const E=p.getResponseJson();he(nn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),h(E);break;case wh.TIMEOUT:he(nn,`RPC '${e}' ${u} timed out`),d(new fe(te.DEADLINE_EXCEEDED,"Request time out"));break;case wh.HTTP_ERROR:const S=p.getStatus();if(he(nn,`RPC '${e}' ${u} failed with status:`,S,"response text:",p.getResponseText()),S>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const x=R==null?void 0:R.error;if(x&&x.status&&x.message){const M=function(V){const z=V.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(z)>=0?z:te.UNKNOWN}(x.status);d(new fe(M,x.message))}else d(new fe(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new fe(te.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{he(nn,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);he(nn,`RPC '${e}' ${u} sending request:`,o),p.send(t,"POST",g,s,15)})}Wo(e,t,s){const o=Dp(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Ub(),d=Vb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const E=u.join("");he(nn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const S=h.createWebChannel(E,p);let R=!1,x=!1;const M=new nO({Fo:V=>{x?he(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(R||(he(nn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),R=!0),he(nn,`RPC '${e}' stream ${o} sending:`,V),S.send(V))},Mo:()=>S.close()}),G=(V,z,q)=>{V.listen(z,K=>{try{q(K)}catch(re){setTimeout(()=>{throw re},0)}})};return G(S,ru.EventType.OPEN,()=>{x||(he(nn,`RPC '${e}' stream ${o} transport opened.`),M.Qo())}),G(S,ru.EventType.CLOSE,()=>{x||(x=!0,he(nn,`RPC '${e}' stream ${o} transport closed`),M.Ko())}),G(S,ru.EventType.ERROR,V=>{x||(x=!0,Do(nn,`RPC '${e}' stream ${o} transport errored:`,V),M.Ko(new fe(te.UNAVAILABLE,"The operation could not be completed")))}),G(S,ru.EventType.MESSAGE,V=>{var z;if(!x){const q=V.data[0];Xe(!!q);const K=q,re=(K==null?void 0:K.error)||((z=K[0])===null||z===void 0?void 0:z.error);if(re){he(nn,`RPC '${e}' stream ${o} received error:`,re);const se=re.status;let Z=function(b){const I=Rt[b];if(I!==void 0)return pw(I)}(se),P=re.message;Z===void 0&&(Z=te.INTERNAL,P="Unknown error status: "+se+" with message "+re.message),x=!0,M.Ko(new fe(Z,P)),S.close()}else he(nn,`RPC '${e}' stream ${o} received:`,q),M.Uo(q)}}),G(d,Mb.STAT_EVENT,V=>{V.stat===vp.PROXY?he(nn,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===vp.NOPROXY&&he(nn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(r){return new oD(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=t,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,t-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="PersistentStream";class xw{constructor(e,t,s,o,u,h,d,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Nw(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Ei(t.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===t&&this.V_(s,o)},s=>{e(()=>{const o=new fe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,t){const s=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return he(O0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(he(O0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iO extends xw{constructor(e,t,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=cD(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ie.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ie.min():h.readTime?Dr(h.readTime):Ie.min()}(e);return this.listener.p_(t,s)}y_(e){const t={};t.database=Np(this.serializer),t.addTarget=function(u,h){let d;const p=h.target;if(d=wp(p)?{documents:dD(u,p)}:{query:mD(u,p).ht},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=_w(u,h.resumeToken);const g=Rp(u,h.expectedCount);g!==null&&(d.expectedCount=g)}else if(h.snapshotVersion.compareTo(Ie.min())>0){d.readTime=Hh(u,h.snapshotVersion.toTimestamp());const g=Rp(u,h.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const s=gD(this.serializer,e);s&&(t.labels=s),this.I_(t)}w_(e){const t={};t.database=Np(this.serializer),t.removeTarget=e,this.I_(t)}}class sO extends xw{constructor(e,t,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=fD(e.writeResults,e.commitTime),s=Dr(e.commitTime);return this.listener.v_(s,t)}C_(){const e={};e.database=Np(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>hD(this.serializer,s))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{}class oO extends aO{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.So(e,Ip(t,s),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(te.UNKNOWN,u.toString())})}Co(e,t,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Co(e,Ip(t,s),o,h,d,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new fe(te.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class lO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ei(t),this.N_=!1):he("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class uO{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(h=>{s.enqueueAndForget(async()=>{Ca(this)&&(he(va,"Restarting streams for network reachability change."),await async function(p){const g=Ne(p);g.W_.add(4),await Uu(g),g.j_.set("Unknown"),g.W_.delete(4),await bf(g)}(this))})}),this.j_=new lO(s,o)}}async function bf(r){if(Ca(r))for(const e of r.G_)await e(!0)}async function Uu(r){for(const e of r.G_)await e(!1)}function Dw(r,e){const t=Ne(r);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Ag(t)?Sg(t):Ho(t).c_()&&wg(t,e))}function bg(r,e){const t=Ne(r),s=Ho(t);t.U_.delete(e),s.c_()&&Ow(t,e),t.U_.size===0&&(s.c_()?s.P_():Ca(t)&&t.j_.set("Unknown"))}function wg(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(r).y_(e)}function Ow(r,e){r.H_.Ne(e),Ho(r).w_(e)}function Sg(r){r.H_=new rD({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.U_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Ho(r).start(),r.j_.B_()}function Ag(r){return Ca(r)&&!Ho(r).u_()&&r.U_.size>0}function Ca(r){return Ne(r).W_.size===0}function kw(r){r.H_=void 0}async function cO(r){r.j_.set("Online")}async function hO(r){r.U_.forEach((e,t)=>{wg(r,e)})}async function fO(r,e){kw(r),Ag(r)?(r.j_.q_(e),Sg(r)):r.j_.set("Unknown")}async function dO(r,e,t){if(r.j_.set("Online"),e instanceof yw&&e.state===2&&e.cause)try{await async function(o,u){const h=u.cause;for(const d of u.targetIds)o.U_.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.U_.delete(d),o.H_.removeTarget(d))}(r,e)}catch(s){he(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await $h(r,s)}else if(e instanceof Ih?r.H_.We(e):e instanceof gw?r.H_.Ze(e):r.H_.je(e),!t.isEqual(Ie.min()))try{const s=await Cw(r.localStore);t.compareTo(s)>=0&&await function(u,h){const d=u.H_.ot(h);return d.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.U_.get(g);E&&u.U_.set(g,E.withResumeToken(p.resumeToken,h))}}),d.targetMismatches.forEach((p,g)=>{const E=u.U_.get(p);if(!E)return;u.U_.set(p,E.withResumeToken(Zt.EMPTY_BYTE_STRING,E.snapshotVersion)),Ow(u,p);const S=new gs(E.target,p,g,E.sequenceNumber);wg(u,S)}),u.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(s){he(va,"Failed to raise snapshot:",s),await $h(r,s)}}async function $h(r,e,t){if(!Fo(e))throw e;r.W_.add(1),await Uu(r),r.j_.set("Offline"),t||(t=()=>Cw(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{he(va,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await bf(r)})}function Pw(r,e){return e().catch(t=>$h(r,t,e))}async function wf(r){const e=Ne(r),t=Rs(e);let s=e.K_.length>0?e.K_[e.K_.length-1].batchId:lg;for(;mO(e);)try{const o=await YD(e.localStore,s);if(o===null){e.K_.length===0&&t.P_();break}s=o.batchId,pO(e,o)}catch(o){await $h(e,o)}Mw(e)&&Vw(e)}function mO(r){return Ca(r)&&r.K_.length<10}function pO(r,e){r.K_.push(e);const t=Rs(r);t.c_()&&t.S_&&t.b_(e.mutations)}function Mw(r){return Ca(r)&&!Rs(r).u_()&&r.K_.length>0}function Vw(r){Rs(r).start()}async function gO(r){Rs(r).C_()}async function yO(r){const e=Rs(r);for(const t of r.K_)e.b_(t.mutations)}async function _O(r,e,t){const s=r.K_.shift(),o=pg.from(s,e,t);await Pw(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await wf(r)}async function vO(r,e){e&&Rs(r).S_&&await async function(s,o){if(function(h){return eD(h)&&h!==te.ABORTED}(o.code)){const u=s.K_.shift();Rs(s).h_(),await Pw(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await wf(s)}}(r,e),Mw(r)&&Vw(r)}async function k0(r,e){const t=Ne(r);t.asyncQueue.verifyOperationInProgress(),he(va,"RemoteStore received new credentials");const s=Ca(t);t.W_.add(3),await Uu(t),s&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await bf(t)}async function EO(r,e){const t=Ne(r);e?(t.W_.delete(2),await bf(t)):e||(t.W_.add(2),await Uu(t),t.j_.set("Unknown"))}function Ho(r){return r.J_||(r.J_=function(t,s,o){const u=Ne(t);return u.M_(),new iO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{xo:cO.bind(null,r),No:hO.bind(null,r),Lo:fO.bind(null,r),p_:dO.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),Ag(r)?Sg(r):r.j_.set("Unknown")):(await r.J_.stop(),kw(r))})),r.J_}function Rs(r){return r.Y_||(r.Y_=function(t,s,o){const u=Ne(t);return u.M_(),new sO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:gO.bind(null,r),Lo:vO.bind(null,r),D_:yO.bind(null,r),v_:_O.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await wf(r)):(await r.Y_.stop(),r.K_.length>0&&(he(va,`Stopping write stream with ${r.K_.length} pending writes`),r.K_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const h=Date.now()+s,d=new Rg(e,t,h,o,u);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(r,e){if(Ei("AsyncQueue",`${e}: ${r}`),Fo(r))return new fe(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=iu(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.Z_=new ft(Ee.comparator)}track(e){const t=e.doc.key,s=this.Z_.get(t);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(t):e.type===1&&s.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Re():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class Vo{constructor(e,t,s,o,u,h,d,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,o,u){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new Vo(e,t,Co.emptySet(t),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class bO{constructor(){this.queries=M0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,s){const o=Ne(t),u=o.queries;o.queries=M0(),u.forEach((h,d)=>{for(const p of d.ta)p.onError(s)})})(this,new fe(te.ABORTED,"Firestore shutting down"))}}function M0(){return new Ia(r=>rw(r),gf)}async function Cg(r,e){const t=Ne(r);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new TO,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await t.onListen(o,!0);break;case 1:u.ea=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=Ig(h,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,u),u.ta.push(e),e.sa(t.onlineState),u.ea&&e.oa(u.ea)&&xg(t)}async function Ng(r,e){const t=Ne(r),s=e.query;let o=3;const u=t.queries.get(s);if(u){const h=u.ta.indexOf(e);h>=0&&(u.ta.splice(h,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function wO(r,e){const t=Ne(r);let s=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const d of h.ta)d.oa(o)&&(s=!0);h.ea=o}}s&&xg(t)}function SO(r,e,t){const s=Ne(r),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(t);s.queries.delete(e)}function xg(r){r.ia.forEach(e=>{e.next()})}var Op,V0;(V0=Op||(Op={}))._a="default",V0.Cache="cache";class Dg{constructor(e,t,s){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const s=t!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.key=e}}class Lw{constructor(e){this.key=e}}class AO{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ve(),this.mutatedKeys=Ve(),this.ya=iw(e),this.wa=new Co(this.ya)}get Sa(){return this.fa}ba(e,t){const s=t?t.Da:new P0,o=t?t.wa:this.wa;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,S)=>{const R=o.get(E),x=yf(this.query,S)?S:null,M=!!R&&this.mutatedKeys.has(R.key),G=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let V=!1;R&&x?R.data.isEqual(x.data)?M!==G&&(s.track({type:3,doc:x}),V=!0):this.va(R,x)||(s.track({type:2,doc:x}),V=!0,(p&&this.ya(x,p)>0||g&&this.ya(x,g)<0)&&(d=!0)):!R&&x?(s.track({type:0,doc:x}),V=!0):R&&!x&&(s.track({type:1,doc:R}),V=!0,(p||g)&&(d=!0)),V&&(x?(h=h.add(x),u=G?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{wa:h,Da:s,ls:d,mutatedKeys:u}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const h=e.Da.X_();h.sort((E,S)=>function(x,M){const G=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return G(x)-G(M)}(E.type,S.type)||this.ya(E.doc,S.doc)),this.Ca(s),o=o!=null&&o;const d=t&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,h.length!==0||g?{snapshot:new Vo(this.query,e.wa,u,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new P0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ve(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const t=[];return e.forEach(s=>{this.pa.has(s)||t.push(new Lw(s))}),this.pa.forEach(s=>{e.has(s)||t.push(new Uw(s))}),t}Oa(e){this.fa=e.gs,this.pa=Ve();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Vo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Og="SyncEngine";class RO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class IO{constructor(e){this.key=e,this.Ba=!1}}class CO{constructor(e,t,s,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new Ia(d=>rw(d),gf),this.qa=new Map,this.Qa=new Set,this.$a=new ft(Ee.comparator),this.Ka=new Map,this.Ua=new _g,this.Wa={},this.Ga=new Map,this.za=Mo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function NO(r,e,t=!0){const s=Hw(r);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await jw(s,e,t,!0),o}async function xO(r,e){const t=Hw(r);await jw(t,e,!0,!1)}async function jw(r,e,t,s){const o=await XD(r.localStore,xr(e)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,t);let d;return s&&(d=await DO(r,e,u,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Dw(r.remoteStore,o),d}async function DO(r,e,t,s,o){r.Ha=(S,R,x)=>async function(G,V,z,q){let K=V.view.ba(z);K.ls&&(K=await C0(G.localStore,V.query,!1).then(({documents:P})=>V.view.ba(P,K)));const re=q&&q.targetChanges.get(V.targetId),se=q&&q.targetMismatches.get(V.targetId)!=null,Z=V.view.applyChanges(K,G.isPrimaryClient,re,se);return L0(G,V.targetId,Z.Ma),Z.snapshot}(r,S,R,x);const u=await C0(r.localStore,e,!0),h=new AO(e,u.gs),d=h.ba(u.documents),p=Vu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),g=h.applyChanges(d,r.isPrimaryClient,p);L0(r,t,g.Ma);const E=new RO(e,t,h);return r.ka.set(e,E),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),g.snapshot}async function OO(r,e,t){const s=Ne(r),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(h=>!gf(h,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await xp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&bg(s.remoteStore,o.targetId),kp(s,o.targetId)}).catch(qo)):(kp(s,o.targetId),await xp(s.localStore,o.targetId,!0))}async function kO(r,e){const t=Ne(r),s=t.ka.get(e),o=t.qa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),bg(t.remoteStore,s.targetId))}async function PO(r,e,t){const s=zO(r);try{const o=await function(h,d){const p=Ne(h),g=Pt.now(),E=d.reduce((x,M)=>x.add(M.key),Ve());let S,R;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>{let M=Ti(),G=Ve();return p.ds.getEntries(x,E).next(V=>{M=V,M.forEach((z,q)=>{q.isValidDocument()||(G=G.add(z))})}).next(()=>p.localDocuments.getOverlayedDocuments(x,M)).next(V=>{S=V;const z=[];for(const q of d){const K=Y2(q,S.get(q.key).overlayedDocument);K!=null&&z.push(new Ds(q.key,K,Yb(K.value.mapValue),Wn.exists(!0)))}return p.mutationQueue.addMutationBatch(x,g,z,d)}).next(V=>{R=V;const z=V.applyToLocalDocumentSet(S,G);return p.documentOverlayCache.saveOverlays(x,V.batchId,z)})}).then(()=>({batchId:R.batchId,changes:aw(S)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,d,p){let g=h.Wa[h.currentUser.toKey()];g||(g=new ft(je)),g=g.insert(d,p),h.Wa[h.currentUser.toKey()]=g}(s,o.batchId,t),await Lu(s,o.changes),await wf(s.remoteStore)}catch(o){const u=Ig(o,"Failed to persist write");t.reject(u)}}async function Bw(r,e){const t=Ne(r);try{const s=await KD(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.Ka.get(u);h&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Ba=!0:o.modifiedDocuments.size>0?Xe(h.Ba):o.removedDocuments.size>0&&(Xe(h.Ba),h.Ba=!1))}),await Lu(t,s,e)}catch(s){await qo(s)}}function U0(r,e,t){const s=Ne(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.ka.forEach((u,h)=>{const d=h.view.sa(e);d.snapshot&&o.push(d.snapshot)}),function(h,d){const p=Ne(h);p.onlineState=d;let g=!1;p.queries.forEach((E,S)=>{for(const R of S.ta)R.sa(d)&&(g=!0)}),g&&xg(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function MO(r,e,t){const s=Ne(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Ka.get(e),u=o&&o.key;if(u){let h=new ft(Ee.comparator);h=h.insert(u,sn.newNoDocument(u,Ie.min()));const d=Ve().add(u),p=new Ef(Ie.min(),new Map,new ft(je),h,d);await Bw(s,p),s.$a=s.$a.remove(u),s.Ka.delete(e),kg(s)}else await xp(s.localStore,e,!1).then(()=>kp(s,e,t)).catch(qo)}async function VO(r,e){const t=Ne(r),s=e.batch.batchId;try{const o=await $D(t.localStore,e);qw(t,s,null),zw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Lu(t,o)}catch(o){await qo(o)}}async function UO(r,e,t){const s=Ne(r);try{const o=await function(h,d){const p=Ne(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,d).next(S=>(Xe(S!==null),E=S.keys(),p.mutationQueue.removeMutationBatch(g,S))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);qw(s,e,t),zw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Lu(s,o)}catch(o){await qo(o)}}function zw(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function qw(r,e,t){const s=Ne(r);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function kp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.qa.get(e))r.ka.delete(s),t&&r.La.Ja(s,t);r.qa.delete(e),r.isPrimaryClient&&r.Ua.br(e).forEach(s=>{r.Ua.containsKey(s)||Fw(r,s)})}function Fw(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(bg(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ka.delete(t),kg(r))}function L0(r,e,t){for(const s of t)s instanceof Uw?(r.Ua.addReference(s.key,e),LO(r,s)):s instanceof Lw?(he(Og,"Document no longer in limbo: "+s.key),r.Ua.removeReference(s.key,e),r.Ua.containsKey(s.key)||Fw(r,s.key)):Re()}function LO(r,e){const t=e.key,s=t.path.canonicalString();r.$a.get(t)||r.Qa.has(s)||(he(Og,"New document in limbo: "+t),r.Qa.add(s),kg(r))}function kg(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new Ee(st.fromString(e)),s=r.za.next();r.Ka.set(s,new IO(t)),r.$a=r.$a.insert(t,s),Dw(r.remoteStore,new gs(xr(pf(t.path)),s,"TargetPurposeLimboResolution",ff.ae))}}async function Lu(r,e,t){const s=Ne(r),o=[],u=[],h=[];s.ka.isEmpty()||(s.ka.forEach((d,p)=>{h.push(s.Ha(p,e,t).then(g=>{var E;if((g||t)&&s.isPrimaryClient){const S=g?!g.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(g){o.push(g);const S=Eg.Yi(p.targetId,g);u.push(S)}}))}),await Promise.all(h),s.La.p_(o),await async function(p,g){const E=Ne(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ee.forEach(g,R=>ee.forEach(R.Hi,x=>E.persistence.referenceDelegate.addReference(S,R.targetId,x)).next(()=>ee.forEach(R.Ji,x=>E.persistence.referenceDelegate.removeReference(S,R.targetId,x)))))}catch(S){if(!Fo(S))throw S;he(Tg,"Failed to update sequence numbers: "+S)}for(const S of g){const R=S.targetId;if(!S.fromCache){const x=E.Ts.get(R),M=x.snapshotVersion,G=x.withLastLimboFreeSnapshotVersion(M);E.Ts=E.Ts.insert(R,G)}}}(s.localStore,u))}async function jO(r,e){const t=Ne(r);if(!t.currentUser.isEqual(e)){he(Og,"User change. New user:",e.toKey());const s=await Iw(t.localStore,e);t.currentUser=e,function(u,h){u.Ga.forEach(d=>{d.forEach(p=>{p.reject(new fe(te.CANCELLED,h))})}),u.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Lu(t,s.Rs)}}function BO(r,e){const t=Ne(r),s=t.Ka.get(e);if(s&&s.Ba)return Ve().add(s.key);{let o=Ve();const u=t.qa.get(e);if(!u)return o;for(const h of u){const d=t.ka.get(h);o=o.unionWith(d.view.Sa)}return o}}function Hw(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MO.bind(null,e),e.La.p_=wO.bind(null,e.eventManager),e.La.Ja=SO.bind(null,e.eventManager),e}function zO(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UO.bind(null,e),e}class Kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return GD(this.persistence,new qD,e.initialUser,this.serializer)}Xa(e){return new Rw(vg.ri,this.serializer)}Za(e){return new ZD}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kh.provider={build:()=>new Kh};class qO extends Kh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Xe(this.persistence.referenceDelegate instanceof Gh);const s=this.persistence.referenceDelegate.garbageCollector;return new ID(s,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new Rw(s=>Gh.ri(s,t),this.serializer)}}class Pp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>U0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=jO.bind(null,this.syncEngine),await EO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bO}()}createDatastore(e){const t=Tf(e.databaseInfo.databaseId),s=function(u){return new rO(u)}(e.databaseInfo);return function(u,h,d,p){return new oO(u,h,d,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,u,h,d){return new uO(s,o,u,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>U0(this.syncEngine,t,0),function(){return D0.D()?new D0:new JD}())}createSyncEngine(e,t){return function(o,u,h,d,p,g,E){const S=new CO(o,u,h,d,p,g);return E&&(S.ja=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const u=Ne(o);he(va,"RemoteStore shutting down."),u.W_.add(5),await Uu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Pp.provider={build:()=>new Pp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class FO{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=jb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{he(Is,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(he(Is,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Ig(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function tp(r,e){r.asyncQueue.verifyOperationInProgress(),he(Is,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await Iw(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function j0(r,e){r.asyncQueue.verifyOperationInProgress();const t=await HO(r);he(Is,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>k0(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>k0(e.remoteStore,o)),r._onlineComponents=e}async function HO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(Is,"Using user provided OfflineComponentProvider");try{await tp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Do("Error using user provided cache. Falling back to memory cache: "+t),await tp(r,new Kh)}}else he(Is,"Using default OfflineComponentProvider"),await tp(r,new qO(void 0));return r._offlineComponents}async function Gw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(Is,"Using user provided OnlineComponentProvider"),await j0(r,r._uninitializedComponentsProvider._online)):(he(Is,"Using default OnlineComponentProvider"),await j0(r,new Pp))),r._onlineComponents}function GO(r){return Gw(r).then(e=>e.syncEngine)}async function Qh(r){const e=await Gw(r),t=e.eventManager;return t.onListen=NO.bind(null,e.syncEngine),t.onUnlisten=OO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kO.bind(null,e.syncEngine),t}function $O(r,e,t={}){const s=new yi;return r.asyncQueue.enqueueAndForget(async()=>function(u,h,d,p,g){const E=new Pg({next:R=>{E.su(),h.enqueueAndForget(()=>Ng(u,S));const x=R.docs.has(d);!x&&R.fromCache?g.reject(new fe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&R.fromCache&&p&&p.source==="server"?g.reject(new fe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(R)},error:R=>g.reject(R)}),S=new Dg(pf(d.path),E,{includeMetadataChanges:!0,Ta:!0});return Cg(u,S)}(await Qh(r),r.asyncQueue,e,t,s)),s.promise}function KO(r,e,t={}){const s=new yi;return r.asyncQueue.enqueueAndForget(async()=>function(u,h,d,p,g){const E=new Pg({next:R=>{E.su(),h.enqueueAndForget(()=>Ng(u,S)),R.fromCache&&p.source==="server"?g.reject(new fe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(R)},error:R=>g.reject(R)}),S=new Dg(d,E,{includeMetadataChanges:!0,Ta:!0});return Cg(u,S)}(await Qh(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(r,e,t){if(!t)throw new fe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function QO(r,e,t,s){if(e===!0&&s===!0)throw new fe(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function z0(r){if(!Ee.isDocumentKey(r))throw new fe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function q0(r){if(Ee.isDocumentKey(r))throw new fe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Sf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Re()}function bn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sf(r);throw new fe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="firestore.googleapis.com",F0=!0;class H0{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qw,this.ssl=F0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:F0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AD)throw new fe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$w((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H0(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new t2;switch(s.type){case"firstParty":return new s2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=B0.get(t);s&&(he("ComponentProvider","Removing Datastore"),B0.delete(t),s.terminate())}(this),Promise.resolve()}}function YO(r,e,t,s={}){var o;const u=(r=bn(r,Af))._getSettings(),h=`${e}:${t}`;if(u.host!==Qw&&u.host!==h&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),s.mockUserToken){let d,p;if(typeof s.mockUserToken=="string")d=s.mockUserToken,p=rn.MOCK_USER;else{d=BT(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new fe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new rn(g)}r._authCredentials=new n2(new Lb(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Na(this.firestore,e,this._query)}}class an{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class Es extends Na{constructor(e,t,s){super(e,t,pf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new Ee(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function bi(r,e,...t){if(r=We(r),Kw("collection","path",e),r instanceof Af){const s=st.fromString(e,...t);return q0(s),new Es(r,null,s)}{if(!(r instanceof an||r instanceof Es))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...t));return q0(s),new Es(r.firestore,null,s)}}function bt(r,e,...t){if(r=We(r),arguments.length===1&&(e=jb.newId()),Kw("doc","path",e),r instanceof Af){const s=st.fromString(e,...t);return z0(s),new an(r,null,new Ee(s))}{if(!(r instanceof an||r instanceof Es))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...t));return z0(s),new an(r.firestore,r instanceof Es?r.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="AsyncQueue";class $0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Nw(this,"async_queue_retry"),this.Su=()=>{const s=ep();s&&he(G0,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const t=ep();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=ep();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new yi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Fo(e))throw e;he(G0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(s);throw Ei("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=t,t}enqueueAfterDelay(e,t,s){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const o=Rg.createAndSchedule(this,e,t,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Re()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function K0(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class wi extends Af{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new $0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $0(e),this._firestoreClient=void 0,await e}}}function XO(r,e){const t=typeof r=="object"?r:lf(),s=typeof r=="string"?r:jh,o=Ns(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=UT("firestore");u&&YO(o,...u)}return o}function Rf(r){if(r._terminated)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||WO(r),r._firestoreClient}function WO(r){var e,t,s;const o=r._freezeSettings(),u=function(d,p,g,E){return new v2(d,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,$w(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new FO(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo(Zt.fromBase64String(e))}catch(t){throw new fe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Uo(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=/^__.*__$/;class JO{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mu(e,this.data,t,this.fieldTransforms)}}class Yw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Xw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Ug{constructor(e,t,s,o,u,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Ug(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Ku(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Yh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Xw(this.Lu)&&ZO.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class ek{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Tf(e)}ju(e,t,s,o=!1){return new Ug({Lu:e,methodName:t,zu:s,path:Wt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nf(r){const e=r._freezeSettings(),t=Tf(r._databaseId);return new ek(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Ww(r,e,t,s,o,u={}){const h=r.ju(u.merge||u.mergeFields?2:0,e,t,o);jg("Data must be an object, but it was:",h,s);const d=Zw(s,h);let p,g;if(u.merge)p=new Dn(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const S of u.mergeFields){const R=Mp(e,S,t);if(!h.contains(R))throw new fe(te.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);eS(E,R)||E.push(R)}p=new Dn(E),g=h.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,g=h.fieldTransforms;return new JO(new En(d),p,g)}class xf extends Cf{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xf}}class Lg extends Cf{_toFieldTransform(e){return new G2(e.path,new wu)}isEqual(e){return e instanceof Lg}}function tk(r,e,t,s){const o=r.ju(1,e,t);jg("Data must be an object, but it was:",o,s);const u=[],h=En.empty();xs(s,(p,g)=>{const E=Bg(e,p,t);g=We(g);const S=o.Ku(E);if(g instanceof xf)u.push(E);else{const R=ju(g,S);R!=null&&(u.push(E),h.set(E,R))}});const d=new Dn(u);return new Yw(h,d,o.fieldTransforms)}function nk(r,e,t,s,o,u){const h=r.ju(1,e,t),d=[Mp(e,s,t)],p=[o];if(u.length%2!=0)throw new fe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)d.push(Mp(e,u[R])),p.push(u[R+1]);const g=[],E=En.empty();for(let R=d.length-1;R>=0;--R)if(!eS(g,d[R])){const x=d[R];let M=p[R];M=We(M);const G=h.Ku(x);if(M instanceof xf)g.push(x);else{const V=ju(M,G);V!=null&&(g.push(x),E.set(x,V))}}const S=new Dn(g);return new Yw(E,S,h.fieldTransforms)}function rk(r,e,t,s=!1){return ju(t,r.ju(s?4:3,e))}function ju(r,e){if(Jw(r=We(r)))return jg("Unsupported field value:",e,r),Zw(r,e);if(r instanceof Cf)return function(s,o){if(!Xw(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let h=0;for(const d of s){let p=ju(d,o.Uu(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=We(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return q2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Pt.fromDate(s);return{timestampValue:Hh(o.serializer,u)}}if(s instanceof Pt){const u=new Pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Hh(o.serializer,u)}}if(s instanceof Mg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Uo)return{bytesValue:_w(o.serializer,s._byteString)};if(s instanceof an){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:yg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Vg)return function(h,d){return{mapValue:{fields:{[Kb]:{stringValue:Qb},[Bh]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw d.Wu("VectorValues must only contain numeric values.");return dg(d.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${Sf(s)}`)}(r,e)}function Zw(r,e){const t={};return zb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(r,(s,o)=>{const u=ju(o,e.qu(s));u!=null&&(t[s]=u)}),{mapValue:{fields:t}}}function Jw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Pt||r instanceof Mg||r instanceof Uo||r instanceof an||r instanceof Cf||r instanceof Vg)}function jg(r,e,t){if(!Jw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=Sf(t);throw s==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+s)}}function Mp(r,e,t){if((e=We(e))instanceof If)return e._internalPath;if(typeof e=="string")return Bg(r,e);throw Yh("Field path arguments must be of type string or ",r,!1,void 0,t)}const ik=new RegExp("[~\\*/\\[\\]]");function Bg(r,e,t){if(e.search(ik)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new If(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Yh(r,e,t,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new fe(te.INVALID_ARGUMENT,d+r+p)}function eS(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sk extends tS{data(){return super.data()}}function zg(r,e){return typeof e=="string"?Bg(r,e):e instanceof If?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qg{}class ak extends qg{}function Cs(r,e,...t){let s=[];e instanceof qg&&s.push(e),s=s.concat(t),function(u){const h=u.filter(p=>p instanceof Fg).length,d=u.filter(p=>p instanceof Df).length;if(h>1||h>0&&d>0)throw new fe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Df extends ak{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Df(e,t,s)}_apply(e){const t=this._parse(e);return rS(e._query,t),new Na(e.firestore,e.converter,Sp(e._query,t))}_parse(e){const t=Nf(e.firestore);return function(u,h,d,p,g,E,S){let R;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new fe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Y0(S,E);const M=[];for(const G of S)M.push(Q0(p,u,G));R={arrayValue:{values:M}}}else R=Q0(p,u,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Y0(S,E),R=rk(d,h,S,E==="in"||E==="not-in");return It.create(g,E,R)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ht(r,e,t){const s=e,o=zg("where",r);return Df._create(o,s,t)}class Fg extends qg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fg(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,u){let h=o;const d=u.getFlattenedFilters();for(const p of d)rS(h,p),h=Sp(h,p)}(e._query,t),new Na(e.firestore,e.converter,Sp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Q0(r,e,t){if(typeof(t=We(t))=="string"){if(t==="")throw new fe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nw(e)&&t.indexOf("/")!==-1)throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(st.fromString(t));if(!Ee.isDocumentKey(s))throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return u0(r,new Ee(s))}if(t instanceof an)return u0(r,t._key);throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(t)}.`)}function Y0(r,e){if(!Array.isArray(r)||r.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rS(r,e){const t=function(o,u){for(const h of o)for(const d of h.getFlattenedFilters())if(u.indexOf(d.op)>=0)return d.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ok{convertValue(e,t="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return xs(e,(o,u)=>{s[o]=this.convertValue(u,t)}),s}convertVectorValue(e){var t,s,o;const u=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Bh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>Tt(h.doubleValue));return new Vg(u)}convertGeoPoint(e){return new Mg(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=mf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){const t=ws(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=st.fromString(e);Xe(Sw(s));const o=new Tu(s.get(1),s.get(3)),u=new Ee(s.popFirst(5));return o.isEqual(t)||Ei(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sS extends tS{constructor(e,t,s,o,u,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(zg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Ch extends sS{data(e={}){return super.data(e)}}class aS{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new au(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Ch(this._firestore,this._userDataWriter,s.key,s,new au(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(d=>{const p=new Ch(o._firestore,o._userDataWriter,d.doc.key,d.doc,new au(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>u||d.type!==3).map(d=>{const p=new Ch(o._firestore,o._userDataWriter,d.doc.key,d.doc,new au(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return d.type!==0&&(g=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),E=h.indexOf(d.doc.key)),{type:lk(d.type),doc:p,oldIndex:g,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(r){r=bn(r,an);const e=bn(r.firestore,wi);return $O(Rf(e),r._key).then(t=>lS(e,r,t))}class Hg extends ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}function Ta(r){r=bn(r,Na);const e=bn(r.firestore,wi),t=Rf(e),s=new Hg(e);return nS(r._query),KO(t,r._query).then(o=>new aS(e,s,r,o))}function Xh(r,e,t){r=bn(r,an);const s=bn(r.firestore,wi),o=iS(r.converter,e,t);return Of(s,[Ww(Nf(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Wn.none())])}function No(r,e,t,...s){r=bn(r,an);const o=bn(r.firestore,wi),u=Nf(o);let h;return h=typeof(e=We(e))=="string"||e instanceof If?nk(u,"updateDoc",r._key,e,t,s):tk(u,"updateDoc",r._key,e),Of(o,[h.toMutation(r._key,Wn.exists(!0))])}function Vp(r){return Of(bn(r.firestore,wi),[new mg(r._key,Wn.none())])}function oS(r,e){const t=bn(r.firestore,wi),s=bt(r),o=iS(r.converter,e);return Of(t,[Ww(Nf(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Wn.exists(!1))]).then(()=>s)}function Wh(r,...e){var t,s,o;r=We(r);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||K0(e[h])||(u=e[h],h++);const d={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(K0(e[h])){const S=e[h];e[h]=(t=S.next)===null||t===void 0?void 0:t.bind(S),e[h+1]=(s=S.error)===null||s===void 0?void 0:s.bind(S),e[h+2]=(o=S.complete)===null||o===void 0?void 0:o.bind(S)}let p,g,E;if(r instanceof an)g=bn(r.firestore,wi),E=pf(r._key.path),p={next:S=>{e[h]&&e[h](lS(g,r,S))},error:e[h+1],complete:e[h+2]};else{const S=bn(r,Na);g=bn(S.firestore,wi),E=S._query;const R=new Hg(g);p={next:x=>{e[h]&&e[h](new aS(g,R,S,x))},error:e[h+1],complete:e[h+2]},nS(r._query)}return function(R,x,M,G){const V=new Pg(G),z=new Dg(x,V,M);return R.asyncQueue.enqueueAndForget(async()=>Cg(await Qh(R),z)),()=>{V.su(),R.asyncQueue.enqueueAndForget(async()=>Ng(await Qh(R),z))}}(Rf(g),E,d,p)}function Of(r,e){return function(s,o){const u=new yi;return s.asyncQueue.enqueueAndForget(async()=>PO(await GO(s),o,u)),u.promise}(Rf(r),e)}function lS(r,e,t){const s=t.docs.get(e._key),o=new Hg(r);return new sS(r,o,e._key,s,new au(t.hasPendingWrites,t.fromCache),e.converter)}function uk(){return new Lg("serverTimestamp")}(function(e,t=!0){(function(o){zo=o})(Ra),lr(new Zn("firestore",(s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),d=new wi(new r2(s.getProvider("auth-internal")),new a2(h,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new fe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(g.options.projectId,E)}(h,o),h);return u=Object.assign({useFetchStreams:t},u),d._setSettings(u),d},"PUBLIC").setMultipleInstances(!0)),Tn(ZE,JE,e),Tn(ZE,JE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebasestorage.googleapis.com",cS="storageBucket",ck=2*60*1e3,hk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t extends er{constructor(e,t,s=0){super(np(e),`Firebase Storage: ${t} (${np(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return np(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yt||(yt={}));function np(r){return"storage/"+r}function Gg(){const r="An unknown error occurred, please check the error payload for server response.";return new _t(yt.UNKNOWN,r)}function fk(r){return new _t(yt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function dk(r){return new _t(yt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mk(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(yt.UNAUTHENTICATED,r)}function pk(){return new _t(yt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gk(r){return new _t(yt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function yk(){return new _t(yt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _k(){return new _t(yt.CANCELED,"User canceled the upload/download.")}function vk(r){return new _t(yt.INVALID_URL,"Invalid URL '"+r+"'.")}function Ek(r){return new _t(yt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function Tk(){return new _t(yt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cS+"' property when initializing the app?")}function bk(){return new _t(yt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wk(){return new _t(yt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Sk(r){return new _t(yt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Up(r){return new _t(yt.INVALID_ARGUMENT,r)}function hS(){return new _t(yt.APP_DELETED,"The Firebase app was deleted.")}function Ak(r){return new _t(yt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fu(r,e){return new _t(yt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function eu(r){throw new _t(yt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=pn.makeFromUrl(e,t)}catch{return new pn(e,"")}if(s.path==="")return s;throw Ek(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const h="(/(.*))?$",d=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function g(re){re.path_=decodeURIComponent(re.path)}const E="v[A-Za-z0-9_]+",S=t.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",x=new RegExp(`^https?://${S}/${E}/b/${o}/o${R}`,"i"),M={bucket:1,path:3},G=t===uS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",z=new RegExp(`^https?://${G}/${o}/${V}`,"i"),K=[{regex:d,indices:p,postModify:u},{regex:x,indices:M,postModify:g},{regex:z,indices:{bucket:1,path:2},postModify:g}];for(let re=0;re<K.length;re++){const se=K[re],Z=se.regex.exec(e);if(Z){const P=Z[se.indices.bucket];let C=Z[se.indices.path];C||(C=""),s=new pn(P,C),se.postModify(s);break}}if(s==null)throw vk(e);return s}}class Rk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(r,e,t){let s=1,o=null,u=null,h=!1,d=0;function p(){return d===2}let g=!1;function E(...V){g||(g=!0,e.apply(null,V))}function S(V){o=setTimeout(()=>{o=null,r(x,p())},V)}function R(){u&&clearTimeout(u)}function x(V,...z){if(g){R();return}if(V){R(),E.call(null,V,...z);return}if(p()||h){R(),E.call(null,V,...z);return}s<64&&(s*=2);let K;d===1?(d=2,K=0):K=(s+Math.random())*1e3,S(K)}let M=!1;function G(V){M||(M=!0,R(),!g&&(o!==null?(V||(d=2),clearTimeout(o),S(0)):V||(d=1)))}return S(0),u=setTimeout(()=>{h=!0,G(!0)},t),G}function Ck(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(r){return r!==void 0}function xk(r){return typeof r=="object"&&!Array.isArray(r)}function $g(r){return typeof r=="string"||r instanceof String}function X0(r){return Kg()&&r instanceof Blob}function Kg(){return typeof Blob<"u"}function Lp(r,e,t,s){if(s<e)throw Up(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>t)throw Up(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(r,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${r}`}function fS(r){const e=encodeURIComponent;let t="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var pa;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(pa||(pa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return t||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t,s,o,u,h,d,p,g,E,S,R=!0){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=d,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=E,this.connectionFactory_=S,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,M)=>{this.resolve_=x,this.reject_=M,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new ph(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=d=>{const p=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const d=u.getErrorCode()===pa.NO_ERROR,p=u.getStatus();if(!d||Dk(p,this.additionalRetryCodes_)&&this.retry){const E=u.getErrorCode()===pa.ABORT;s(!1,new ph(!1,null,E));return}const g=this.successCodes_.indexOf(p)!==-1;s(!0,new ph(g,u))})},t=(s,o)=>{const u=this.resolve_,h=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());Nk(p)?u(p):u()}catch(p){h(p)}else if(d!==null){const p=Gg();p.serverResponse=d.getErrorText(),this.errorCallback_?h(this.errorCallback_(d,p)):h(p)}else if(o.canceled){const p=this.appDelete_?hS():_k();h(p)}else{const p=yk();h(p)}};this.canceled_?t(!1,new ph(!1,null,!0)):this.backoffId_=Ik(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ck(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ph{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function kk(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function Pk(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Mk(r,e){e&&(r["X-Firebase-GMPID"]=e)}function Vk(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function Uk(r,e,t,s,o,u,h=!0){const d=fS(r.urlParams),p=r.url+d,g=Object.assign({},r.headers);return Mk(g,e),kk(g,t),Pk(g,u),Vk(g,s),new Ok(p,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jk(...r){const e=Lk();if(e!==void 0){const t=new e;for(let s=0;s<r.length;s++)t.append(r[s]);return t.getBlob()}else{if(Kg())return new Blob(r);throw new _t(yt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Bk(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(r){if(typeof atob>"u")throw Sk("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rp{constructor(e,t){this.data=e,this.contentType=t||null}}function qk(r,e){switch(r){case Ir.RAW:return new rp(dS(e));case Ir.BASE64:case Ir.BASE64URL:return new rp(mS(r,e));case Ir.DATA_URL:return new rp(Hk(e),Gk(e))}throw Gg()}function dS(r){const e=[];for(let t=0;t<r.length;t++){let s=r.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=s,h=r.charCodeAt(++t);s=65536|(u&1023)<<10|h&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function Fk(r){let e;try{e=decodeURIComponent(r)}catch{throw fu(Ir.DATA_URL,"Malformed data URL.")}return dS(e)}function mS(r,e){switch(r){case Ir.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw fu(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ir.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw fu(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=zk(e)}catch(o){throw o.message.includes("polyfill")?o:fu(r,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class pS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw fu(Ir.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=$k(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function Hk(r){const e=new pS(r);return e.base64?mS(Ir.BASE64,e.rest):Fk(e.rest)}function Gk(r){return new pS(r).contentType}function $k(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t){let s=0,o="";X0(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(X0(this.data_)){const s=this.data_,o=Bk(s,e,t);return o===null?null:new ps(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new ps(s,!0)}}static getBlob(...e){if(Kg()){const t=e.map(s=>s instanceof ps?s.data_:s);return new ps(jk.apply(null,t))}else{const t=e.map(h=>$g(h)?qk(Ir.RAW,h).data:h.data_);let s=0;t.forEach(h=>{s+=h.byteLength});const o=new Uint8Array(s);let u=0;return t.forEach(h=>{for(let d=0;d<h.length;d++)o[u++]=h[d]}),new ps(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(r){let e;try{e=JSON.parse(r)}catch{return null}return xk(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Qk(r,e){const t=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?t:r+"/"+t}function gS(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(r,e){return e}class dn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||Yk}}let gh=null;function Xk(r){return!$g(r)||r.length<2?r:gS(r)}function yS(){if(gh)return gh;const r=[];r.push(new dn("bucket")),r.push(new dn("generation")),r.push(new dn("metageneration")),r.push(new dn("name","fullPath",!0));function e(u,h){return Xk(h)}const t=new dn("name");t.xform=e,r.push(t);function s(u,h){return h!==void 0?Number(h):h}const o=new dn("size");return o.xform=s,r.push(o),r.push(new dn("timeCreated")),r.push(new dn("updated")),r.push(new dn("md5Hash",null,!0)),r.push(new dn("cacheControl",null,!0)),r.push(new dn("contentDisposition",null,!0)),r.push(new dn("contentEncoding",null,!0)),r.push(new dn("contentLanguage",null,!0)),r.push(new dn("contentType",null,!0)),r.push(new dn("metadata","customMetadata",!0)),gh=r,gh}function Wk(r,e){function t(){const s=r.bucket,o=r.fullPath,u=new pn(s,o);return e._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:t})}function Zk(r,e,t){const s={};s.type="file";const o=t.length;for(let u=0;u<o;u++){const h=t[u];s[h.local]=h.xform(s,e[h.server])}return Wk(s,r),s}function _S(r,e,t){const s=Qg(e);return s===null?null:Zk(r,s,t)}function Jk(r,e,t,s){const o=Qg(e);if(o===null||!$g(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(g=>{const E=r.bucket,S=r.fullPath,R="/b/"+h(E)+"/o/"+h(S),x=Bu(R,t,s),M=fS({alt:"media",token:g});return x+M})[0]}function eP(r,e){const t={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(t[u.server]=r[u.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="prefixes",Z0="items";function tP(r,e,t){const s={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[W0])for(const o of t[W0]){const u=o.replace(/\/$/,""),h=r._makeStorageReference(new pn(e,u));s.prefixes.push(h)}if(t[Z0])for(const o of t[Z0]){const u=r._makeStorageReference(new pn(e,o.name));s.items.push(u)}return s}function nP(r,e,t){const s=Qg(t);return s===null?null:tP(r,e,s)}class kf{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(r){if(!r)throw Gg()}function rP(r,e){function t(s,o){const u=_S(r,o,e);return Yg(u!==null),u}return t}function iP(r,e){function t(s,o){const u=nP(r,e,o);return Yg(u!==null),u}return t}function sP(r,e){function t(s,o){const u=_S(r,o,e);return Yg(u!==null),Jk(u,o,r.host,r._protocol)}return t}function Xg(r){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=pk():o=mk():t.getStatus()===402?o=dk(r.bucket):t.getStatus()===403?o=gk(r.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function vS(r){const e=Xg(r);function t(s,o){let u=e(s,o);return s.getStatus()===404&&(u=fk(r.path)),u.serverResponse=o.serverResponse,u}return t}function aP(r,e,t,s,o){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",t.length>0&&(u.delimiter=t),s&&(u.pageToken=s),o&&(u.maxResults=o);const h=e.bucketOnlyServerUrl(),d=Bu(h,r.host,r._protocol),p="GET",g=r.maxOperationRetryTime,E=new kf(d,p,iP(r,e.bucket),g);return E.urlParams=u,E.errorHandler=Xg(e),E}function oP(r,e,t){const s=e.fullServerUrl(),o=Bu(s,r.host,r._protocol),u="GET",h=r.maxOperationRetryTime,d=new kf(o,u,sP(r,t),h);return d.errorHandler=vS(e),d}function lP(r,e){const t=e.fullServerUrl(),s=Bu(t,r.host,r._protocol),o="DELETE",u=r.maxOperationRetryTime;function h(p,g){}const d=new kf(s,o,h,u);return d.successCodes=[200,204],d.errorHandler=vS(e),d}function uP(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function cP(r,e,t){const s=Object.assign({},t);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=uP(null,e)),s}function hP(r,e,t,s,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function d(){let K="";for(let re=0;re<2;re++)K=K+Math.random().toString().slice(2);return K}const p=d();h["Content-Type"]="multipart/related; boundary="+p;const g=cP(e,s,o),E=eP(g,t),S="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,R=`\r
--`+p+"--",x=ps.getBlob(S,s,R);if(x===null)throw bk();const M={name:g.fullPath},G=Bu(u,r.host,r._protocol),V="POST",z=r.maxUploadRetryTime,q=new kf(G,V,rP(r,t),z);return q.urlParams=M,q.headers=h,q.body=x.uploadData(),q.errorHandler=Xg(e),q}class fP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o){if(this.sent_)throw eu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dP extends fP{initXhr(){this.xhr_.responseType="text"}}function Pf(){return new dP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this._service=e,t instanceof pn?this._location=t:this._location=pn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ba(e,t)}get root(){const e=new pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gS(this._location.path)}get storage(){return this._service}get parent(){const e=Kk(this._location.path);if(e===null)return null;const t=new pn(this._location.bucket,e);return new ba(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Ak(e)}}function mP(r,e,t){r._throwIfRoot("uploadBytes");const s=hP(r.storage,r._location,yS(),new ps(e,!0),t);return r.storage.makeRequestWithTokens(s,Pf).then(o=>({metadata:o,ref:r}))}function pP(r){const e={prefixes:[],items:[]};return ES(r,e).then(()=>e)}async function ES(r,e,t){const o=await gP(r,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),o.nextPageToken!=null&&await ES(r,e,o.nextPageToken)}function gP(r,e){e!=null&&typeof e.maxResults=="number"&&Lp("options.maxResults",1,1e3,e.maxResults);const t=e||{},s=aP(r.storage,r._location,"/",t.pageToken,t.maxResults);return r.storage.makeRequestWithTokens(s,Pf)}function yP(r){r._throwIfRoot("getDownloadURL");const e=oP(r.storage,r._location,yS());return r.storage.makeRequestWithTokens(e,Pf).then(t=>{if(t===null)throw wk();return t})}function _P(r){r._throwIfRoot("deleteObject");const e=lP(r.storage,r._location);return r.storage.makeRequestWithTokens(e,Pf)}function vP(r,e){const t=Qk(r._location.path,e),s=new pn(r._location.bucket,t);return new ba(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(r){return/^[A-Za-z]+:\/\//.test(r)}function TP(r,e){return new ba(r,e)}function TS(r,e){if(r instanceof Wg){const t=r;if(t._bucket==null)throw Tk();const s=new ba(t,t._bucket);return e!=null?TS(s,e):s}else return e!==void 0?vP(r,e):r}function bP(r,e){if(e&&EP(e)){if(r instanceof Wg)return TP(r,e);throw Up("To use ref(service, url), the first argument must be a Storage instance.")}else return TS(r,e)}function J0(r,e){const t=e==null?void 0:e[cS];return t==null?null:pn.makeFromBucketSpec(t,r)}function wP(r,e,t,s={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:o}=s;o&&(r._overrideAuthToken=typeof o=="string"?o:BT(o,r.app.options.projectId))}class Wg{constructor(e,t,s,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=uS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ck,this._maxUploadRetryTime=hk,this._requests=new Set,o!=null?this._bucket=pn.makeFromBucketSpec(o,this._host):this._bucket=J0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pn.makeFromBucketSpec(this._url,e):this._bucket=J0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Lp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Lp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ba(this,e)}_makeRequest(e,t,s,o,u=!0){if(this._deleted)return new Rk(hS());{const h=Uk(e,this._appId,s,o,t,this._firebaseVersion,u);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const eT="@firebase/storage",tT="0.13.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="storage";function wS(r,e,t){return r=We(r),mP(r,e,t)}function SP(r){return r=We(r),pP(r)}function SS(r){return r=We(r),yP(r)}function AP(r){return r=We(r),_P(r)}function jp(r,e){return r=We(r),bP(r,e)}function RP(r=lf(),e){r=We(r);const s=Ns(r,bS).getImmediate({identifier:e}),o=UT("storage");return o&&IP(s,...o),s}function IP(r,e,t,s={}){wP(r,e,t,s)}function CP(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new Wg(t,s,o,e,Ra)}function NP(){lr(new Zn(bS,CP,"PUBLIC").setMultipleInstances(!0)),Tn(eT,tT,""),Tn(eT,tT,"esm2017")}NP();const AS="@firebase/installations",Zg="0.6.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=1e4,IS=`w:${Zg}`,CS="FIS_v2",xP="https://firebaseinstallations.googleapis.com/v1",DP=60*60*1e3,OP="installations",kP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wa=new Aa(OP,kP,PP);function NS(r){return r instanceof er&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS({projectId:r}){return`${xP}/projects/${r}/installations`}function DS(r){return{token:r.token,requestStatus:2,expiresIn:VP(r.expiresIn),creationTime:Date.now()}}async function OS(r,e){const s=(await e.json()).error;return wa.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function kS({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function MP(r,{refreshToken:e}){const t=kS(r);return t.append("Authorization",UP(e)),t}async function PS(r){const e=await r();return e.status>=500&&e.status<600?r():e}function VP(r){return Number(r.replace("s","000"))}function UP(r){return`${CS} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=xS(r),o=kS(r),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const h={fid:t,authVersion:CS,appId:r.appId,sdkVersion:IS},d={method:"POST",headers:o,body:JSON.stringify(h)},p=await PS(()=>fetch(s,d));if(p.ok){const g=await p.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:DS(g.authToken)}}else throw await OS("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=/^[cdef][\w-]{21}$/,Bp="";function zP(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=qP(r);return BP.test(t)?t:Bp}catch{return Bp}}function qP(r){return jP(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=new Map;function US(r,e){const t=Mf(r);LS(t,e),FP(t,e)}function LS(r,e){const t=VS.get(r);if(t)for(const s of t)s(e)}function FP(r,e){const t=HP();t&&t.postMessage({key:r,fid:e}),GP()}let da=null;function HP(){return!da&&"BroadcastChannel"in self&&(da=new BroadcastChannel("[Firebase] FID Change"),da.onmessage=r=>{LS(r.data.key,r.data.fid)}),da}function GP(){VS.size===0&&da&&(da.close(),da=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="firebase-installations-database",KP=1,Sa="firebase-installations-store";let ip=null;function Jg(){return ip||(ip=$T($P,KP,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Sa)}}})),ip}async function Zh(r,e){const t=Mf(r),o=(await Jg()).transaction(Sa,"readwrite"),u=o.objectStore(Sa),h=await u.get(t);return await u.put(e,t),await o.done,(!h||h.fid!==e.fid)&&US(r,e.fid),e}async function jS(r){const e=Mf(r),s=(await Jg()).transaction(Sa,"readwrite");await s.objectStore(Sa).delete(e),await s.done}async function Vf(r,e){const t=Mf(r),o=(await Jg()).transaction(Sa,"readwrite"),u=o.objectStore(Sa),h=await u.get(t),d=e(h);return d===void 0?await u.delete(t):await u.put(d,t),await o.done,d&&(!h||h.fid!==d.fid)&&US(r,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(r){let e;const t=await Vf(r.appConfig,s=>{const o=QP(s),u=YP(r,o);return e=u.registrationPromise,u.installationEntry});return t.fid===Bp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function QP(r){const e=r||{fid:zP(),registrationStatus:0};return BS(e)}function YP(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(wa.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=XP(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:WP(r)}:{installationEntry:e}}async function XP(r,e){try{const t=await LP(r,e);return Zh(r.appConfig,t)}catch(t){throw NS(t)&&t.customData.serverCode===409?await jS(r.appConfig):await Zh(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function WP(r){let e=await nT(r.appConfig);for(;e.registrationStatus===1;)await MS(100),e=await nT(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await ey(r);return s||t}return e}function nT(r){return Vf(r,e=>{if(!e)throw wa.create("installation-not-found");return BS(e)})}function BS(r){return ZP(r)?{fid:r.fid,registrationStatus:0}:r}function ZP(r){return r.registrationStatus===1&&r.registrationTime+RS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP({appConfig:r,heartbeatServiceProvider:e},t){const s=eM(r,t),o=MP(r,t),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const h={installation:{sdkVersion:IS,appId:r.appId}},d={method:"POST",headers:o,body:JSON.stringify(h)},p=await PS(()=>fetch(s,d));if(p.ok){const g=await p.json();return DS(g)}else throw await OS("Generate Auth Token",p)}function eM(r,{fid:e}){return`${xS(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(r,e=!1){let t;const s=await Vf(r.appConfig,u=>{if(!zS(u))throw wa.create("not-registered");const h=u.authToken;if(!e&&rM(h))return u;if(h.requestStatus===1)return t=tM(r,e),u;{if(!navigator.onLine)throw wa.create("app-offline");const d=sM(u);return t=nM(r,d),d}});return t?await t:s.authToken}async function tM(r,e){let t=await rT(r.appConfig);for(;t.authToken.requestStatus===1;)await MS(100),t=await rT(r.appConfig);const s=t.authToken;return s.requestStatus===0?ty(r,e):s}function rT(r){return Vf(r,e=>{if(!zS(e))throw wa.create("not-registered");const t=e.authToken;return aM(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function nM(r,e){try{const t=await JP(r,e),s=Object.assign(Object.assign({},e),{authToken:t});return await Zh(r.appConfig,s),t}catch(t){if(NS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await jS(r.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Zh(r.appConfig,s)}throw t}}function zS(r){return r!==void 0&&r.registrationStatus===2}function rM(r){return r.requestStatus===2&&!iM(r)}function iM(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+DP}function sM(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function aM(r){return r.requestStatus===1&&r.requestTime+RS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(r){const e=r,{installationEntry:t,registrationPromise:s}=await ey(e);return s?s.catch(console.error):ty(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(r,e=!1){const t=r;return await uM(t),(await ty(t,e)).token}async function uM(r){const{registrationPromise:e}=await ey(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(r){if(!r||!r.options)throw sp("App Configuration");if(!r.name)throw sp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw sp(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function sp(r){return wa.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="installations",hM="installations-internal",fM=r=>{const e=r.getProvider("app").getImmediate(),t=cM(e),s=Ns(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},dM=r=>{const e=r.getProvider("app").getImmediate(),t=Ns(e,qS).getImmediate();return{getId:()=>oM(t),getToken:o=>lM(t,o)}};function mM(){lr(new Zn(qS,fM,"PUBLIC")),lr(new Zn(hM,dM,"PRIVATE"))}mM();Tn(AS,Zg);Tn(AS,Zg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="analytics",pM="firebase_id",gM="origin",yM=60*1e3,_M="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new of("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},On=new Aa("analytics","Analytics",vM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(r){if(!r.startsWith(ny)){const e=On.create("invalid-gtag-resource",{gtagURL:r});return wn.warn(e.message),""}return r}function FS(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function TM(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function bM(r,e){const t=TM("firebase-js-sdk-policy",{createScriptURL:EM}),s=document.createElement("script"),o=`${ny}?l=${r}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function wM(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function SM(r,e,t,s,o,u){const h=s[o];try{if(h)await e[h];else{const p=(await FS(t)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(d){wn.error(d)}r("config",o,u)}async function AM(r,e,t,s,o){try{let u=[];if(o&&o.send_to){let h=o.send_to;Array.isArray(h)||(h=[h]);const d=await FS(t);for(const p of h){const g=d.find(S=>S.measurementId===p),E=g&&e[g.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),r("event",s,o||{})}catch(u){wn.error(u)}}function RM(r,e,t,s){async function o(u,...h){try{if(u==="event"){const[d,p]=h;await AM(r,e,t,d,p)}else if(u==="config"){const[d,p]=h;await SM(r,e,t,s,d,p)}else if(u==="consent"){const[d,p]=h;r("consent",d,p)}else if(u==="get"){const[d,p,g]=h;r("get",d,p,g)}else if(u==="set"){const[d]=h;r("set",d)}else r(u,...h)}catch(d){wn.error(d)}}return o}function IM(r,e,t,s,o){let u=function(...h){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=RM(u,r,e,t),{gtagCore:u,wrappedGtag:window[o]}}function CM(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ny)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=30,xM=1e3;class DM{constructor(e={},t=xM){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const HS=new DM;function OM(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function kM(r){var e;const{appId:t,apiKey:s}=r,o={method:"GET",headers:OM(s)},u=_M.replace("{app-id}",t),h=await fetch(u,o);if(h.status!==200&&h.status!==304){let d="";try{const p=await h.json();!((e=p.error)===null||e===void 0)&&e.message&&(d=p.error.message)}catch{}throw On.create("config-fetch-failed",{httpStatus:h.status,responseMessage:d})}return h.json()}async function PM(r,e=HS,t){const{appId:s,apiKey:o,measurementId:u}=r.options;if(!s)throw On.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw On.create("no-api-key")}const h=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new UM;return setTimeout(async()=>{d.abort()},yM),GS({appId:s,apiKey:o,measurementId:u},h,d,e)}async function GS(r,{throttleEndTimeMillis:e,backoffCount:t},s,o=HS){var u;const{appId:h,measurementId:d}=r;try{await MM(s,e)}catch(p){if(d)return wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:h,measurementId:d};throw p}try{const p=await kM(r);return o.deleteThrottleMetadata(h),p}catch(p){const g=p;if(!VM(g)){if(o.deleteThrottleMetadata(h),d)return wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:h,measurementId:d};throw p}const E=Number((u=g==null?void 0:g.customData)===null||u===void 0?void 0:u.httpStatus)===503?wE(t,o.intervalMillis,NM):wE(t,o.intervalMillis),S={throttleEndTimeMillis:Date.now()+E,backoffCount:t+1};return o.setThrottleMetadata(h,S),wn.debug(`Calling attemptFetch again in ${E} millis`),GS(r,S,s,o)}}function MM(r,e){return new Promise((t,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(t,o);r.addEventListener(()=>{clearTimeout(u),s(On.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function VM(r){if(!(r instanceof er)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class UM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function LM(r,e,t,s,o){if(o&&o.global){r("event",t,s);return}else{const u=await e,h=Object.assign(Object.assign({},s),{send_to:u});r("event",t,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(){if(qT())try{await FT()}catch(r){return wn.warn(On.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return wn.warn(On.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function BM(r,e,t,s,o,u,h){var d;const p=PM(r);p.then(x=>{t[x.measurementId]=x.appId,r.options.measurementId&&x.measurementId!==r.options.measurementId&&wn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>wn.error(x)),e.push(p);const g=jM().then(x=>{if(x)return s.getId()}),[E,S]=await Promise.all([p,g]);CM(u)||bM(u,E.measurementId),o("js",new Date);const R=(d=h==null?void 0:h.config)!==null&&d!==void 0?d:{};return R[gM]="firebase",R.update=!0,S!=null&&(R[pM]=S),o("config",E.measurementId,R),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.app=e}_delete(){return delete du[this.app.options.appId],Promise.resolve()}}let du={},iT=[];const sT={};let ap="dataLayer",qM="gtag",aT,$S,oT=!1;function FM(){const r=[];if(zT()&&r.push("This is a browser extension environment."),m1()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,o)=>`(${o+1}) ${s}`).join(" "),t=On.create("invalid-analytics-context",{errorInfo:e});wn.warn(t.message)}}function HM(r,e,t){FM();const s=r.options.appId;if(!s)throw On.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw On.create("no-api-key");if(du[s]!=null)throw On.create("already-exists",{id:s});if(!oT){wM(ap);const{wrappedGtag:u,gtagCore:h}=IM(du,iT,sT,ap,qM);$S=u,aT=h,oT=!0}return du[s]=BM(r,iT,sT,e,aT,ap,t),new zM(r)}function GM(r=lf()){r=We(r);const e=Ns(r,Jh);return e.isInitialized()?e.getImmediate():$M(r)}function $M(r,e={}){const t=Ns(r,Jh);if(t.isInitialized()){const o=t.getImmediate();if(gu(e,t.getOptions()))return o;throw On.create("already-initialized")}return t.initialize({options:e})}function KM(r,e,t,s){r=We(r),LM($S,du[r.app.options.appId],e,t,s).catch(o=>wn.error(o))}const lT="@firebase/analytics",uT="0.10.11";function QM(){lr(new Zn(Jh,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return HM(s,o,t)},"PUBLIC")),lr(new Zn("analytics-internal",r,"PRIVATE")),Tn(lT,uT),Tn(lT,uT,"esm2017");function r(e){try{const t=e.getProvider(Jh).getImmediate();return{logEvent:(s,o,u)=>KM(t,s,o,u)}}catch(t){throw On.create("interop-component-reg-failed",{reason:t})}}}QM();const YM={apiKey:"AIzaSyB2DvPSqpsj-1kIqt6NfU83Ge8wGyOTX-w",authDomain:"sscopenleaderboard.firebaseapp.com",projectId:"sscopenleaderboard",storageBucket:"sscopenleaderboard.firebasestorage.app",messagingSenderId:"819800294351",appId:"1:819800294351:web:09f19b18f3041db0b508ba",measurementId:"G-SLRCYN3MC2"},Uf=KT(YM);GM(Uf);const Ye=Wx(Uf),Ze=XO(Uf),zp=RP(Uf),XM=j.createContext(),WM=({children:r})=>{const[e,t]=j.useState(null),[s,o]=j.useState(!0);return j.useEffect(()=>Eb(Ye,h=>{t(h),o(!1)}),[]),T.jsx(XM.Provider,{value:{currentUser:e,loading:s},children:!s&&r})},ZM=j.createContext(),JM=({children:r})=>{const[e,t]=j.useState(null);return j.useEffect(()=>{const s=Eb(Ye,async o=>{if(o){const u=bt(Ze,"users",o.uid),h=await Ea(u);h.exists()&&t(h.data())}else t(null)});return()=>s()},[]),T.jsx(ZM.Provider,{value:{userData:e,setUserData:t},children:r})},eV=()=>{const r=Vr();return j.useEffect(()=>{if(!Ye.currentUser)return;const e=bt(Ze,"users",Ye.currentUser.uid);return Wh(e,s=>{s.exists()||(ig(Ye),r("/"))})},[r]),null};var op={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var cT;function tV(){return cT||(cT=1,function(r){(function(){var e={}.hasOwnProperty;function t(){for(var u="",h=0;h<arguments.length;h++){var d=arguments[h];d&&(u=o(u,s(d)))}return u}function s(u){if(typeof u=="string"||typeof u=="number")return u;if(typeof u!="object")return"";if(Array.isArray(u))return t.apply(null,u);if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]"))return u.toString();var h="";for(var d in u)e.call(u,d)&&u[d]&&(h=o(h,d));return h}function o(u,h){return h?u?u+" "+h:u+h:u}r.exports?(t.default=t,r.exports=t):window.classNames=t})()}(op)),op.exports}var nV=tV();const Lf=yT(nV);function Pr({styleType:r="default",children:e,className:t,...s}){const o={default:"themed-view-default",dark:"themed-view-dark",gold:"themed-view-gold",primary:"themed-view-primary",secondary:"themed-view-secondary",success:"themed-view-success",danger:"themed-view-danger"};return T.jsx("div",{className:Lf("themed-view",o[r],t),...s,children:e})}function ce({styleType:r="default",children:e,className:t,as:s="p",...o}){const u=s,h={default:"themed-text-default",dark:"themed-text-dark",gold:"themed-text-gold",primary:"themed-text-primary",secondary:"themed-text-secondary",success:"themed-text-success",danger:"themed-text-danger"};return T.jsx(u,{className:Lf(h[r],t),...o,children:e})}function it({styleType:r="default",children:e,className:t,disabled:s,onClick:o,...u}){const h={default:"themed-button-default",dark:"themed-button-dark",gold:"themed-button-gold",primary:"themed-button-primary",secondary:"themed-button-secondary",success:"themed-button-success",danger:"themed-button-danger"};return T.jsx("button",{type:"button",disabled:s,onClick:o,className:Lf("themed-button",h[r],t),...u,children:e})}function KS({styleType:r="default",children:e,className:t,...s}){const o={default:"themed-header-default",dark:"themed-header-dark",gold:"themed-header-gold",primary:"themed-header-primary",secondary:"themed-header-secondary",success:"themed-header-success",danger:"themed-header-danger"};return T.jsx("header",{className:Lf("themed-header",o[r],t),...s,children:e})}const ef="/assets/logo1-BDBOiGvk.png",QS="/assets/cg25-CpG0CG0a.png";var YS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hT=ma.createContext&&ma.createContext(YS),rV=["attr","size","title"];function iV(r,e){if(r==null)return{};var t=sV(r,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(t[s]=r[s])}return t}function sV(r,e){if(r==null)return{};var t={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(e.indexOf(s)>=0)continue;t[s]=r[s]}return t}function tf(){return tf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},tf.apply(this,arguments)}function fT(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function nf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fT(Object(t),!0).forEach(function(s){aV(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fT(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function aV(r,e,t){return e=oV(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function oV(r){var e=lV(r,"string");return typeof e=="symbol"?e:e+""}function lV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function XS(r){return r&&r.map((e,t)=>ma.createElement(e.tag,nf({key:t},e.attr),XS(e.child)))}function ry(r){return e=>ma.createElement(uV,tf({attr:nf({},r.attr)},e),XS(r.child))}function uV(r){var e=t=>{var{attr:s,size:o,title:u}=r,h=iV(r,rV),d=o||t.size||"1em",p;return t.className&&(p=t.className),r.className&&(p=(p?p+" ":"")+r.className),ma.createElement("svg",tf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,h,{className:p,style:nf(nf({color:r.color||t.color},t.style),r.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),u&&ma.createElement("title",null,u),r.children)};return hT!==void 0?ma.createElement(hT.Consumer,null,t=>e(t)):e(YS)}function cV(r){return ry({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(r)}function dT(r){return ry({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(r)}function mT(r){return ry({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(r)}const hV="sscopen2025",pT=()=>{const[r,e]=j.useState(""),[t,s]=j.useState(""),[o,u]=j.useState(null),[h,d]=j.useState(!1),[p,g]=j.useState(""),[E,S]=j.useState(null),[R,x]=j.useState(!1),[M,G]=j.useState(""),[V,z]=j.useState(null),q=Vr(),K=I=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I),re=I=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{6,}$/.test(I),se=async I=>{var D;try{const O=bt(Ze,"users",I.uid),N=await Ea(O);if(N.exists()){const _e=N.data();return{isMember:_e.isMember!==void 0?_e.isMember:!1}}else return await Xh(O,{uid:I.uid,displayName:I.displayName||((D=I.email)==null?void 0:D.split("@")[0])||"Anonymous",email:I.email||"",photoURL:I.photoURL||null,isMember:!1,onLeaderBoard:!1,createdAt:new Date}),{isMember:!1}}catch(O){return console.error("Error fetching user data:",O),u("Failed to fetch user data. Please try again."),{isMember:!1}}},Z=async()=>{if(p===hV)if(E){const I=bt(Ze,"users",E.uid);await Xh(I,{isMember:!0},{merge:!0}),d(!1),S(null),q(E.isMember?"/home":"/additionaldetails")}else u("No pending user found. Please log in again."),d(!1);else window.alert("Invalid Code: The membership code you entered is incorrect."),await ig(Ye),d(!1),S(null)},P=async I=>{if(I.preventDefault(),!K(r)){u("Please enter a valid email address.");return}if(!re(t)){u("Password must be at least 6 characters, including uppercase, lowercase, number, and special character.");return}try{const O=(await MN(Ye,r,t)).user;(await se(O)).isMember?q("/home"):(S(O),d(!0))}catch(D){console.error("Email Sign-In Error:",D),u(D.message)}},C=async()=>{const I=new fi;try{const O=(await ax(Ye,I)).user;(await se(O)).isMember?q("/home"):(S(O),d(!0))}catch(D){console.error("Google Sign-In Error:",D),u(D.message)}},b=async I=>{if(I.preventDefault(),!K(M)){z("Please enter a valid email address.");return}try{await kN(Ye,M),z(null),x(!1),u("Password reset email sent. Please check your inbox."),setTimeout(()=>q("/login"),2e3)}catch(D){console.error("Forgot Password Error:",D),z(D.message)}};return T.jsxs(Pr,{styleType:"default",className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 px-6 py-10 max-w-screen-lg",children:[T.jsx("div",{className:"mb-8",children:T.jsx("img",{src:QS,alt:"Seven Springs CrossFit Logo",className:"w-40 h-40 mx-auto mb-4"})}),T.jsx("div",{className:"mb-8",children:T.jsx("img",{src:ef,alt:"Seven Springs CrossFit Logo",className:"w-40 h-40 mx-auto"})}),R?T.jsxs("form",{onSubmit:b,className:"w-full max-w-md mx-auto mb-4 space-y-4",children:[T.jsx(ce,{as:"h2",styleType:"primary",className:"text-xl font-bold mb-4 text-center",children:"Reset Password"}),T.jsx("div",{children:T.jsx("input",{type:"email",placeholder:"Email",value:M,onChange:I=>G(I.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),V&&T.jsx(ce,{as:"p",styleType:"danger",className:"text-sm mb-2",children:V}),T.jsx(it,{styleType:"primary",className:"w-full py-3",type:"submit",children:"Send Reset Email"}),T.jsx(ce,{as:"p",styleType:"secondary",className:"text-sm text-center",children:T.jsx("button",{onClick:()=>x(!1),className:"text-blue-500 hover:underline",children:"Back to Login"})})]}):T.jsxs("form",{onSubmit:P,className:"w-full max-w-md mx-auto mb-4 space-y-4",children:[T.jsx("div",{children:T.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:I=>e(I.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),T.jsx("div",{children:T.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:I=>s(I.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),o&&T.jsx(ce,{as:"p",styleType:"danger",className:"text-sm mb-2",children:o}),T.jsx(it,{styleType:"primary",className:"w-full py-3",type:"submit",children:"Sign in with Email"}),T.jsx(ce,{as:"p",styleType:"secondary",className:"text-sm text-center",children:T.jsx(pu,{to:"/signup",className:"text-blue-500 hover:underline",children:"Don't have an account? Sign up"})}),T.jsx(ce,{as:"p",styleType:"secondary",className:"text-sm text-center",children:T.jsx(pu,{to:"#",onClick:I=>{I.preventDefault(),x(!0)},className:"text-blue-500 hover:underline",children:"Forgot Password?"})})]}),T.jsx("div",{className:"flex space-x-4",children:T.jsxs(it,{styleType:"secondary",onClick:C,className:"px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 flex items-center justify-center space-x-2",children:[T.jsx(cV,{className:"text-lg"}),T.jsx("span",{children:"Sign in with Google"})]})}),h&&T.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:T.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-sm",children:[T.jsx(ce,{as:"h2",styleType:"primary",className:"text-xl font-bold mb-4 w-2/3",children:"Enter Membership Code"}),T.jsx("input",{type:"text",placeholder:"(case-sensitive)",value:p,onChange:I=>g(I.target.value),className:"w-full p-3 border border-gray-300 rounded mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500"}),T.jsx(it,{styleType:"primary",className:"w-full",onClick:Z,children:"Submit Code"})]})})]})},fV=({navigateTo:r})=>{const[e,t]=j.useState(!1),s=()=>t(h=>!h),o=()=>t(!1),u=async()=>{try{await ig(Ye),typeof r=="function"?r("/login"):console.error("navigateTo is not a function")}catch(h){console.error("Logout error:",h)}o()};return console.log("Logo:",ef),T.jsxs(T.Fragment,{children:[T.jsxs(KS,{styleType:"default",className:"w-full flex items-center justify-between pb-10 mb-5",children:[T.jsx(it,{styleType:"primary",onClick:s,className:"mx-4",children:T.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),T.jsx("img",{src:ef,alt:"Logo",className:"h-14 my-5",onError:h=>{console.error("Logo failed to load:",h.target.src),h.target.src="https://via.placeholder.com/56"}}),T.jsx("div",{className:"w-8"})]}),e&&T.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[T.jsxs("div",{className:"w-64 bg-white shadow-lg p-4",children:[T.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[T.jsx(ce,{as:"h2",styleType:"secondary",className:"text-xl font-bold",children:"Menu"}),T.jsx("button",{onClick:o,className:"text-gray-600",children:"Close"})]}),T.jsxs("div",{className:"flex flex-col space-y-4",children:[T.jsx(it,{styleType:"secondary",onClick:()=>{typeof r=="function"?(r("/leaderboard"),o()):console.error("navigateTo is not a function")},className:"w-full",children:"Leaderboard"}),T.jsx(it,{styleType:"secondary",onClick:()=>{typeof r=="function"?(r("/settings"),o()):console.error("navigateTo is not a function")},className:"w-full",children:"Profile"}),T.jsx(it,{styleType:"secondary",onClick:u,className:"w-full",children:"Logout"})]})]}),T.jsx("div",{className:"flex-1 bg-black opacity-50",onClick:o})]})]})},dV=()=>{const r="https://games.crossfit.com/workouts/open/2025",e="25.1",[t,s]=j.useState(!1),o=Vr();j.useEffect(()=>{const h=async()=>{if(!Ye.currentUser)return;const d=bi(Ze,"scores"),p=Cs(d,Ht("userId","==",Ye.currentUser.uid),Ht("workoutName","==",e)),g=await Ta(p);s(!g.empty)};Ye.currentUser&&h()},[e]);const u=()=>{o("/scoreentry",{state:{workoutName:e}})};return T.jsxs(Pr,{styleType:"default",className:"rounded shadow-lg bg-gray-100 p-4 cursor-pointer hover:shadow-xl transition-shadow",children:[T.jsx(ce,{as:"h2",styleType:"primary",className:"text-xl font-bold mb-2",children:"CFG25 Open 25.1"}),T.jsx(ce,{as:"p",styleType:"default",className:"mb-2",children:"As many rounds and reps as possible in 15 minutes of:"}),T.jsxs("ul",{className:"list-disc list-inside mb-2",children:[T.jsx("li",{children:"3 lateral burpees over the dumbbell"}),T.jsx("li",{children:"3 dumbbell hang clean-to-overheads"}),T.jsx("li",{children:"30-foot walking lunge (2 x 15 feet)"})]}),T.jsxs(ce,{as:"p",styleType:"default",className:"mb-2",children:[T.jsx("strong",{children:"Progression:"})," After each round, add 3 reps to the burpees and hang clean-to-overheads."]}),T.jsxs(ce,{as:"p",styleType:"default",className:"mb-4",children:[T.jsx("strong",{children:"Dumbbell Weights:"})," Women: 35-lb (15-kg), Men: 50-lb (22.5-kg)"]}),T.jsx(it,{styleType:"primary",onClick:()=>window.open(r,"_blank"),className:"w-full mb-4",children:"View Official Workout"}),T.jsx(it,{styleType:"default",onClick:u,className:"w-full",children:t?"Edit Score":"Enter Score"})]})},lp=["25.1","25.2","25.3"],mV=r=>{const e=Math.floor((-5+Math.sqrt(25+12*r))/6),t=e*(3*e+5),s=r-t;return{rounds:e,extraReps:s}},pV=()=>{const[r,e]=j.useState(null),[t,s]=j.useState(!0),[o,u]=j.useState(null),h=Ye.currentUser,d=Vr(),p=R=>{const x=R%10,M=R%100;return x===1&&M!==11?R+"st":x===2&&M!==12?R+"nd":x===3&&M!==13?R+"rd":R+"th"},g=R=>{if(!R)return"NA";const x=R.trim().split(" ");return x.length===1?x[0].slice(0,2).toUpperCase():(x[0][0]+x[x.length-1][0]).toUpperCase()};j.useEffect(()=>{if(!h){s(!1);return}(async()=>{try{const x=bt(Ze,"users",h.uid),M=await Ea(x);if(M.exists()){const G=M.data();e({userId:h.uid,displayName:G.displayName||"Anonymous",athleteCategory:G.athleteCategory||"Unknown",photoURL:G.photoURL||null,onLeaderBoard:G.onLeaderBoard||!1,totalPoints:0,perWorkout:{}})}else e({userId:h.uid,displayName:"Anonymous",athleteCategory:"Unknown",photoURL:null,onLeaderBoard:!1,totalPoints:0,perWorkout:{}})}catch(x){console.error("Error fetching user data:",x),u("Failed to load user data.")}s(!1)})()},[h]),j.useEffect(()=>{if(!h)return;const R=bi(Ze,"scores"),x=Cs(R,Ht("workoutName","in",lp),Ht("completed","==",!0));return Wh(x,G=>{try{const V=G.docs.map(Z=>({id:Z.id,...Z.data()}));console.log("Scores listener triggered - allScores:",V);const z={};lp.forEach(Z=>{const P=V.filter(C=>C.workoutName===Z);if(P.length>0){let C=[];if(Z==="25.1"){const b={RX:1,Scaled:2,Foundations:3};C=[...P].sort((I,D)=>{const O=b[I.scaling]||99,N=b[D.scaling]||99;if(O!==N)return O-N;const _e=Number(I.reps||0);return Number(D.reps||0)-_e})}else if(Z==="25.2"){const b=P.filter(D=>D.completed),I=P.filter(D=>!D.completed);b.sort((D,O)=>{const N=D.finishTime?E(D.finishTime):1/0,_e=O.finishTime?E(O.finishTime):1/0;return N-_e}),I.sort((D,O)=>{const N=Number(D.reps||0);return Number(O.reps||0)-N}),C=[...b,...I]}else{const b={RX:1,Scaled:2,Foundations:3};C=[...P].sort((I,D)=>{const O=b[I.scaling]||99,N=b[D.scaling]||99;if(O!==N)return O-N;const _e=I.finishTime?E(I.finishTime):1/0,Te=D.finishTime?E(D.finishTime):1/0;return _e-Te})}C.forEach((b,I)=>{const D=I+1;z[b.userId]||(z[b.userId]={userId:b.userId,totalPoints:0,perWorkout:{}}),z[b.userId].totalPoints+=D;let O=b.finishTime||`${b.reps||0} reps`;if(Z==="25.1"){const N=Number(b.reps||0);if(!isNaN(N)&&N>=0){const{rounds:_e,extraReps:Te}=mV(N);O=`${_e} + ${Te} | ${N} reps`}else O="0 reps"}z[b.userId].perWorkout[b.workoutName]=`${p(D)} (${O})`})}});const q=Object.values(z);q.sort((Z,P)=>Z.totalPoints-P.totalPoints);const K=q.length,re=q.find(Z=>Z.userId===h.uid)||{userId:h.uid,totalPoints:0,perWorkout:{}},se=q.findIndex(Z=>Z.userId===h.uid)+1||K;e(Z=>{const P={overallPlacement:se,totalParticipants:K,userId:h.uid,displayName:(Z==null?void 0:Z.displayName)||"Anonymous",athleteCategory:(Z==null?void 0:Z.athleteCategory)||"Unknown",photoURL:(Z==null?void 0:Z.photoURL)||null,onLeaderBoard:(Z==null?void 0:Z.onLeaderBoard)||!1,totalPoints:re.totalPoints||0,perWorkout:re.perWorkout||{}};return(Z==null?void 0:Z.totalPoints)!==P.totalPoints||JSON.stringify(Z==null?void 0:Z.perWorkout)!==JSON.stringify(P.perWorkout)||(Z==null?void 0:Z.onLeaderBoard)!==P.onLeaderBoard?(console.log("Standings updated:",P),P):Z})}catch(V){console.error("Error processing scores:",V),u(`Failed to compute standings: ${V.message}`)}},G=>{console.error("Snapshot error:",G),u(`Failed to listen to scores: ${G.message}`)})},[h]),j.useEffect(()=>{if(!h)return;const R=bt(Ze,"users",h.uid),x=Wh(R,M=>{if(M.exists()){const G=M.data();console.log("User listener triggered - userData:",G),e(V=>{const z=V?{...V,displayName:G.displayName||V.displayName||"Anonymous",athleteCategory:G.athleteCategory||V.athleteCategory||"Unknown",photoURL:G.photoURL||V.photoURL||null,onLeaderBoard:G.onLeaderBoard||V.onLeaderBoard||!1}:{userId:h.uid,displayName:G.displayName||"Anonymous",athleteCategory:G.athleteCategory||"Unknown",photoURL:G.photoURL||null,onLeaderBoard:G.onLeaderBoard||!1,totalPoints:0,perWorkout:{}};return console.log("User data updated:",z),z})}else console.log("No user data found for:",h.uid),e({userId:h.uid,displayName:"Anonymous",athleteCategory:"Unknown",photoURL:null,onLeaderBoard:!1,totalPoints:0,perWorkout:{}})},M=>{console.error("User snapshot error:",M),u("Failed to listen to user data.")});return()=>x()},[h]);const E=R=>{if(!R||typeof R!="string")return 1/0;const x=R.split(":");if(x.length!==2)return 1/0;const M=parseInt(x[0],10)||0,G=parseInt(x[1],10)||0;return M*60+G};if(!h)return T.jsx(ce,{as:"p",styleType:"danger",children:"You are not logged in."});if(t)return T.jsx(ce,{as:"p",styleType:"secondary",children:"Loading standings..."});if(o)return T.jsx(ce,{as:"p",styleType:"danger",children:o});if(!r)return T.jsx(ce,{as:"p",styleType:"secondary",children:"No standings available."});const S=()=>{d("/leaderboard")};return T.jsxs(Pr,{styleType:"default",className:"p-6 rounded shadow-lg bg-gray-100 cursor-pointer hover:shadow-xl transition-shadow",onClick:S,children:[r.onLeaderBoard&&T.jsx(KS,{styleType:"default",className:"mb-4 p-4",children:T.jsxs(ce,{as:"h2",styleType:"primary",className:"text-2xl font-bold",children:["Overall Placement: ",p(r.overallPlacement)," of"," ",r.totalParticipants]})}),T.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.photoURL?T.jsx("img",{src:r.photoURL,alt:r.displayName,className:"w-16 h-16 rounded-full object-cover"}):T.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-300 flex items-center justify-center",children:T.jsx(ce,{as:"p",styleType:"primary",className:"text-xl font-bold",children:g(r.displayName)})}),T.jsxs("div",{children:[T.jsx(ce,{as:"p",styleType:"secondary",className:"text-lg",children:r.displayName}),T.jsxs(ce,{as:"p",styleType:"secondary",className:"text-lg",children:["Category: ",r.athleteCategory]})]})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"h3",styleType:"primary",className:"text-xl font-bold mb-2",children:"Workout Results"}),T.jsx("div",{className:"space-y-2",children:lp.map(R=>T.jsxs("div",{className:"flex justify-between border-b pb-1",children:[T.jsx(ce,{as:"p",styleType:"secondary",className:"font-semibold",children:R}),T.jsx(ce,{as:"p",styleType:"default",children:r.perWorkout&&r.perWorkout[R]?r.perWorkout[R]:"-"})]},R))})]})]})},gV=()=>{const[r,e]=j.useState(!1),[t,s]=j.useState(0),o=Vr(),u=Ai(),h="25.1";return j.useEffect(()=>{if(!Ye.currentUser)return;const d=bi(Ze,"scores"),p=Cs(d,Ht("userId","==",Ye.currentUser.uid),Ht("workoutName","==",h)),g=Wh(p,S=>{e(!S.empty),console.log("Score status updated:",!S.empty)},S=>{console.error("Error listening to scores:",S)});return(async()=>{const S=await Ta(p);e(!S.empty)})(),()=>g()},[h]),j.useEffect(()=>{(async()=>{if(!Ye.currentUser)return;const p=bi(Ze,"scores"),g=Cs(p,Ht("userId","==",Ye.currentUser.uid),Ht("workoutName","==",h)),E=await Ta(g);e(!E.empty),s(S=>S+1),console.log("Re-checked score on navigation:",!E.empty)})()},[u,h]),T.jsxs(Pr,{styleType:"default",className:"min-h-screen w-screen",children:[T.jsx(fV,{navigateTo:o}),T.jsxs("div",{className:"",children:[T.jsxs("section",{className:"mb-6",children:[T.jsx(pV,{},t)," "]}),T.jsx("div",{className:"",children:T.jsx(dV,{})})]})]})},Xn=r=>{if(!r)return 1/0;const e=r.split(":");return parseInt(e[0],10)*60+parseInt(e[1],10)},yV=()=>{const[r,e]=j.useState("All"),[t,s]=j.useState("Overall"),[o,u]=j.useState("All"),[h,d]=j.useState("Overall"),p=Ye.currentUser,g=j.useMemo(()=>["25.1","25.2","25.3"],[]),[E,S]=j.useState([]),[R,x]=j.useState(!0),[M,G]=j.useState(null);j.useEffect(()=>{(async()=>{if(console.log("Starting fetchScores..."),console.log("Current user:",p),!p){console.log("User not authenticated, setting error and returning"),G("You must be logged in to view the leaderboard."),x(!1);return}x(!0);try{const K=bi(Ze,"scores");console.log("Scores collection reference:",K.path);let re=[];if(h==="Overall"){console.log("Fetching Overall leaderboard...");const se=Cs(K,Ht("workoutName","in",g),Ht("completed","==",!0));console.log("Query constructed:",se);const Z=await Ta(se);console.log("Query snapshot received, documents count:",Z.size);let P=Z.docs.map(O=>({id:O.id,...O.data()}));console.log("Fetched scores:",P),r!=="All"&&(console.log("Applying sex filter:",r),P=P.filter(O=>O.sex&&O.sex.toLowerCase()===r.toLowerCase())),t!=="Overall"&&(console.log("Applying age group filter:",t),P=P.filter(O=>O.athleteCategory===t)),o!=="All"&&(console.log("Applying scaling filter:",o),P=P.filter(O=>O.scaling===o)),console.log("Filtered scores:",P);const C={};g.forEach(O=>{console.log(`Processing workout: ${O}`);const N=P.filter(Te=>Te.workoutName===O);console.log(`Scores for ${O}:`,N);let _e=[];if(O==="25.2"){console.log("Sorting 25.2...");const Te=N.filter(de=>de.completed),oe=N.filter(de=>!de.completed);Te.sort((de,pe)=>Xn(de.finishTime)-Xn(pe.finishTime)),oe.sort((de,pe)=>pe.reps-de.reps),_e=[...Te,...oe]}else if(O==="25.1")console.log("Sorting 25.1 by reps descending..."),_e=[...N].sort((Te,oe)=>Number(oe.reps||0)-Number(Te.reps||0));else{console.log("Sorting 25.3...");const Te={RX:1,Scaled:2,Foundations:3};_e=[...N].sort((oe,de)=>{const pe=Te[oe.scaling]||99,Ue=Te[de.scaling]||99;if(pe!==Ue)return pe-Ue;const U=Xn(oe.finishTime),ie=Xn(de.finishTime);if(U!==ie)return U-ie;const ge=Xn(oe.tiebreakTime),ae=Xn(de.tiebreakTime);return ge-ae})}console.log(`Sorted scores for ${O}:`,_e),C[O]=_e.map((Te,oe)=>({userId:Te.userId,placement:oe+1,scoreDisplay:O==="25.2"?Te.completed?Te.finishTime:`${Te.reps} reps`:Te.finishTime||`${Te.reps} reps`,rankingPoints:oe+1}))});const b={};P.forEach(O=>{b[O.userId]||(b[O.userId]={userId:O.userId,displayName:"",athleteCategory:"",totalPoints:0,perWorkout:{},photoURL:null})}),console.log("Aggregated initial state:",b),g.forEach(O=>{console.log(`Aggregating rankings for ${O}`),(C[O]||[]).forEach(_e=>{b[_e.userId]&&(b[_e.userId].perWorkout[O]=`${_e.placement} (${_e.scoreDisplay})`,b[_e.userId].totalPoints+=_e.rankingPoints)})});let I=Object.values(b);console.log("Aggregated array before sorting:",I),I.sort((O,N)=>O.totalPoints-N.totalPoints),console.log("Aggregated array after sorting by totalPoints:",I);const D=I.map(async O=>{console.log(`Fetching user profile for userId: ${O.userId}`);const N=bt(Ze,"users",O.userId),_e=await Ea(N);if(_e.exists()){const Te=_e.data();O.displayName=Te.displayName||"Anonymous",O.athleteCategory=Te.athleteCategory||"Unknown",O.photoURL=Te.photoURL||null,console.log(`User profile fetched for ${O.userId}:`,Te)}else console.log(`No user document found for userId: ${O.userId}`)});await Promise.all(D),console.log("Final aggregated array with user profiles:",I),S(I)}else{console.log("Fetching specific workout:",h);let se=[Ht("workoutName","==",h)];h!=="25.2"&&se.push(Ht("completed","==",!0)),r!=="All"&&se.push(Ht("sex","==",r.toLowerCase())),t!=="Overall"&&se.push(Ht("athleteCategory","==",t)),o!=="All"&&se.push(Ht("scaling","==",o));const Z=Cs(K,...se);console.log("Specific workout query:",Z);const P=await Ta(Z);if(console.log("Specific workout query snapshot, documents count:",P.size),re=P.docs.map(b=>({id:b.id,...b.data()})),console.log("Fetched specific workout scores:",re),h==="25.2"){console.log("Sorting 25.2...");const b=re.filter(D=>D.completed),I=re.filter(D=>!D.completed);b.sort((D,O)=>Xn(D.finishTime)-Xn(O.finishTime)),I.sort((D,O)=>O.reps-D.reps),re=[...b,...I]}else if(h==="25.1")console.log("Sorting 25.1 by reps descending..."),re.sort((b,I)=>I.reps-b.reps),re=re.map(b=>{const{rounds:I,extraReps:D}=V(b.reps);return{...b,rounds:I,extraReps:D}});else{console.log("Sorting 25.3...");const b={RX:1,Scaled:2,Foundations:3};re.sort((I,D)=>{const O=b[I.scaling]||99,N=b[D.scaling]||99;if(O!==N)return O-N;const _e=Xn(I.finishTime),Te=Xn(D.finishTime);if(_e!==Te)return _e-Te;const oe=Xn(I.tiebreakTime),de=Xn(D.tiebreakTime);return oe-de})}console.log("Sorted specific workout scores:",re),re=re.map((b,I)=>({...b,rankingPoints:I+1})),console.log("Scores with ranking points:",re);const C=re.map(async b=>{console.log(`Fetching user data for score userId: ${b.userId}`);const I=bt(Ze,"users",b.userId),D=await Ea(I);if(D.exists()){const O=D.data();b.photoURL=O.photoURL||null,b.displayName=O.displayName||b.displayName||"Anonymous",console.log(`User data fetched for ${b.userId}:`,O)}else console.log(`No user document found for userId: ${b.userId}`)});await Promise.all(C),console.log("Final specific workout scores with user data:",re),re.forEach(b=>{console.log(`Updating rankingPoints for score ${b.id}`);const I=bt(Ze,"scores",b.id);No(I,{rankingPoints:b.rankingPoints}).catch(D=>console.error(`Error updating points for score ${b.id}:`,D))}),S(re)}console.log("Setting scores:",E),x(!1)}catch(K){console.error("Error fetching leaderboard:",K),G(`Failed to load leaderboard: ${K.message}`),x(!1)}})()},[r,t,o,h,p,g]);const V=q=>{const K=Math.floor((-5+Math.sqrt(25+12*q))/6),re=K*(3*K+5),se=q-re;return{rounds:K,extraReps:se}},z=q=>{if(!q)return"NA";const K=q.trim().split(" ");return K.length===1?K[0].slice(0,2).toUpperCase():(K[0][0]+K[K.length-1][0]).toUpperCase()};return p?R?(console.log("Leaderboard loading..."),T.jsx(ce,{as:"p",styleType:"secondary",children:"Loading..."})):M?(console.log("Leaderboard error:",M),T.jsx(ce,{as:"p",styleType:"danger",children:M})):T.jsxs(Pr,{styleType:"default",className:"min-h-screen p-4 bg-gray-100 w-full",children:[T.jsx(ce,{as:"h1",styleType:"primary",className:"text-3xl font-bold mb-4",children:"Leaderboard"}),T.jsxs("div",{className:"mb-6 space-y-4",children:[T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-1",children:"Workout:"}),T.jsxs("select",{value:h,onChange:q=>d(q.target.value),className:"p-2 border rounded w-full",children:[T.jsx("option",{value:"Overall",children:"Overall"}),g.map(q=>T.jsx("option",{value:q,children:q},q))]})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-1",children:"Sex:"}),T.jsxs("select",{value:r,onChange:q=>e(q.target.value),className:"p-2 border rounded w-full ",children:[T.jsx("option",{value:"All",children:"All"}),T.jsx("option",{value:"male",children:"Male"}),T.jsx("option",{value:"female",children:"Female"})]})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-1",children:"Age Group:"}),T.jsxs("select",{value:t,onChange:q=>s(q.target.value),className:"p-2 border rounded w-full",children:[T.jsx("option",{value:"Overall",children:"Overall"}),T.jsx("option",{value:"Masters 35-39",children:"Masters 35-39"}),T.jsx("option",{value:"Masters 40-44",children:"Masters 40-44"}),T.jsx("option",{value:"Masters 45-49",children:"Masters 45-49"}),T.jsx("option",{value:"Masters 50-54",children:"Masters 50-54"}),T.jsx("option",{value:"Masters 55-59",children:"Masters 55-59"}),T.jsx("option",{value:"Masters 60-64",children:"Masters 60-64"}),T.jsx("option",{value:"Masters 65+",children:"Masters 65+"}),T.jsx("option",{value:"Teen 14-15",children:"Teen 14-15"}),T.jsx("option",{value:"Teen 16-17",children:"Teen 16-17"}),T.jsx("option",{value:"Open",children:"Open"})]})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-1",children:"Scaling:"}),T.jsxs("select",{value:o,onChange:q=>u(q.target.value),className:"p-2 border rounded w-full",children:[T.jsx("option",{value:"All",children:"All"}),T.jsx("option",{value:"RX",children:"RX"}),T.jsx("option",{value:"Scaled",children:"Scaled"}),T.jsx("option",{value:"Foundations",children:"Foundations"})]})]})]}),R?T.jsx(ce,{as:"p",styleType:"secondary",children:"Loading..."}):M?T.jsx(ce,{as:"p",styleType:"danger",children:M}):h==="Overall"?T.jsx("div",{className:"overflow-x-auto shadow-md bg-white rounded",children:T.jsxs("table",{className:"min-w-full border-collapse",children:[T.jsx("thead",{className:"bg-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"border p-2",children:"Rank"}),T.jsx("th",{className:"border p-2",children:"Athlete"}),T.jsx("th",{className:"border p-2",children:"Total Points"}),g.map(q=>T.jsx("th",{className:"border p-2",children:q},q))]})}),T.jsx("tbody",{children:E.map((q,K)=>T.jsxs("tr",{className:"bg-white hover:bg-gray-50",children:[T.jsx("td",{className:"border p-2 text-center",children:K+1}),T.jsx("td",{className:"border p-2",children:T.jsxs("div",{className:"flex items-center space-x-2 min-w-[200px]",children:[q.photoURL?T.jsx("img",{src:q.photoURL,alt:q.displayName,className:"w-10 h-10 rounded-full object-cover"}):T.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center",children:T.jsx(ce,{as:"p",styleType:"primary",className:"text-sm font-bold",children:q.displayName?z(q.displayName):"NA"})}),T.jsx("span",{children:q.displayName||"Anonymous"})]})}),T.jsx("td",{className:"border p-2 text-center",children:q.totalPoints}),g.map(re=>T.jsx("td",{className:"border p-2 text-center",children:q.perWorkout&&q.perWorkout[re]?q.perWorkout[re]:"-"},re))]},q.userId||q.id))})]})}):T.jsx("div",{className:"overflow-x-auto shadow-md bg-white rounded",children:T.jsxs("table",{className:"min-w-full border-collapse",children:[T.jsx("thead",{className:"bg-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"border p-2",children:"Rank"}),T.jsx("th",{className:"border p-2",children:"Athlete"}),h==="25.2"?T.jsxs(T.Fragment,{children:[T.jsx("th",{className:"border p-2",children:"Status"}),T.jsx("th",{className:"border p-2",children:"Time/Reps"})]}):h==="25.1"?T.jsx("th",{className:"border p-2",children:"Round + Reps"}):T.jsxs(T.Fragment,{children:[T.jsx("th",{className:"border p-2",children:"Scaling"}),T.jsx("th",{className:"border p-2",children:"Time/Reps"})]})]})}),T.jsx("tbody",{children:E.map((q,K)=>T.jsxs("tr",{className:"bg-white hover:bg-gray-50",children:[T.jsx("td",{className:"border p-2 text-center",children:K+1}),T.jsx("td",{className:"border p-2",children:T.jsxs("div",{className:"flex items-center space-x-2 min-w-[200px]",children:[q.photoURL?T.jsx("img",{src:q.photoURL,alt:q.displayName,className:"w-10 h-10 rounded-full object-cover"}):T.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center",children:T.jsx(ce,{as:"p",styleType:"primary",className:"text-sm font-bold",children:q.displayName?z(q.displayName):"NA"})}),T.jsx("span",{children:q.displayName||"Anonymous"})]})}),T.jsx("td",{className:"border p-2 text-center min-w-[250px]",children:h==="25.1"&&q.rounds!==void 0&&q.extraReps!==void 0?`${q.rounds} rounds + ${q.extraReps} reps (${q.reps})`:q.reps||"-"})]},q.userId||q.id))})]})}),T.jsx("div",{className:"mt-4",children:T.jsx(it,{styleType:"primary",onClick:()=>window.location.reload(),className:"w-full",children:"Refresh Leaderboard"})})]}):(console.log("User not logged in, rendering login message"),T.jsx(ce,{as:"p",styleType:"danger",children:"You are not logged in."}))};function _V(r){const e=new Date(r),t=new Date;let s=t.getFullYear()-e.getFullYear();const o=t.getMonth()-e.getMonth();return(o<0||o===0&&t.getDate()<e.getDate())&&s--,s}function vV(r){return r>=35?r<=39?"Masters 35-39":r<=44?"Masters 40-44":r<=49?"Masters 45-49":r<=54?"Masters 50-54":r<=59?"Masters 55-59":r<=64?"Masters 60-64":"Masters 65+":r>=14&&r<=15?"Teen 14-15":r>=16&&r<=17?"Teen 16-17":"Open"}const EV=()=>T.jsx("div",{className:"flex items-center justify-center",children:T.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}),TV=()=>{const r=Vr(),e=Ye.currentUser,[t,s]=j.useState(!0),[o,u]=j.useState(""),[h,d]=j.useState(""),[p,g]=j.useState(""),[E,S]=j.useState(""),[R,x]=j.useState(""),[M,G]=j.useState(!1),[V,z]=j.useState(null),[q,K]=j.useState(!1),[re,se]=j.useState(!1),[Z,P]=j.useState(""),[C,b]=j.useState(""),[I,D]=j.useState(""),[O,N]=j.useState(!1),[_e,Te]=j.useState(""),[oe,de]=j.useState(!1);j.useEffect(()=>{(async()=>{if(e)try{const ue=bt(Ze,"users",e.uid),we=await Ea(ue);if(we.exists()){const be=we.data();u(be.displayName||""),d(be.photoURL||""),g(be.sex||""),S(be.profession||""),x(be.dob||"")}}catch(ue){console.error("Error fetching user data:",ue),z("Failed to load your settings. Please try again.")}s(!1)})()},[e]);const pe=async()=>{if(_e.trim())try{await oS(bi(Ze,"feedback"),{userId:e.uid,feedback:_e,createdAt:new Date}),de(!0),Te("")}catch(ae){console.error("Error submitting feedback:",ae),z("Failed to submit feedback. Please try again.")}},Ue=async ae=>{const ue=ae.target.files[0];if(ue){G(!0);try{const we=jp(zp,`profilePics/${e.uid}/${ue.name}`);await wS(we,ue);const be=await SS(we);d(be);const at=bt(Ze,"users",e.uid);await No(at,{photoURL:be})}catch(we){console.error("Error uploading profile picture:",we),z("Failed to upload your profile picture.")}G(!1)}},U=async()=>{try{if(Z!==o){const ae=bt(Ze,"users",e.uid);await No(ae,{displayName:Z}),u(Z)}C&&C!==e.email&&await VN(e,C),I&&await UN(e,I),se(!1)}catch(ae){console.error("Error updating profile:",ae),z("Failed to update your profile. Please try again.")}},ie=async()=>{try{try{await e.getIdToken(!0)}catch(xe){console.error("Reauthentication failed:",xe),z("Please log out and log back in to delete your account.");return}const ae=Cs(bi(Ze,"scores"),Ht("userId","==",e.uid)),we=(await Ta(ae)).docs.map(xe=>Vp(xe.ref));await Promise.all(we);const be=jp(zp,`profilePics/${e.uid}`);try{const xe=await SP(be);if(xe.items.length>0){const ot=xe.items.map(He=>AP(He).then(()=>console.log(`Deleted file: ${He.fullPath}`)).catch(Gt=>{console.error(`Failed to delete file ${He.fullPath}:`,Gt)}));await Promise.all(ot)}else console.log(`No files found in ${be.fullPath}`)}catch(xe){console.error("Storage deletion failed:",xe)}const at=bt(Ze,"users",e.uid);await Vp(at),await BN(e),r("/")}catch(ae){console.error("Error deleting account:",ae),ae.code==="auth/requires-recent-login"?z("Please log out and log back in to delete your account."):z("Failed to delete your account. Please try again.")}};if(t)return T.jsx(Pr,{styleType:"default",className:"min-h-screen flex items-center justify-center",children:T.jsx(EV,{})});const ge=R&&!isNaN(new Date(R).getTime())?vV(_V(R)):"N/A";return T.jsxs(Pr,{styleType:"default",className:"min-h-screen bg-gray-50 py-8 px-4",children:[T.jsxs("div",{className:"max-w-md mx-auto",children:[T.jsx("header",{className:"mb-8 text-center",children:T.jsx(ce,{as:"h1",styleType:"primary",className:"text-3xl font-bold",children:"Profile"})}),V&&T.jsx(ce,{as:"p",styleType:"danger",className:"mb-6 text-center",children:V}),re?T.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"default",className:"block mb-2 font-semibold",children:"Username"}),T.jsx("input",{type:"text",value:Z,onChange:ae=>P(ae.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your username"})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"default",className:"block mb-2 font-semibold",children:"Email"}),T.jsx("input",{type:"email",value:C,onChange:ae=>b(ae.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email"})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"default",className:"block mb-2 font-semibold",children:"New Password"}),T.jsx("input",{type:"password",value:I,onChange:ae=>D(ae.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a new password (optional)"})]}),T.jsxs("div",{className:"flex space-x-4",children:[T.jsx(it,{styleType:"primary",onClick:U,className:"flex-1 py-3 text-lg",children:"Save Changes"}),T.jsx(it,{styleType:"secondary",onClick:()=>se(!1),className:"flex-1 py-3 text-lg",children:"Cancel"})]})]}):T.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[T.jsxs("div",{className:"flex items-center space-x-4",children:[h?T.jsx("img",{src:h,alt:"Profile",className:"w-20 h-20 rounded-full object-cover aspect-square border border-gray-300"}):T.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center border border-gray-300",children:T.jsx(ce,{as:"p",styleType:"secondary",className:"text-xl",children:"No Pic"})}),T.jsx("input",{type:"file",onChange:Ue,className:"text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"h2",styleType:"primary",className:"font-bold",children:"Username:"}),T.jsx(ce,{as:"p",styleType:"secondary",children:o})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"h2",styleType:"primary",className:"font-bold",children:"Email:"}),T.jsx(ce,{as:"p",styleType:"secondary",children:e.email})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"h2",styleType:"primary",className:"font-bold",children:"Sex:"}),T.jsx(ce,{as:"p",styleType:"secondary",children:p||"Not set"})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"h2",styleType:"primary",className:"font-bold",children:"Profession:"}),T.jsx(ce,{as:"p",styleType:"secondary",children:E||"Not set"})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"h2",styleType:"primary",className:"font-bold",children:"Date of Birth:"}),T.jsx(ce,{as:"p",styleType:"secondary",children:R||"Not set"})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"h2",styleType:"primary",className:"font-bold",children:"Athlete Category:"}),T.jsx(ce,{as:"p",styleType:"secondary",children:ge})]}),T.jsxs("div",{className:"flex space-x-4",children:[T.jsx(it,{styleType:"primary",onClick:()=>{P(o),b(e.email),D(""),se(!0)},className:"flex-1 py-3 text-lg",children:"Edit Profile"}),T.jsx(it,{styleType:"danger",onClick:()=>K(!0),className:"flex-1 py-3 text-lg",children:"Delete Account"})]})]}),q&&!re&&T.jsxs("div",{className:"space-y-2 mt-6",children:[T.jsx(ce,{as:"p",styleType:"danger",className:"text-center",children:"Are you sure? This will delete all your data and cannot be undone."}),T.jsxs("div",{className:"flex space-x-4",children:[T.jsx(it,{styleType:"danger",onClick:ie,className:"flex-1 py-2",children:"Yes, Delete"}),T.jsx(it,{styleType:"secondary",onClick:()=>K(!1),className:"flex-1 py-2",children:"Cancel"})]})]})]}),T.jsxs("div",{className:"mt-8",children:[T.jsx(it,{styleType:"primary",onClick:()=>N(!O),className:"w-full py-3 text-lg",children:O?"Hide Feedback Form":"Send Feedback / Report Issue"}),O&&T.jsx("div",{className:"mt-4",children:oe?T.jsx(ce,{as:"p",styleType:"secondary",className:"mb-4",children:"Thank you for your feedback!"}):T.jsxs(T.Fragment,{children:[T.jsx("textarea",{value:_e,onChange:ae=>Te(ae.target.value),placeholder:"Enter your feedback or report any issues here...",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4}),T.jsxs("div",{className:"flex space-x-4 mt-2",children:[T.jsx(it,{styleType:"primary",onClick:pe,className:"flex-1 py-2",children:"Submit Feedback"}),T.jsx(it,{styleType:"secondary",onClick:()=>N(!1),className:"flex-1 py-2",children:"Cancel"})]})]})})]})]})};function bV(r){const e=new Date(r),t=new Date;let s=t.getFullYear()-e.getFullYear();const o=t.getMonth()-e.getMonth();return(o<0||o===0&&t.getDate()<e.getDate())&&s--,s}function wV(r){return r>=35?r<=39?"Masters 35-39":r<=44?"Masters 40-44":r<=49?"Masters 45-49":r<=54?"Masters 50-54":r<=59?"Masters 55-59":r<=64?"Masters 60-64":"Masters 65+":r>=14&&r<=15?"Teen 14-15":r>=16&&r<=17?"Teen 16-17":"Open"}const SV=()=>{const[r,e]=j.useState(""),[t,s]=j.useState(""),[o,u]=j.useState(""),[h,d]=j.useState(""),[p,g]=j.useState(!1),[E,S]=j.useState(""),R=Vr(),x=["Medical professional","Educator","CrossFit trainer","Military veteran","Active-duty military","Law enforcement officer","Firefighter","CrossFit affiliate owner","First responder","Not listed"],M=async V=>{const z=V.target.files[0];if(z){g(!0);try{const q=jp(zp,`profilePics/${Ye.currentUser.uid}/${z.name}`);await wS(q,z);const K=await SS(q);d(K)}catch(q){console.error("Error uploading profile picture:",q),S("Failed to upload profile picture.")}g(!1)}},G=async V=>{if(V.preventDefault(),!r||!t||!o||!h){S("Please complete all fields, including adding a profile picture.");return}const z=bV(o),q=wV(z);try{const K=bt(Ze,"users",Ye.currentUser.uid);await Xh(K,{sex:r,profession:t,dob:o,athleteCategory:q,photoURL:h,isMember:!0},{merge:!0}),R("/home")}catch(K){console.error("Error saving additional details:",K),S("Failed to save details. Please try again.")}};return T.jsxs(Pr,{styleType:"default",className:"min-h-screen p-4",children:[T.jsx(ce,{as:"h1",styleType:"primary",className:"text-3xl font-bold mb-4",children:"Additional Details"}),T.jsxs("form",{onSubmit:G,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-1",children:"Select your sex:"}),T.jsxs("div",{className:"flex space-x-4",children:[T.jsxs("label",{className:"flex items-center",children:[T.jsx("input",{type:"radio",name:"sex",value:"Male",checked:r==="Male",onChange:()=>e("Male"),className:"mr-2"}),"Male"]}),T.jsxs("label",{className:"flex items-center",children:[T.jsx("input",{type:"radio",name:"sex",value:"Female",checked:r==="Female",onChange:()=>e("Female"),className:"mr-2"}),"Female"]})]})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-1",children:"Select your profession:"}),T.jsxs("select",{value:t,onChange:V=>s(V.target.value),className:"p-2 border border-gray-300 rounded w-full",children:[T.jsx("option",{value:"",children:"-- Select Profession --"}),x.map((V,z)=>T.jsx("option",{value:V,children:V},z))]})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-1",children:"Date of Birth:"}),T.jsx("input",{type:"date",value:o,onChange:V=>u(V.target.value),className:"p-2 border border-gray-300 rounded w-full"})]}),T.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[h?T.jsx("img",{src:h,alt:"Profile Preview",className:"w-32 h-32 rounded-full mb-2 object-cover border border-gray-300"}):T.jsx("label",{htmlFor:"profilePicInput",className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center border border-gray-300 cursor-pointer hover:bg-gray-300",children:T.jsx(ce,{as:"p",styleType:"secondary",className:"text-lg",children:"Choose Photo"})}),T.jsx("input",{id:"profilePicInput",type:"file",onChange:M,className:"hidden",accept:"image/*"}),p&&T.jsx(ce,{as:"p",styleType:"default",className:"text-sm text-gray-500",children:"Uploading..."})]}),E&&T.jsx(ce,{as:"p",styleType:"danger",className:"text-sm",children:E}),T.jsx(it,{styleType:"primary",type:"submit",className:"w-full",children:"Save Details"})]})]})},gT=r=>{const e=Math.floor((-5+Math.sqrt(25+12*r))/6),t=e*(3*e+5),s=r-t;return{rounds:e,extraReps:s}},AV=()=>{const r=Ai(),{workoutName:e}=r.state||{workoutName:"Default Workout"},[t,s]=j.useState("RX"),[o,u]=j.useState(""),[h,d]=j.useState(null),[p,g]=j.useState(""),[E,S]=j.useState(null),[R,x]=j.useState(!1),[M,G]=j.useState(null),[V,z]=j.useState(null),q=Vr();j.useEffect(()=>{(async()=>{if(Ye.currentUser)try{const Z=bt(Ze,"users",Ye.currentUser.uid),P=await Ea(Z);P.exists()?z(P.data()):z(null)}catch(Z){console.error("Error fetching user details:",Z)}})()},[]),j.useEffect(()=>{(async()=>{var b;if(!Ye.currentUser)return;const Z=bi(Ze,"scores"),P=Cs(Z,Ht("userId","==",Ye.currentUser.uid),Ht("workoutName","==",e)),C=await Ta(P);if(C.empty)d(null);else{const I=C.docs[0];G(I.id);const D=I.data();if(S(D),s(D.scaling||"RX"),u(((b=D.reps)==null?void 0:b.toString())||""),x(!1),e==="25.1"&&D.reps){const O=Number(D.reps);if(!isNaN(O)&&O>=0){const{rounds:N,extraReps:_e}=gT(O);d({rounds:N,extraReps:_e})}else d(null)}else d(null)}})()},[e]),j.useEffect(()=>{if(e==="25.1"&&o){const se=Number(o);if(!isNaN(se)&&se>=0){const{rounds:Z,extraReps:P}=gT(se);d({rounds:Z,extraReps:P})}else d(null)}else d(null)},[o,e]);const K=async se=>{var C;if(se.preventDefault(),!V){g("User details not loaded. Please try again.");return}const Z=Number(o);if(isNaN(Z)){g("Please enter a valid number for reps.");return}const P={workoutName:e,scaling:t,completed:!0,reps:Z,userId:(C=Ye.currentUser)==null?void 0:C.uid,displayName:V.displayName,sex:V.sex,athleteCategory:V.athleteCategory,createdAt:uk()};try{if(E&&M&&R){const b=bt(Ze,"scores",M);await No(b,P),S({...E,...P}),x(!1)}else if(!E){const b=await oS(bi(Ze,"scores"),P);G(b.id),S(P);const I=bt(Ze,"users",Ye.currentUser.uid);await No(I,{onLeaderBoard:!0})}q("/home",{replace:!0}),window.location.reload()}catch(b){console.error("Error saving score:",b),g("Failed to save score. Please try again.")}},re=async()=>{if(!(!M||!window.confirm("Are you sure you want to delete your score?")))try{const Z=bt(Ze,"scores",M);await Vp(Z);const P=bt(Ze,"users",Ye.currentUser.uid);await No(P,{onLeaderBoard:!1}),S(null),G(null),q("/home")}catch(Z){console.error("Error deleting score:",Z),g("Failed to delete score. Please try again.")}};return T.jsxs(Pr,{styleType:"default",className:"min-h-screen p-4",children:[T.jsxs(ce,{as:"h1",styleType:"primary",className:"text-3xl font-bold mb-4",children:["Enter Your Score for ",e]}),E&&!R?T.jsxs("div",{className:"space-y-4",children:[T.jsxs(ce,{as:"p",styleType:"default",children:[T.jsx("strong",{children:"Scaling:"})," ",E.scaling]}),T.jsxs(ce,{as:"p",styleType:"default",children:[T.jsx("strong",{children:"Total Reps:"})," ",E.reps]}),e==="25.1"&&E.reps&&h&&T.jsxs(ce,{as:"p",styleType:"default",children:[T.jsx("strong",{children:"Rounds + Reps:"})," ",`${h.rounds} rounds + ${h.extraReps} reps`]}),T.jsxs("div",{className:"flex space-x-4",children:[T.jsx(it,{styleType:"primary",onClick:()=>x(!0),className:"w-full",children:"Edit Score"}),T.jsx(it,{styleType:"danger",onClick:re,className:"w-full",children:"Delete Score"})]})]}):T.jsxs("form",{onSubmit:K,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-1",children:"Select Scaling:"}),T.jsxs("select",{value:t,onChange:se=>s(se.target.value),className:"p-2 border border-gray-300 rounded w-full",children:[T.jsx("option",{value:"RX",children:"RX"}),T.jsx("option",{value:"Scaled",children:"Scaled"}),T.jsx("option",{value:"Foundations",children:"Foundations"})]})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-1",children:"Enter Total Reps:"}),T.jsx("input",{type:"number",placeholder:"e.g. 150",value:o,onChange:se=>u(se.target.value),className:"p-2 border border-gray-300 rounded w-full"}),e==="25.1"&&o&&!isNaN(Number(o))&&h&&T.jsxs(ce,{as:"p",styleType:"default",className:"mt-2",children:[T.jsx("strong",{children:"Rounds + Reps:"})," ",`${h.rounds} rounds + ${h.extraReps} reps`]})]}),p&&T.jsx(ce,{as:"p",styleType:"danger",className:"text-sm",children:p}),T.jsx(it,{styleType:"primary",type:"submit",className:"w-full",children:"Save Score"})]})]})},RV=()=>{const[r,e]=j.useState(""),[t,s]=j.useState(""),[o,u]=j.useState(""),[h,d]=j.useState(""),[p,g]=j.useState(null),[E,S]=j.useState(!1),R=Vr(),x=z=>z?z.trim().split(/\s+/).map(K=>K.length===0?"":K.charAt(0).toUpperCase()+K.slice(1).toLowerCase()).join(" "):"",M=z=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z),G=z=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{6,}$/.test(z),V=async z=>{if(z.preventDefault(),!r.trim()){g("Name is required.");return}if(!M(t)){g("Please enter a valid email address.");return}if(!G(o)){g("Password must be at least 6 characters, including uppercase, lowercase, number, and special character.");return}if(o!==h){g("Passwords do not match.");return}try{const K=(await PN(Ye,t,o)).user,re=x(r);await Xh(bt(Ze,"users",K.uid),{uid:K.uid,displayName:re,email:K.email,photoURL:null,isMember:!1,onLeaderBoard:!1,createdAt:new Date}),R("/additionaldetails")}catch(q){console.error("Signup Error:",q),g(q.message)}};return T.jsxs(Pr,{styleType:"default",className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 px-6 py-10 max-w-screen-lg",children:[T.jsx("div",{className:"mb-8",children:T.jsx("img",{src:QS,alt:"Seven Springs CrossFit Logo",className:"w-40 h-40 mx-auto mb-4"})}),T.jsx("div",{className:"mb-8",children:T.jsx("img",{src:ef,alt:"Seven Springs CrossFit Logo",className:"w-40 h-40 mx-auto"})}),T.jsxs("form",{onSubmit:V,className:"w-full max-w-md mx-auto mb-4 space-y-4",children:[T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-2 font-semibold text-gray-700",children:"Name"}),T.jsx("input",{type:"text",placeholder:"Full Name",value:r,onChange:z=>e(z.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-2 font-semibold text-gray-700",children:"Email"}),T.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:z=>s(z.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-2 font-semibold text-gray-700",children:"Password"}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:E?"text":"password",placeholder:"Password",value:o,onChange:z=>u(z.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10"}),T.jsx("button",{type:"button",onClick:()=>S(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:E?T.jsx(dT,{className:"text-lg"}):T.jsx(mT,{className:"text-lg"})})]})]}),T.jsxs("div",{children:[T.jsx(ce,{as:"label",styleType:"secondary",className:"block mb-2 font-semibold text-gray-700",children:"Confirm Password"}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:E?"text":"password",placeholder:"Confirm Password",value:h,onChange:z=>d(z.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10"}),T.jsx("button",{type:"button",onChange:()=>S(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:E?T.jsx(dT,{className:"text-lg"}):T.jsx(mT,{className:"text-lg"})})]})]}),p&&T.jsx(ce,{as:"p",styleType:"danger",className:"text-sm mb-2",children:p}),T.jsx(it,{styleType:"primary",className:"w-full py-3",type:"submit",children:"Sign Up"}),T.jsx(ce,{as:"p",styleType:"secondary",className:"text-sm text-center",children:T.jsx(pu,{to:"/login",className:"text-blue-500 hover:underline",children:"Already have an account? Sign in"})})]})]})},IV=()=>T.jsx(WM,{children:T.jsx(JM,{children:T.jsxs(HI,{children:[T.jsx(eV,{}),T.jsxs(EI,{children:[T.jsx(hi,{path:"/",element:T.jsx(pT,{})}),T.jsx(hi,{path:"/home",element:T.jsx(gV,{})}),T.jsx(hi,{path:"/leaderboard",element:T.jsx(yV,{})}),T.jsx(hi,{path:"/settings",element:T.jsx(TV,{})}),T.jsx(hi,{path:"/additionaldetails",element:T.jsx(SV,{})}),T.jsx(hi,{path:"/signup",element:T.jsx(RV,{})}),T.jsx(hi,{path:"/scoreentry",element:T.jsx(AV,{})}),T.jsx(hi,{path:"/login",element:T.jsx(pT,{})})]})]})})});xR.createRoot(document.getElementById("root")).render(T.jsx(j.StrictMode,{children:T.jsx(IV,{})}));
